# 机器人运单统计

## 机器人运单统计
### 适用 rds-F1.9.5-B1.7.20 及以上
查询指定时间段内的订单信息。 源数据：Core 获取所有机器人信息
统计周期：level为Hour，每十分钟更新一次数据；level为Day，Month，Year，每十五分钟更新一次数据。
## 请求
## 方法： POST
### 接口说明： /api/stat/agvOrders
POST "http://127.0.0.1:8080/api/stat/agvOrders"
## 请求 body 参数

## Name

## Type

## Description

## Required

## start

## string

统计的起始时间，支持 4种 格式的时间参数。 yyyy-MM-dd HH , yyyy-MM-dd , yyyy-MM , yyyy ，分别对应时报，日报，月报和年报，和参数 level 相关。

## 是

## end

## string

统计的结束时间，支持 4种 格式的时间参数。 yyyy-MM-dd HH , yyyy-MM-dd , yyyy-MM , yyyy ，分别对应时报，日报，月报和年报，和参数 level 相关。

## 是

## level

## string

统计等级，支持 4种 参数， Hour ,
Day , Month , Year 。

## 是

## types

## string

统计的类型，见 订单统计类型 ，需要统计多个类型时用逗号','隔开。

## 是

## vehicle

## string

指定目标车辆进行统计。不填则统计所有车辆。

## 否
## 请求示例
查询 AGV-01 在 "1970-01-01" ~ "1970-01-03" 之间每 天 的 业务里程
## 时间区间： [start, end)
## 正确示例
## {
    "start": "1970-01-01",
    "end": "1970-01-03",
    "level": "Day",
    "types": "OrderBusinessOdo",
## "vehicle": "AGV-01"
## }
## 错误示例
## {
    "start": "1970",
    "end": "1980",
    "level": "Decade",
    "types": "OrderBusinessOdo",
## "vehicle": "AGV-01"
## }
## 响应
排除接口错误或网络异常等原因，响应的 HTTP 响应状态码为 200。响应体中有不同业务码，成功为 200，失败业务码可参考 业务错误码列表 。
## 响应 body 参数

## Name

## Type

## Description

## code

## number

## 业务码(非 HTTP 状态码)

## msg

## string

## 业务成功/失败信息

## data

## object

## 请求的业务数据
## 响应示例
## 成功示例
## {
    "code": 200,
    "msg": "Success",
## "data": [
## {
            "level": "Day",
            "time": "1970-01-01",
            "type": "OrderBusinessOdo",
            "value": 123,
## "id": "AGV-01"
        },
## {
            "level": "Day",
            "time": "1970-01-02",
            "type": "OrderBusinessOdo",
            "value": 123,
## "id": "AGV-01"
## }
## ]
## }
返回的数据 data 中，参数 value 表示订单数量或者累计里程。以 time 字段为起始时间，至 下一个同等级的时间为结束时间 作为周期。
## 失败示例
## {
  "code": 9035,
  "msg": "字段 level 缺失或不支持的名称",
## "data": {
## "valid levels": [
      "Year",
      "Month",
      "Day",
## "Hour"
## ]
## }
## }

## 订单统计类型

## Type

## Description

## OrderBusinessOdo

执行业务的累计里程，单位米。

## OrderCreatedNum

创建运单的数量。

## OrderFinishedNum

运单正常执行完成的数量。

## OrderStoppedNum

运单终止的数量。

## OrderTakingNum

运单被机器人接单的数量。
对于 OrderCreatedNum 此类型不支持vehicle过滤字段，指定 vehicle 将返回空数据。由于"创建"不是一个运单的终态，RDS 进行统计时运单的状态可能已发生改变，运单的 vehicle 字段记录的是已分配的车辆或即将分配的车辆，不适用于统计 " 在某个时间段内某个车辆的运单创建数量 "。
