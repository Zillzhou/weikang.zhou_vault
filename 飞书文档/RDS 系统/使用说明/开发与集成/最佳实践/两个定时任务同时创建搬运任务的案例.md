# 两个定时任务同时创建搬运任务的案例

## 两个定时任务同时创建搬运任务的案例
该案例中特殊的需求是: 两个定时任务监听modbus信号触发的搬运任务，其搬运的起点是同一个库位，如果两个modbus 信号同时满足，只能创建一条任务，不能创建两个搬运任务。如果是普通的实现方式，很容易出现两个定时任务重复创建任务的情况。
以下案例通过脚本抢占式锁定起点库位的方式，避免两个定时任务同时创建搬运任务。
首先，两个定时任务通过监控modbus信号，一旦modbus信号满足条件，就创建任务。
1709192339375-af93b2e5-ddcf-426d-9f6f-8191a9f5e460.png

若两个任务的Modbus值同时满足条件，在postorder中添加jj.updateUnlockSiteLockedBySiteId, 获取返回值0或1。只有一个任务获取为1，其余为0，获取值为1则生成天风任务
1709192411317-cd3287e4-b4e9-429c-a991-1a9e7d1e6c45.png

### 天风任务中需要在动作完成后加入解锁库位：
1709192869752-2a8dd66e-46ee-4204-b0c1-216c37896d4c.png
