# 接口配置使用教程

## 接口配置使用教程
## 一、接口配置
进入【接口配置】页面，点击页面上的【添加】按钮添加一个新的接口：
1701067848901-514941a2-9c86-40b5-90dc-762434d59eee.png

在弹出的【添加接口】框中输入对应的接口名称和 URL ，需要注意的是， URL 必须以" /handle/register/ "开头，选择 POST 或 GET 为对应的请求方式，并根据需要选择手持端接口/公共接口类型。
举例说明：通过请求设置的接口下发一个天风任务，天风任务中设置库位内容（从接口参数中接收），首先新建一个名为 InterfaceTask 的天风任务并按照图中编辑：先添加两个参数，然后拖拽设置库位货物块到块编辑区，将任务输入参数中的两个参数：targetSiteId 和 content， 分别用“=”填入 库位Id 和 货物 中 ,保存。
1701067891953-90cdc3d8-6fb0-476d-8c6d-573f3b8b23c6.png

## 1.1公共接口
回到接口配置页面，添加接口，填入对应的内容，选择公共接口类型，点击保存：
1701067974000-49209946-8727-4508-aebb-9ba5267ad44f.png

## 保存后出现了一条新的配置内容：
1701067996382-282dc30d-0faf-46ce-9b94-08d91340b2bb.png

点击行末的【编辑】，进入到接口的任务编辑页面，点击上方工具栏的【接口输入参数】，新增两个参数，targetSiteId 和 content，在天风任务块集合中，拖入刚刚创建好的 InterfaceTask 任务，将任务输入参数填充进去，再拖动一个接口响应块，填入响应内容和响应码。
1701068032992-210ad281-49c1-4a57-9e07-a9039bfdabb0.png

1701068049016-0c64ed7f-f6d3-4a3e-8e3e-7650a392692f.png

### {   "message": "任务接收成功。" }
## 并按业务需要完成任务编辑：

1675316054538-b14f8c02-a3b3-4d21-b859-867572d3b860.png

## 接下来使用 postman测试接口：
1701068123879-80427d38-2f4b-405e-882e-1544fc20e405.png

## 此时完成了库位的占用和货物设置：
1701068153786-5c0ffb25-8837-4b8e-a96d-59464a1c0a1f.png

## 1.2 手持端接口
### 添加一个新的手持端类型的接口，按以下内容输入，保存：
1701068189905-e8ad5737-2d1f-40a4-88ee-9dc26b20256e.png

点击接口配置的编辑按钮，进行接口逻辑的编写，设置接口输入参数，拖入以下块，点击保存：
1701068253660-c3280510-8ef1-4e2e-b1aa-3d3210dd1973.png

1701068264074-cda92060-0155-42b8-8bce-a92ab4854504.png

接下来需要配置手持端按钮，来模拟手持端通过接口配置的自定义接口进行任务下发的过程。配置手持端按钮有两种方式，1.配置文件的方式；2.组态配置，即图形配置，图形化的方式配置手持端。
## 1.2.1 参数配置的方式配置手持端
假如通过配置文件的方式，设置界面参数配置填入以下内容，入口为 RDS 界面找到【设置-参数配置】，配置如下：
1701068282579-85aeb56d-2a53-4030-a053-279d9947ff7c.png

## 1.2.2 组态配置的方式配置手持端
假如通过图形配置的方式，那么直接点进设置界面，就是图形配置的方式。点击任务右侧的加号，填入以下内容，点击确定：
1701068300478-082178d0-47d9-46dc-93ab-43b7cb3795e6.png

可以看到仿真手持端上多了一个按钮，我们双击该按钮，将两个下拉菜单组件拖入该按钮的详情页中：
1701068325372-66a0f3e2-3d1d-42c2-bbcf-2a117dfe5941.png

### 点击这两个下拉菜单，分别按照下图配置组件的属性：
1701068341126-c53712d8-adcf-4ad5-9cbd-241c22c9692d.png

1701068353636-3eb64e65-cb07-4fdb-8cf7-58e1907a9701.png

1701068371611-350091a7-1649-495c-bcf6-e09fdf2ccd3d.png

1701068385056-f16f9151-2477-46fc-8067-22ec25a1c7f3.png

除了配置下拉菜单的一些内容以外，我们还需要配置下单的路由，即下单按钮通过我们在接口配置页的接口来发起任务。所以我们将路由填写为接口url中的后缀 interfaceTaskPDA（因为手持端的开启自定义接口已经默认了前缀是/handle/register/了），下单后的确认提示文本填入：确认下单吗？打开“开启自定义接口”的开关，即代表通过自定义接口来发起任务。所有的编辑完，点击界面右上角的保存按钮。
1701068412319-0d85097c-9e50-40f6-a6c3-c00ce806c947.png

1701068430199-1c5e5c4c-1984-43fe-b9ba-157380e773b4.png

### 此时可以通过 PDA 来测试接口，点击按钮发起任务：
1701068444351-01622258-76b9-4007-90db-0f0c7f179703.png

## 任务库位设置已完成：
1701068457828-08b690b4-2a5f-4c9e-b257-2433b8958407.png

### 二、接口管理
接口管理】为用户在【接口配置】页面完成配置并运行后，查看接口运行情况的页面。
在完成接口配置并触发了上位系统运行以后，则会出现一条新的接口管理信息，如下图所示：
1701067142082-630acffd-c7cd-4784-a690-cf748e35e284.png 

显示的信息包括：接口请求ID、URL、接口名称、任务ID 、请求方式、状态、创建时间和结束时间。上方的工具栏供用户根据需要自行查询。
点击每行的行首的【监控】，显示通过接口运行后的任务运行情况：
1701067172954-a5df5dc4-19d0-4e14-bdea-409637f5397a.png
