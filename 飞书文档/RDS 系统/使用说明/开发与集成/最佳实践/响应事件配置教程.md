# 响应事件配置教程

## 响应事件配置教程
响应事件的含义是：当任务/动作达到一定条件，如任务终止/失败、动作完成/失败、库位数据改变等，可以通过事件配置，来自定义任务/动作达到条件以后想要触发的逻辑（即响应），如动作完成向其他上位系统上报信息。
事件配置功能目前提供以下8个响应事件：动作失败事件、任务完成事件、任务终止事件、任务失败事件、库位数据改变事件、机器人错误或异常信息改变事件、机器人接单状态改变事件、监听tcp传输事件。该八个事件标识作为唯一id，不可重复，即在定义新事件时，如已定义了动作失败事件，将无法再新建第二个动作失败事件，每个事件只允许被定义一次，但每个事件中的逻辑可以自由编写。
1702265444700-0e432646-7ac1-415d-ab40-0481a3764a1b.png

根据响应事件对应的使用场景，每个响应事件都被预设了固定的输入参数，在编写事件逻辑时，可以通过获取天风任务中相应代码块的信息，作为事件配置的依据，从而将事件配置和天风任务运行关联起来。
1702265403917-2e4ea53d-eebc-4389-b0f7-f255c05043f5.png

响应事件提升了任务编写效率，如机器人动作完成后需要触发动作的上报，那么可以在事件配置中编写好不同动作完成后触发的不同逻辑，而不需要在天风任务的每个动作块之后拖入相应的响应块。
在事件配置页面，点击【定义新事件】，选择事件标识，填入事件描述，此处以任务完成事件为例，即我们可以通过事件配置，来定义天风任务的任务完成以后想要触发的响应。
1702263642622-534bee61-c537-42d3-a7e1-8e58c0c32ddf.png

添加完成后，列表中出现一个记录，点击编辑，对事件进行编辑。
1702263677491-fb86f3e2-1d23-4994-b9e9-705c0684c72e.png

我们想要在任务结束后，向上位系统发一个post请求，上报任务完成。（此处默认有天风任务，在这个任务结束运行以后，会触发该事件。）
我们到接口配置界面，新建一个post接口。
1702263803182-06869ce9-9292-4e73-86b0-268255c92549.png

编辑接口，设置该接口的响应。
1702263854874-77cfb2a5-a06b-4a83-8288-5fe5b52106b5.png

保存接口。
我们回到事件配置页面，拖入一个发起POST请求块，将该接口的URL填入该块中，保存事件配置。回到事件配置列表页，点击启动。只有启动后，事件配置才生效。
1702263965439-03cc0e22-e492-4d26-8847-ee499948b1aa.png

http://localhost:8080/handle/register/report
### {  "status": "Terminate"}
## 选一个天风任务，运行
1702264309318-9618f3e6-ed3d-4a49-83ce-acc455dfae79.png

在该天风任务结束的时候，切换到事件管理页面，会发现事件管理多了一条记录。
1702264358004-49eacaa7-253b-4585-b159-3c86ee2ed236.png

点击监控，可以看到响应事件已触发。
1702264380151-b4854f88-7b4e-4e99-b60f-d9219cd59518.png

该响应事件是向接口上报，那么在接口管理中也可以看到接口的记录。
1702264433320-b6619822-697f-48e8-ade2-7cf16083dc2c.png

1702264441980-cc3e5c89-5a21-44e5-a359-17bca13c4c93.png

其他的响应事件配置同理。
