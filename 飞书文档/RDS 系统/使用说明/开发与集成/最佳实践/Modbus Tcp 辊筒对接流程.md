# Modbus Tcp 辊筒对接流程

## Modbus Tcp 辊筒对接流程
本文将介绍辊筒车与机台辊筒采用 ModbusTcp 协议的交互过程。分为两种情况：AGV 取货流程和AGV 放货流程。
1. ModbusTcp 协议采用 主(Master) - 从(Slave) 模式进行交互，即 主站（Master） 主动向 从站（Slave） 发起请求，例如读、写数据。
此处辊筒机器人作为 Master，通过 ModbusTcp 向机台从站读写信号，读写的相关Modbus地址位和功能码见 信号对接表 。
### 2. Modbus地址和功能码可以根据现场实际情况定义。
### 3. 功能码05表示写入单个线圈状态，02表示读若干个连续地址的离散输入状态。
## 一、初识辊筒
本文以辊筒组件SLM-DR1534-A为例展示辊筒，该辊筒组件是在仙工智能 AMB-300XS 安全型移动底盘开发的上装设备，可应用于 3PL、电商、鞋服、医药、3C 电子等场景的搬运分拣业务。
1702370630260-7bd52fbc-ab8b-42e2-81dd-6773cc978691.png

## 序号

## 名称

## 数量

## 1

## 急停按钮

## 2个

## 2

## 光电传感器

## 3对

## 3

## 升降挡板

## 2个

## 4

## 维护检修侧板

## 2个

## 5

## 动力辊筒/电动辊筒

## 1/5个

## 该视频为辊筒机器人与机台对接的视频

## 辊筒对接视频.mp4
### 二、信号对接表
在写天风任务之前，需要确认辊筒对接流程，信号对接表就是对接流程的输出文件。分为取货+放货两个对接流程。以下为和辊筒对接信号协议的范例：
AGV取货对接流程 。

## 序号

## 信号发起者

## 信号名

## 描述

## Modbus地址

## 协议功能码

## 动作值

## 1

## AGV

## AGV到达取货机台

AGV向机台发送到位信号，车上辊筒预滚动， 降下车上辊筒挡板，开始转动辊筒机构

## 1200

## 05

## 1

## 2

## 机台

### 设备接收AGV到达信号，显示AGV已经到达取料位

表示机台顺利接收到 AGV 的到位信号，并主动在对应地址位回显1

## 1201

## 02

## 1

## 3

## AGV

## 通知机台转动辊筒

## AGV 通知机台辊筒开始转动

## 1202

## 05

## 1

## 4

## 机台

## 机台 开始 下料

机台辊筒已经顺利转动，机台在对应地址位显示1，表示机台开始下料

## 1203

## 02

## 1

## 5

## AGV

## AGV取货完成

## AGV 通知机台，表示自身已经取货完成

## 1204

## 05

## 1

## 6

## 机台

## AGV 可离开

机台通知 AGV ，表示已经得知AGV 取货完成，并告知 AGV 可以离开取料位

## 1205

## 02

## 1

## 7

## AGV

## 通知对方信号复位

### AGV 准备离开取料位，并通知机台复位自身的信号位的值

## 1206

## 05

## 1

## 8

## 机台

## 复位完成

机台通知 AGV，自身的信号已经复位完成，AGV正式启动离开取料位

## 1207

## 02

## 1
## AGV取货信号表
## AGV放货流程，不需要预滚动

## 序号

## 信号发起者

## 信号名

## 描述

## Modbus地址

## 协议功能码

## 动作值

## 1

## AGV

## AGV到位放货机台

## AGV向机台发送到位信号

## 2200

## 05

## 1

## 2

## 机台

设备接收 AGV 到达 信号 ， 显示 AGV已经到达上料位

表示机台顺利接收到 AGV 的到位信号，并主动在对应地址位回显1

## 2201

## 02

## 1

## 3

## AGV

## 通知机台转动辊筒

## AGV 通知机台辊筒开始转动

## 2202

## 05

## 1

## 4

## 机台

## AGV 可以 开始 滚动放货

机台辊筒已经顺利转动，机台在对应地址位显示1，表示AGV可以开始放货

## 2203

## 02

## 1

## 5

## AGV

## AGV 放货完成

## AGV 通知机台，表示自身已经放货完成

## 2204

## 05

## 1

## 6

## 机台

## AGV 可离开

机台通知 AGV ，表示已经得知AGV 放货完成，并告知 AGV 可以离开放料位

## 2205

## 02

## 1

## 7

## AGV

## 通知对方信号复位

### AGV 准备离开放料位，并通知机台复位自身的信号位的值

## 2206

## 05

## 1

## 8

## 机台

## 复位完成

机台通知 AGV，自身的信号已经复位完成，AGV正式启动离开放料位

## 2207

## 02

## 1
## AGV放货信号表
### 三、天风任务
天风任务包含取货和放货流程，起点终点的PLC机台的配置信息（Host、Port、Slave Id、地址编号）可以根据实际情况更改。
1702371746231-a9e08d5b-eab5-4a1b-a3d0-21e5c84f62ba.png

### 四、所有文件
所有文件（辊筒车图片、辊筒车对接视频、modbus tcp对接信号表、天风任务）如下，其中天风任务（task文件）可以直接导入到天风任务界面。

## modbus对接辊筒的资料.zip
