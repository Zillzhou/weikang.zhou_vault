# 库位问题

## 库位问题
## 锁定、获取不了库位
在 RDS 库位页面上先确定这个库位id是否存在，锁定库位不能是站点。下图 BDB2 是库位 id ， LM1 是站点。
1666345490727-668e7984-6afd-412d-8c8a-43be04f24ab1.png

在库位页面确认这个需要锁定的库位是否被另一个正在执行的任务锁定。
1666345525373-4bfe423e-674a-4da2-88e7-581be3d3651f.png

 上图天风任务需要锁定 BDB2 这个库位同时运行两次，生成两个天风任务实例如下图：
1666345572916-98cbd912-fd8d-4859-80b5-b5ecbf1ce9c1.png 

查看库位页面 BDB2 库位被 1f7f02c0-a9c8-4669-8131-2f2d707481e0 任务所锁定：
1666345600579-f9270cab-0480-4475-8958-6710e2ff8613.png

1666345633956-59796827-010b-4461-ad73-e87bc4fb01e5.png 

故而，另一个 9760272c-491c-41e6-bb70-b9ca3ae0f8e2 任务就锁定不了这个库位。
1666345688050-2713a2e8-3df2-46ea-82fd-7ad1e3e38723.png

RDS 页面终止任务时，只选择了仅终止任务，导致终止的任务一直锁定库位，下个任务执行锁定对应的库位时，锁定不了。
1666345780359-2ee41850-c6c4-486e-81e5-2706931c2005.png

锁定的库位是光电同步的库位。若光电同步的库位状态为同步失败，则锁定不了。
1666345821274-f5c36036-6bb0-4e12-8f05-2ca3246e4abf.png

锁定的库位若是禁用状态，则锁定不了。
1666345867670-d86cefb6-43a7-465d-80ce-09f21ac267c9.png

版本兼容问题。在 B-1.5.x 升级到最新的版本锁定不了。
在库位页面选中全部库位，接着全部禁用在启用，然后在清楚同步失败状态即可。

## 获取库位块获取不了库位
除了排查上述6项外，需要查看自己的筛选条件是否正确。库位ID：会根据填写的库位ID筛选；货物：会根据填写的库位内容进行筛选；是否有货：选中后，会根据库位占用情况进行筛选；是否已锁定：选中后，根据库位是否已经锁定货未锁定进行筛选；是否物理库位：选中之后，只会在其中一个里面进行筛选，其中逻辑库位是在 RDS 中，业务需要的库位不存在场景中的；获取库位后是否锁定：选中后，获取对应的库位会被锁定。
### 光电同步的库位配置后，库位同步状态全为失败
需确定配置在 updateSitesGroup 参数中的库区内的库位，是否 全都有 光电监控，并且已经启用光电，如果一个库区只有一部分有光电，需要将有光电的分在一个库区，不能放在同一个库区中。 Roboshop 上未配置光电的库区不能配置在这，否则库位同步状态全部为失败。
例如，下图中的 testGroup ，是地图场景中配置的一个库区名，如果需要对 testGroup 库区中的所有库位进行光电占用状态的 RDS 同步，则需要 testGroup 库区中的库位都已经启用光电监控，否则， testGroup 库区中未启用光电监控的那部分库位，在 RDS 界面上会显示同步失败状态。
1666346082550-3fc6b9ca-f383-47de-b00b-15e8bcdbda8d.png

需确认 updateSitesGroup 参数中配置的所有库区，是在地图场景中真实存在的，否则 RDS 界面上的库位会显示同步失败。
如果因 updateSitesGroup 参数设置错误出现 RDS 同步失败的情况，操作者对 updateSitesGroup 参数进行更正，重启 RDS 后，此时需"清除同步失败状态"，观察同步失败问题是否已经解决。
1666346500603-2b6e6264-5f98-4e3a-a789-7b41e019c9e9.png
