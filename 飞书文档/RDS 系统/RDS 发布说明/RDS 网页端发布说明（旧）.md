# RDS 网页端发布说明（旧）

## RDS 网页端发布说明（旧）
最新版本发布请查阅 RDS 程序发布 。

## rds-F1.9.98-B1.8.52
## 发布日期：2024/5/17
## 下载链接：Linux&Windows
### 手持端版本：≥ RdsOperator-V2.14.59
### Core 版本：≥ 0.1.9240309
## 功能新增
机器人页面新增急停字段，并将控制权中无人抢占控制权的字体改为红色
     通过 core 接口返回字段 emergency 的值判断，如果是 true 则代表急停，false 代表未急停
## image.png

     当机器人控制权被抢占时，控制权字段内的无人抢占控制权字体改为红色
## image.png

## 功能优化
优化有列表的页面，在小屏幕可上下、左右滑动，避免字段挤压，且标题字段支持鼠标点击设置宽度
### 原页面小屏展示：如图所示，标题字段挤压到了一块
## image.png

      优化后：如图所示，在小屏幕时标题字段不会挤压，可以左右滑动查看数据
## image.png

   注：标题可鼠标点击拖动修改宽度，修改宽度后存储在浏览器，不清除缓存会一直生效。
## image.png

## BUG 修复
### 修复统计-机器人运行记录，无法导出的 Bug
     Bug 场景：机器人运行记录，点击导出按钮，接口没有返回数据，因此无法导出内容
     修复后，可正常导出数据，仍限制最大 60000 条数据。
## image.png

修复统计内页面，时间筛选框输入内容后，点击方框内的叉号，无法清空内容的 Bug
### Bug 场景：如图所示的叉号，点击无法清空数据
## image.png

     修复后，点击可正常清空筛选框内容。

## rds-F1.9.97-B1.8.51
## 发布日期：2024/5/11
## 下载链接：Linux&Windows
### 手持端版本：≥RdsOperator-V2.14.59
## Core版本：≥0.1.9240309
## 功能新增
RDS网页与网页版手持端，新增支持 16 国语言，对页面文字、后端抛出内容进行翻译
      在页面右上角点击语言，然后下拉选择后点击保存，即可切换页面语言
## image.png

## image.png

### 切换后，并优化了左侧菜单栏的文字排版和筛选框的文字排版
## image.png

## image.png

### 运行监控页面，可右键线路、站点进行禁用、启用操作
在运行监控页面，鼠标右键线路、站点时可进行禁用、启用操作。
无论线路是单向线路还是双向线路，如果禁用都会禁用，启用则都启用。
## image.png

## 禁用后，线路或站点会有红色标识符
## image.png

application.yml 文件 server 内新增 address 字段
### 当值为 0.0.0.0 时，局域网内均可访问（默认）
### 当值为 127.0.0.1 时，仅本机可访问
## image.png

## 运行监控支持根据模型类别设置大小显示
     之前运行监控只能设置全部机器人的大小显示，目前增加了对类别的支持，包含叉车机器人、顶升机器人、料箱车机器人、清洁机器人以及机器人缩放（除了前面几种模型外，默认都是这个调节）
## image.png

## 功能优化
## 优化统计卡片选择规则
     当修改了卡片的查询条件，例如时间、机器人等，需在自定义下，并点击保存按钮才生效，否则不保存。下次刷新页面，恢复已保存的内容。
## 统计卡片上下班时间功能优化
     因客户反馈，过去的上/下班时间功能，如果工作时间超过了设置的工作时间，会出现超过 100% 的情况，为了解决该问题进行功能优化：
     "机器人当日执行效率"、"机器人执行效率趋势"、"机器人当日空闲时间占比"、机器人空闲时间占比趋势"这四张卡片，将之前的上/下班时间字段改为类型，可下拉选择：上/下班时间、按天（默认）。
     读取 application-biz.yml 文件内的 statDutyConfig 字段，statDutyConfig可不填写，默认 08:00:00-20:00:00 时间范围，也可自己填写上下班的时间段。
     当选择上/下班时间，计算公式为：机器人上下班范围内工作时间 / 上下班设置的时间范围（或者默认时间范围）
## image.png

      当选择按天时，计算公式为：机器人一天工作时间 / 上下班设置的时间范围（或者默认时间范围）
## 优化在线脚本页面展示
     之前在线脚本下方空白间隔较大，目前缩短了下方白色间隔。
## image.png

## BUG 修复
## 修复统计卡片相关 Bug
## 1.1 Bug 场景：当处于非自定义情况下，删除卡片，卡片没有删除，被置于最后一个位置
      修复后：当处于非自定义情况下，删除卡片，卡片消失，下次刷新页面再次显示。注：删除卡片，需点击自定义按钮，删除后再点击保存按钮方可生效。
1.2 Bug 场景：当使用新数据库时，进入统计卡片页面，时间读取的是 RDS\data\rds\static\stats.json 文件内的时间，并且不手动设置无法更新。
      修复后：使用新数据库时，进入统计卡片页面，会适配当前时间。
### 修复库位点击标题栏折叠图标，页面报错的 Bug
### 修复网页版手持端，多级联动无效的 Bug
### Bug 场景：按钮设置多级联动，在网页版手持端内无效
## 修复后：可根据多级联动，正常显示
### 修复网页版手持端，点击下单后无法弹出提示框的 Bug
### Bug 场景：网页版手持端点击下单后无法弹出提示框
### 修复后：无论是否开启该菜单，都可以正常显示提示框
## image.png

### 修复拼合单任务，只有第一个任务会显示执行时间的 Bug
     Bug 场景：当执行拼合单任务时，任务管理页面只有第一个任务会显示执行时间，而其他的不会显示。
## image.png

### 修复后：拼合单任务，都会显示各自的执行时间
## image.png

修复任务管理页，点击暂停后，页面状态仍是运行中，无法点击恢复的 Bug
     Bug 场景：当暂停一个任务后，状态仍是运行中，而没有改为暂停，因此无法点击恢复，让任务继续执行。
## image.png

       修复后：点击暂停后，任务将被置为暂停状态，此时点击恢复，任务可恢复继续执行，直到任务结束。
## image.png

## image.png

修复运行监控外链，右键操作库位后，库位右侧的长条无法消失的 Bug
     Bug 场景：当在外链进行操作库位后，库位右侧的长条不会消失，另外后续再操作其他库位，不会出现库位长条了。
## image.png

     目前已修复，去除外链操作库位的长条。

## rds-F1.9.96-B1.8.50
## 发布日期：2024/4/29
## 下载链接：Linux&Windows
### 手持端版本：≥RdsOperator-V2.14.58
## Core版本：≥0.1.9240309
## 功能新增
## 新增自定义 css 样式功能
     背景：客户希望 RDS 的登录页、按钮样式、勾选框样式、背景颜色等可以根据自己 UI 的风格，有一个定制的样式。
     解决办法：在 RDS\data\rds\script 目录下，创建 ui_ext 文件夹，在里面放置 ext.css 文件，即可自定义 RDS 样式。包含登录页、按钮、勾选框、背景颜色等，可自定义 css 文件。
## 部分截图：
## image.png

## image.png

## image.png

### 新增"运行监控开启 canvas 显示"功能
     背景：在没有装 GPU 的电脑上，打开 RDS 网页，CPU 会非常高。在4核4线程的电脑上，会飙到100%。
     解决办法：在 RDS 设置-系统设置-其他配置内，新增"运行监控开启 canvas 显示"按钮（默认开启）。勾选后点击页面下方保存按钮，刷新页面即可生效。（注：未保存数据库，页面清除缓存需重新设置。）
当开启时运行监控显示 canvas 样式，会对没有显卡的电脑造成负担，建议有显卡、配置高的电脑选择该模式。
当关闭时运行监控显示 svg 样式，该样式默认关闭了资源空间（可以在运行监控右上角设置内勾选打开），尽可能的降低了 CPU 占用。这个样式对显卡没有要求，可在低配电脑上正常显示运行监控页面。
## image.png

以下是4核4线程，没有 GPU 电脑，打开 SVG 版运行监控的占用情况：
## 不显示资源空间
## image.png

## 显示资源空间
## image.png

## BUG 修复
修复 roboshop 中更换机器人组地图，推送后 rds 运行监控页面仍有之前地图库位的 Bug
 BUG 描述：在 roboshop 中右键机器人组，更换地图后并推送，rds 运行监控除了新推送地图信息，仍保留有上个地图的库位信息。只有刷新页面才会去除掉之前地图的库位信息。
目前已修复该 BUG，更换地图后推送只会有最新地图的库位信息。
修复选择执行机器人块，没有选到车时任务状态仍是运行中的 Bug
     当选择执行机器人块没有选到车的时候会触发此 BUG，块已经变成了异常结束，而任务仍是运行中。目前已修复该 Bug

## rds-F1.9.95-B1.8.49
## 发布日期：2024/4/22
## 下载链接：Linux&Windows
### 手持端版本：≥RdsOperator-V2.14.58
## Core版本：≥0.1.9240309
## 功能新增
设置-系统配置-其他配置页，新增"是否开启告警提示功能"按钮
     客户需求：在 RDS 给别人展示时，不希望看到告警内有报错。因此新增是否开启告警提示功能(默认开启)，当开启此功能后，页面去除告警栏信息。注：开启、关闭此功能，无需点保存按钮，即时生效。
## image.png

## image.png

## BUG 修复
### 修复当出现异常中断时，任务状态未改变的 Bug
     天风任务出现异常中断时，内部块已经变成异常中断状态，但该任务状态仍是运行中。现已修复。

## rds-F1.9.94-B1.8.48
## 发布日期：2024/4/18
## 下载链接：Linux&Windows
### 手持端版本：≥RdsOperator-V2.14.58
## Core版本：≥0.1.9240309
## BUG 修复
修复在机器人动作结束的一瞬间终止任务的话，任务状态没有改变的 Bug
     在机器人动作结束的瞬间，页面点击"终止任务"按钮，或执行"终止任务块"会触发此 Bug，现已修复。

## rds-F1.9.94-B1.8.47
## 发布日期：2024/4/12
## 下载链接：Linux&Windows
### 手持端版本：≥RdsOperator-V2.14.58
## Core版本：≥0.1.9240309
## 功能新增
兼容 SQLServer、Mariadb、Oracle、人大金仓数据库
     RDS 之前仅支持 Mariadb 和 SQLServer，在本版本后，增加支持 Oracle、人大金仓数据库，通过application.yml文件内进行配置即可使用。
## image.png

## 在线脚本导入，增加限制多目录导入
     当导入含有多级目录的文件，只会导入第一层目录内的 js 文件到 boot 文件夹内，第二层目录的 js 文件到第二层目录内，更多层级的文件则不导入。
## image.png

## image.png

## image.png

## image.png

天风任务、接口配置、事件配置、在线脚本，新增 Ctrl+S 保存功能
     之前保存只能通过鼠标点击保存按钮，目前支持键盘快捷键CTRL+S进行保存。
## image.png

### 机器人动作块自定义指令中属性字段新增支持表达式
     天风任务块机器人通用动作内选择指令为自定义指令时，属性字段之前仅支持键值对的方式，并且键支持字符串，值支持字符串、数字、布尔、对象。目前属性字段、键、值均支持表达式。
## image.png

## image.png

### 新增任务报错后可在告警界面展示并查看监控的功能
     当任务报错时（例如块运行警告、任务运行中断），可在告警-系统告警-任务内看到错误详情，点击详情可跳转到任务监控详情页。并按照报错级别展示，红色为异常（优先展示在前面）、黄色为警告。
     当任务终止或正常结束后报错自动取消。
## image.png

## 功能优化
### 运单管理页面描述字段改为线路，展示动作块站点信息
     因客户需求，希望运单管理页可直观看到机器人动作轨迹，因此对运单管理进行优化。将描述字段改为线路，并将动作块展示在内。
## image.png

## 优化异常打印位置
     后端异常，部分会打印在 RDS 启动框内，优化打印位置，不往启动框内打印。
### rds运行监控及外链支持手势和库位操作（手机需要横屏）
     因客户需求，希望能通过平板浏览器，进行登录 RDS 网页，并在运行监控页面进行地图缩放的手势操作、库位操作。目前优化后，RDS 网页版运行监控、手持端均支持页面缩放手势操作、库位操作功能。注：因手机屏幕小，需要横屏进行操作。
## BUG 修复
修复在线脚本输入框，在页面可见最后一行按回车会导致页面错乱的 Bug
     当处于在线脚本页面可见的最后一行时，如果按ENTER键，会导致页面挤压变形，导致看不到上方的操作按钮。目前已修复。
## 修复测距在小地图上字体过大的 Bug
     之前运行监控的测距字体，是固定的大小，因此当地图小的时候字体会非常大。目前改成自适应大小，无论大图、小图，均可正常展示。
## image.png

## 修复并发导致缓存与数据库不一致 Bug
### 修复导入定时任务到新数据库时偶发启用失效的 Bug
     当从旧数据库导出定时的天风任务，再切换新的数据库，进行导入天风任务操作。会出现有的定时任务启动后并没有执行。目前已修复。
