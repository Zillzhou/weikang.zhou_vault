# Checklist-电池协议适配

## Checklist-电池协议适配

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.30

## 语雀迁移至飞书

## 使用中

## 一、适配内容

## 重要程度

## 内容

## 说明

## 必备

## 电压

## 电池总电压

## 充电电流

## 协议中电流的两种表现形式：
### 电流是有符号类型数据，充电为正，放电为负
## 充电电流和放电电流各占一个字段

## 放电电流

## 剩余电量

## 协议中电量的两种表现形式：
## 电池信息直接包含剩余电量信息
### 需要通过剩余容量和总容量进行计算得到剩余电量

## 温度

## 温度的两种表现类型：
## 电芯温度
## BMS温度

## 可没有

## 循环次数

## 错误码

### 二、通信接口
### 2.1 CAN
### 2.1.1. 说明
一帧CAN报文是由帧ID和8个数据位组成，电池信息存放在数据位中，一帧报文的数据位可存放一种及以上的电池信息，一般电池有很多条不同的帧， 只选取包含我们所需电池信息的报文 即可，以下图CAN协议为例

1657086620231-dd6b77e6-13e9-4cc6-9fa0-d2e6700664f8.png

### 帧ID为0x209的报文存放了电池 温度 信息
帧ID为0x20A的报文存放了电池 电压，充放电电流和剩余电量 信息
### 帧ID为0x20B的报文存放了电池 循环次数 信息

### 2.1.2. CAN 电池适配要求
## 协议包含适配内容
## 每帧报文的数据位是8位
## 包含所需电池信息的报文不超过5条
如果是主动上报类型的协议，报文上报周期大于100ms，且不超过1s
## 波特率不超过1M

### 2.2 串口
### 2.2.1. 接口说明
## RS485--- 推荐
## RS232--- 不推荐
### 2.2.2. 串口电池适配要求
## 协议包含适配内容
如果是主动上报类型的协议，报文上报周期大于100ms，且不超过1s
波特率在9600或115200（数据位：8，停止位：1，无校验位）

### 三、FAQ
### Modbus RTU 协议是否都可以适配？
只要提供的 Modbus RTU 符合上述适配要求，是可以适配的。由于目前每家的 Modbus RTU 协议数据字段均不相同，所以不同电池的 Modbus RTU 协议不可通用。
