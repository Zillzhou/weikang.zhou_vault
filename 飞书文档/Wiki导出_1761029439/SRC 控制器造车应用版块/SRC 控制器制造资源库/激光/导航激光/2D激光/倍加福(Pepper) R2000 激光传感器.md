# 倍加福(Pepper) R2000 激光传感器

### 倍加福(Pepper) R2000 激光传感器

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.16

## 初版编辑

## 使用中

## 适用范围
本文档针对 Pepper R2000 系列激光传感器的配置方法进行说明。

## 调试资源
### 调试软件分为 软件包 + 驱动包 两部分：

## 资源名称

## 资源作用说明

## 资源下载链接

## 倍加福激光上位机调试

## PF_PACTware

## 倍加福激光上位机和激光驱动包

### R2000_DTM_v1.3.2.1.rar

## 硬件资源

### 网线、串口转 USB 转换盒、usb 2.0 打印线等等

## 无
## 线束连接
1677574553492-252a03d9-9739-4e8f-87b6-1c519ea49291.png

## 激光信号线与激光电源线
激光信号线 M12 接头应拧入激光传感器 LAN 接口，RJ45 接头应当接入核心控制器六口交换机任意一个
激光电源线 M12 接头应当拧入传感器 POWER 接口，另一头接入合适的电源，注意，棕色线（或白色线）为 24+，蓝色线（或黑色线）为 GND。

可能由于物料变更，无法通过线色进行电源线正极和地的区分,可以参考下图：
1677574567893-aae7831d-e7fd-428f-baa7-57440cdb45ba.png

## 参数配置
倍加福提供了三种以太网连接方式( AutoIP 、 DHCP 、 Static )。
Robokit 程序默认倍加福定位导航激光为静态 IP，地址为： 192.168.192.100 （双激光机器人另一个激光传感器传感器 IP 地址为： 192.168.192.101 ）。

调试前要将倍加福激光传感器从出厂默认状态调整为我司使用状态（IP:192.168.192.100，子网掩码：255.255.255.0，网关：192.168.192.1）。

以下介绍两种方式更改倍加福激光传感器参数。

## 使用倍加福激光传感器调试软件
使用该方式前需要下载倍加福调试软件，并且将笔记本与激光相连的以太网口 IP 修改为自动获取；

安装好调试软件和驱动程序后，打开 PACTware ，界面如下图所示：
1677574581826-31344bad-3b0a-4a73-8185-a8f0c1edc5d3.png

右击左侧的主机 PC，添加设备，唤出 R2000 IP comm 选项框，选中并确定。
1677574598714-34008910-a87f-4250-a096-27d4d72f5dea.png

右击左侧的 R2000 IP comm，添加设备，跳出可用的 R2000 型号选项框，选择所需的型号（我司常用 OMDxxx-R2000 HD ）。
1677574612292-346d8729-fc3c-4e58-9a73-e5e5c110822e.png

右击左侧激光( OMDxxx-R2000 HD )图标,在弹出的选项中选择建立连接，然后双击激光( OMDxxx-R2000 HD )图标即可唤出激光配置所有选项，如下图所示：

1677574628187-a78661c3-bd42-4594-81e9-fbf5e39c4966.png

选择 Ethernet Setup 选项，勾选 Enable update of IP configuration 前的方框，然后将 New Settings 中的配置成如下图所示：

1677574652637-b63e2c3b-7f31-4a42-9053-2b98ac7239ac.png

点击工具栏上【写入设备】按钮将新配置的参数上传至倍加福传感器，然后重置传感器【Reboot Device】即可完成配置，如下图所示。
1677574676865-30fa6800-9afd-4cf7-b46e-d2e9f2eaf7cf.png

激光设备配置完成后需要对激光设备进行重启，等待重启完成可以使用 CMD 命令行进行 Ping 通测试【ping 192.168.192.100】，测试通过，则说明激光设备 IP 已经配置正确。
注：激光设备配置完成后，必须对设备进行重启。
## 使用按钮调整传感器参数

如下图所示，左侧按钮为【选择】按钮，右侧为【菜单/确定】按钮，如下图所示：
1677574697601-30ce3a24-a734-4ba3-a24c-210242dbadc0.png

分别按动【菜单/确定】按钮与【选择】按钮，调整页面至【 Ethernet Setup 】-【 Address Mode 】选择 static ；
分别按动【菜单/确定】按钮与【选择】按钮，调整页面至【 Ethernet Setup 】-【 IP Address 】将其调整为 192.168.192.100 ；
分别按动【菜单/确定】按钮与【选择】按钮，调整页面至【 Ethernet Setup 】-【 Subnet mask 】将其调整为 255.255.255.0 ；
分别按动【菜单/确定】按钮与【选择】按钮，调整页面至【 Ethernet Setup 】-【 Gateway 】将其调整为 192.168.192.1 ；
对激光传感器进行断电重启，即可完成设置。
激光设备配置完成后需要对激光设备进行重启，等待重启完成可以使用 CMD 命令行进行 Ping 通测试【ping 192.168.192.100】，测试通过，则说明激光设备 IP 已经配置正确。
注：激光设备配置完成后，必须对设备进行重启。
## PACTware软件使用
## 传感器其他参数查看与配置
可配置项目包括： Sensor Information , Ethernet Setup , Measurement Setup , Display/HMI Setup , Live View , Service/Diagnosis , About Sensor Information 主要是激光的型号基本信息等。
1677574714262-94e0eb34-9be2-4d21-94d3-bf5afabb27a8.png

Measurement Setup 主要包括角速度分辨率、扫描频率等。
## image.png

Display/HMI Setup 主要包括玻璃镜上的展示图及设置等。
1677575228912-08733ae2-a0eb-4229-8ca8-1fb27b7d1c5b.png

## Logo修改操作说明

准备一张 长度 252 像素，高度 24 像素的单色位图 ，可以使用 windows 自带的画图工具编辑。尺寸大小可参照下图所示：
1677575243541-7509c3f1-bacf-4e3f-9c6a-643c228d007d.png

将软件和激光正常连接，打开 Display/HMI Setup 界面，如下图所示：
1677575263216-e98d54de-ac7b-4683-8b1d-354e754628a0.png

点击【 Load bitmap 】 插入位图，并点击菜单栏【写入设备】按钮进行修改。
1677575289169-5669e426-9ab2-4bf2-8eba-c52857c948f7.png

【写入设备】会将新配置的参数上传至激光设备，点击【 Reboot Device 】重启设备。
1677575305107-764e2e53-7109-465f-bd9f-75e6bc0bb402.png

1677575324338-fc693bdd-140b-45fc-9b40-827e22d6e6c4.png

## 注 ：必须重启，否则无法正常运行
## 模型配置
## 机器人配置了单激光，配置如下：

1677575341863-0fd0b347-98f6-4ea1-b24b-8bcf491b7519.png

## 故障排除及错误码
1677575360869-582ca19f-6ac9-4a2e-952a-5f364753f515.png
