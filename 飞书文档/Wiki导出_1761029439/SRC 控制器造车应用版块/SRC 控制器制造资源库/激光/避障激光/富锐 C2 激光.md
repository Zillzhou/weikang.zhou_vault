# 富锐 C2 激光

## 富锐 C2 激光

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.16

## 初版编辑

## 使用中

## 适用范围
仙工智能使用富锐C2型号激光雷达用作避障。
## 调试资源

## 资源名称

## 资源作用说明

## 资源下载链接

## 上位机调试软件工具

## 电脑和雷达通过以太网连接配置

C&H激光配置软件_UpperCom_1.02.07.011.rar

## 雷达技术手册

## C213产品说明书.pdf

## 驱动升级软件

### c200_upgrade_1.2.rar

## 查询ip固件

### H100_FPGA_23111614.rar

## 网络封包分析软件

### Wireshark-win32-3.4.4.rar

## 硬件资源

## 网线、DC24V 电源等

## 无

## 配置说明
在使用富锐激光雷达之前，需要对激光雷达的ip和端口号进行配置，需要使用富锐的上位机进行配置。
将激光雷达上电并通过网线连接到个人电脑，打开上位机软件，点击左侧“基本信息”，输入雷达 IP 地址，点击“连接”。连接雷 达后，上位机会显示设备名称、设备序列号、设备版本号、MAC 地址信息。富锐C2激光默认ip为192.168.192.100，需要将个人电脑的ip修改该为同一网段。
1701139289230-f43156c4-db78-4d1a-a9e4-456b64b74ddc.png

连接上了之后点击参数配置-雷达权限解锁。需要配置ip和扫描频率换个角分辨率。
1701140614776-d210f378-bead-4be6-9cbc-e26027b1f5aa.png 

仙工智能规定激光雷达IP需要设置为192.168.192.10x，由于C2激光出厂统一IP为192.168.192.100，网段一致，可以直接建立通讯， 但是在同时使用多个激光的情况下，为了避免激光IP重复，需要修改对应的激光IP （如下图所示），点击修改并保存。(设置扫描角度不用重启雷达就能生效；设置了网络参数，需要重启雷达才能生效)
1701141580210-fbaa4462-94c0-4da6-b0de-d1c6bd83d43b.png

接着修改转速和角分辨率，修改为 25Hz/0.3333°。点击修改并保存。
## image.png

修改完成之后需要对激光雷达断电重启之后，设置才会生效，然后就可以在roboshop上配置使用。
## 使用说明
如果想在仙工智能的控制器上使用富锐c200，需要使用过roboshoop在机器人模型中进行配置。
1701144034662-2efec03b-4aa7-4015-b75b-45c575aa9e19.png 

富锐c200，需要在上图brand部分选择FocusRay-c200-TCP，并填写好配置的ip和端口号，勾选启用设备并推送，即可使用该激光雷达。
下表对其他参数做出说明。

## 固件升级
目前出货（截止2023-11-27）C2激光的固件版本为： 22033114，如果需要更新固件，则需要保持激光上电且跟电脑建立通讯的情况下，使用上位机软件进行升级。
### c200_upgrade_1.2.rar
该软件同时适配H1、C2两款激光。
解压C200_upgrade_1.2.rar包得到c200_upgrade_1.2 文件夹后，找到可执行文件 c200_upgrade-1.2，并双击打开。
1701049306074-bf33c6de-ee4c-472b-a679-518a96ea1919.png

打开以上应用程序后，输入雷达ip地址，并根据自己的文件路径选择配置升级文件进行升级操作。升级时窗口会实时显示在线升级信息。
1701142529696-351e54c3-6110-49c5-85e1-1310555b3f1d.png 

1701142573284-09151672-8941-414c-a4d3-379ac2f7e0e2.png 

最后，在线升级成功后软件窗口会提示升级成功，请断电5秒后重启使用。 若升级失败，切记不可断电重启 ，重新打开软件重复以上步骤即可。
## 查询IP功能
对于激光配置来说，可能会因为某些原因，导致激光的ip遗失，此事发生后，通常只能寄回原厂返修处理，针对这一现象，C2激光提供了一版全新的固件（ 23111614 ），用于在未知网段的前提下，查询到激光的ip。 如果有需要，可自行更新，后续的产品固件版本切换，以公告为准 。以下示例中，PC端的以太网配置为192.169.192.75，激光ip为192.168.2.100，两者网段并不相同，以此模拟激光网段丢失的情况
### C200_FPGA_impl1_23111614.rar
①确保激光的固件版本，由于上传限制，无法上传.bit文件，需要将压缩文件解压后，使用步骤三【固件升级】来将激光固件升级到 23111614 ，在该版本下，激光才具备查询ip的功能。
②使用软件Wireshark对激光的ip进行查询。
### Wireshark-win32-3.4.4.rar
解压文件后，双击Wireshark-win32-3.4.4.exe进行软件安装 
1701051108646-a9232c15-a7ef-48c2-b291-f4eb54b09214.png 

。
将电脑与通电之后的激光连接，在网络配置界面查看激光使用的是哪个以太网口
1701054609257-6bf9249f-d2f4-48a1-8e53-29721fb282f3.png

### 使用软件 Wireshark，双击对应的网口
1701054655794-ec007970-6851-47ed-9d15-dfc49b7dc08b.png

添加过滤条件“udp.port==1900”后，点击运行即可查看到激光ip。
1701057469691-61a65f38-7466-4923-95e3-5ab9a2c4e24b.png
