# 西克 TiM310 使用说明

## 西克 TiM310 使用说明

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.16

## 初版编辑

## 使用中

## 适用范围
仙工智能使用 TiM310-0130000S02 检测型激光传感器用作避障，本文档针对 TiM310-0130000S02 检测型激光传感器及软件使用进行说明。
## 调试资源

## 资源名称

## 资源作用说明

## 资源下载链接

## 官网下载链接

## SICK 下载 专区

## 硬件资源

## 网线、DC24V 电源等

## 无
## 激光安装方式及注意事项
## 安装姿态
要求激光安装水平，不能够产生超过 1° 的俯仰和倾斜。

1654925677307-9451f679-d2fe-4295-b55b-9fadee13cc4c.png

## 激光安装的倾斜和俯仰

## 安装高度
由于测量型激光扫面的是二维平面，定位激光的安装高度要求避开环境中的动态区域，并且能够稳定的感知环境中的静态信息。因此，定位激光的安装高度和使用场景相关，在一般工厂场景中，一般是越高越好，因为这样可以避免环境中动态货物和动态行走的人的干扰如下图：

1654925708756-af7d2884-b58f-47d7-b532-7ea53b16cb67.png

## 激光高度设计（激光加高场景）

在有些机房场景中，机柜是镂空的，高处无参考物情况，这样激光感知到的环境静态信息是不稳定的，因此需要选择如图红线框定的高度作为激光安装高度。
1654925736895-16be3943-e65e-4965-a20b-738812e81606.png 

1654925747125-f3389f81-20db-442f-aafb-7b3da594230e.png

## 激光高度设计（机房场景）

## 注意事项
## 1.基于二维测量型激光的系统，只能够在二维平面上运行，不支持具有坡度，高低起伏不平的地面。
### 2.激光安装过程中，一定要注意激光的安装倾斜角度，除了上述要求，还要求在激光的测量距离内，激光不能扫到地面。
3.激光的感知原理决定了对于不同材质和反射率的物体，其测量距离是不一样的，一般黑色物体的测量距离会更短，环境中如果有大量黑色物体，需要根据激光测量的最短距离来进行选型。
### 4.尽量在机械结构设计上，给激光留出最大角度范围的感知范围，避免因外壳或者其他原因带来的人为减小激光感知角度的情况。

## 接线方法
1.根据拿到的 TiM310 线缆类型（D-Sub 15pin cable 或者 M12 12pin cable）, 找出对应 GND, DC10~28V, OUT1, OUT3 线，然后分别连接至核心控制器 PDO 的 GND、24V 与 DI。线缆引脚定义如表 1 所示；
### 2.一般将最内层区域（OUT1）设置为停障区，将最外层（OUT3）设置为减速区；
3.现场如有随环境切换区域的需求，则需要将 TiM310 的 Input1~4 引出，接入 IO 扩展板（如已经适配的台达 PLC ），由 Roboshop 直接控制 Plc 相应端口的输出电平来实现切换；

## Function

## 功能

## D-Sub 15pin cable

## M12 12pin cable

## Pin

## 颜色

## Pin

## 颜色

## GND

## 地

## 5

## 黑

## 1

## 棕

## DC10~28V

## 供电

## 1

## 红

## 2

## 蓝

## OUT1

## 开关量输出 1（最内层）

## 12

## 棕

## 5

## 粉红

## OUT2

## 开关量输出 2 （中间层）

## 13

## 橙色

## 6

## 黄

## OUT3

## 开关量输出 3 （最外层）

## 14

## 白

## 7

## 黑

4.对激光传感器进行上电（DC10~28V）, 将激光传感器朝向空旷地方（至少 1m 范围内无障碍物），等待 30~60s 后，正常情况下，传感器中心浅黄色灯正常点亮且传感器左侧 “ ！” 图标下方红色灯未点亮，如下图所示，如果传感器存在问题，传感器中心浅黄色灯正常点亮且传感器左侧 “ ！” 图标下方红色灯被点亮，如下图所示。
1654926083965-46fbe48c-0048-479b-881d-bdca07364642.png 

1654926105393-2b07bd2b-bcfd-4108-822e-2ef21239953c.png

## 软件使用方法

SICK 的 SOPAS 调试软件，可以访问西克官网进行下载

## 1.启动 SOPAS 软件，使用 USB-MiniUSB 连接电脑与 TiM310 激光传感器，如下图所示：

1654935633013-ea1093f9-7732-4450-9e0d-967df6cc2810.png

### 2.当 SOPAS 检测到 TiM310 被初次连接到电脑时，会要求安装驱动程序，选择【安装设备驱动程序】-【从设备上传】，如下图所示：

1654935859985-30624faa-09cb-4c45-8a6e-1fd9d6465a18.png 

1654935886278-5fb76641-c9ec-4d14-8124-d8187cfc9d65.png

### 3.驱动安装完成后确认软件状态为【在线】，若软件处于离线状态则单击【离线】按钮，将软件改为在线状态，如下图所示。
1654935991958-1f954499-4fa5-484d-a788-2db8e31df37b.png

### 4.单击 TiM310 右上角【菜单】按钮，选择【打开设备窗口】或者双击 TiM310 图标进入设备窗口，如下图所示。
1654936035133-e52bf67b-e486-4cbc-888c-91b8efca6b0e.png 

### 5.检测区域设置——进入【Parameter】中的【Field】，届时将看到三层区域，以激光传感器为原点起始，从内到外依次为区域 1，2，3，如下图所示。
注：以下以激光传感器无任何 Input 的形式为例（即所有 Input1~4 = 0,此时起作用的区域组为 field1, 如下图所示）。

(a).每个区域的形状相同，内部重叠，区域组的形状及尺寸由最外层的区域确定；

1654938793037-d16f9705-d437-4663-a9ca-b947ed845d79.png 

1654938807355-8604431c-07a9-4b6c-9a39-9deb5772bfbe.png 

(b).在区域编辑（Field editor）窗口分别使用【添加点】（add a new field point ）, 【移动点】（edit field points）, 【删除点】（delete points）按钮对区域的形状进行编辑，如下图所示；
1654939007326-cb7f619d-b69d-4cd5-a203-1644b213fe88.png 

(c).【添加点】：单击【添加点】图标，在想要增加控制点的位置单击，如下图（在区域正上方增加了一点）；
1654939022132-20879976-c86e-46e1-acdb-563b94c4fc0f.png 

1654939030859-df896b58-41d0-448d-984e-b36ebd47e53f.png 

(d).【移动点】：单击【移动点】图标，用鼠标左键选中需要拖动的控制点，用鼠标右键拖动选中的控制点至需要的区域，如下图：
1654939095231-031e10aa-2cea-48ed-a97f-b4a2eaf1d106.png 

1654939101772-2b9ad8e5-cea7-4221-9ce1-a03c6c4c5908.png

(e).【删除点】：单击【删除】图标，用鼠标左键选中要删除的控制点，然后用点击右键，如下图：
1654939157094-22078c3f-33a1-47e5-9014-634a9fdb14c7.png 

1654939190122-c329762c-c907-4897-9092-e2f428346dcf.png

(f).保存更改的区域参数：单击【Field editor】左侧的 
1654939235211-72a4b511-46ba-4cae-93f6-2c843b223aa2.png 

图标即可完成将软件的参数下载至传感器。
### 6.其他相关参数设置——单击【Parameter】——【Evaluation Case】
(a).开关量输出保持时间（Duration time output），可调范围：0~10s, 默认值是 335ms, 如下图所示：
1654939284794-116d1fa3-8bff-4e16-a22a-f7b6304310f1.png 

(b).响应时间 （Response Time）, 可调范围:134ms~30s，默认值：335ms，如下图所示：
1654939305913-b2ef4a9f-0c17-410e-8168-5ad0a962d223.png 

(c).屏蔽物体尺寸（Blanking size）指小于该尺寸时，物体不报警，可调范围 10~1000mm，默认值：直径 200mm, 一般将其修改为 100mm 即可满足客户需求，如下图所示：
1654939332467-cf983cc2-a115-4ad6-a5c9-dc9480a98323.png 

### 7.完成区域及参数修改，保存设置。
(a).SOPAS 软件界面的【将全部参数下载至设备】如下图中 ① 所示，将设置保存至设备 RAM 中，掉电丢失，用于调试使用；
(b).SOPAS 软件界面的【永久保存】如下图中 ② 所示，将设置保存到非易失性存储器中，掉电不丢失。
1654939371482-5339d6c1-127c-4c22-a017-7a8f9137ea7c.png 

### 8.自学习模式
TiM310 具有自学习功能，由传感器根据周围环境外形自动生成最外层区域的形状，并自动生成内部两层区域的形状。
## (a).自学习设置前准备
i.将需要监控区域所有在实际使用中并不永久存在的物体移开；
ii.在 TiM310 开始自学习预警阶段，操作者和设备保持足够距离以免将操作者识别为环境外形的一部分；
iii.确认【parameter】-【Field】-【TeachIn activation】处于 Device Button 状态，如下图所示。
1654939421123-b1616c6a-27c3-4b07-8299-814d103001b3.png 

## (b).自学习阶段
TiM310 扫描到的环境轮廓形状缩小 100mm 为最外层区域的尺寸，内部两层尺寸符合 field set 1 的规范；
## 操作步骤如下图及下表所示：
1654939444459-c0ac385f-65e1-4b79-8a67-019cf323fa76.png 

两个状态指示 LED 灯显示区域外形自学习输入状态。
1654939464769-55a99d57-ba85-4db5-b92f-635c0bf0fe94.png

自学习完成后，TiM310 会自动存储区域参数。
注：1.在自学习过程中，数字输入量不能有电流输入；2.TiM310 调试结束后，务必保持 TeachIn activation 处于 Device Button 状态。

### 9.控制传感器 Input 电平高低自动切换检测范围：
1654939540917-d6e04235-3114-4172-8bc0-4d5884391fbc.png

(a).如上表所示，TiM310 通过控制 4 个 Input 是否输入开关量可以完成区域的切换；
(b).开关量输入高电平有效。低电平 ≤2V, 高电平≥8V, 具体要求如下表所示：

## 输入电平

## 输入电压

## 输入电流

## Low

## Vin ≤ 2V

## I ≤ 0.3 mA

## High

## 8V ≤ Vin ≤ 32V

### 0.7mA ≤ Iin ≤ 5mA
1654939632233-8239f98b-7a76-4ef9-896c-11fcb116d9d8.png 

TiM310 的切区模板有矩形，长方形和圆形之分，其中和 input4 关联的模板都是长方形的，只能覆盖180度扫描角度。无法满足使用要求，所以避开 input4.
当我们要用到 4 个切区模板的时候，用 input1 和 input2;
当我们要用到 8 个切区模板的时候，用 input1, input2 和 input3.

## 常见异常原因
### Q1:用手或者其他较小的物体无法触发 TiM310?
A1:首先排查接线，在确认接线没有问题后，排查软件配置中的 屏蔽物体尺寸（Blanking size）是不是配置的过大了，一般要将其配置为 100mm 即可。

## 模型文件配置
### IO型避障激光请按DI sensor配置，如下图：
1655378887563-39fcca16-929e-42f2-a727-ec9911afd3f1.png

## 相关参数请参考 I/O 传感器
