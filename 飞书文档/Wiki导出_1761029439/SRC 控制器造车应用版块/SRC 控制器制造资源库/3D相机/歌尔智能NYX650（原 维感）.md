# 歌尔智能NYX650（原 维感）

## 歌尔智能NYX650（原 维感）

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.3.25

## 语雀迁移至飞书

## 停用

## V1.1

### 2024.5.29

供应商更改SDK，对应修改RBK版本要求和客户端，解决连接不上新硬件问题

## 停用

## @胡青

## V1.2

### 2024.6.5

更新3.4.6.19以下配合使用的插件包文件，解决预制参数不正确，导致现场识别失败问题，调整文档中的内容错误

## 停用

## @胡青

## V1.3

### 2024.10.18

## 更新上位机版本，增加FQA内容

## 使用中

## @胡青
## 阅读本文之前需要了解的知识和注意点：
如何修改电脑网卡的 IP 地址；
如何使用 Ping 指令测试某个 IP 的可连通性；
基础弱电知识；
Roboshop的基本使用方法；
要求使用 RBK3.4.6.* 及以上版本；
RBK3.4.6.19 以上可以直接使用，以下版本需要添加增量包，增量包在下文中。

## 使用场景
## 推荐场景
蓝色标准栈板直接识别；
木色标准栈板直接识别；
基于Apritag的姿态识别；
室内有阳光斜照场景；
基于机器学习，识别缠绕膜栈板。
## 不适用场景
黑色标准栈板直接识别；
现场识别区域附近有高反物体；
## 栈板厚度低于xxx
## 配合的控制器信息
## 可以配合使用的控制器系列
## SRC-2000 系列
## SRC-3000 系列
## 需要激活的高级功能
## rbk_pallet（用于栈板识别）
### 3.4.6.19以下需要配合增量包使用

SRC2000-RBK3.4.6.18-20240605NYX650相机调整参数.zip
## 增量包使用方式见：升级/备份
## 传感器信息
## image.png
## 图3-1 NYX650实物

工作原理：ToF (Time-of-flight) Depth Camera
### ToF 分辨率和帧率：640 x 480@30FPS
### ToF 视野角度：H-75° V-56°
### RGB 分辨率和帧率：1600*1200@30fps
### RGB 视野角度：H-70° V-50°
## 距离范围：0.3m～4.5m
## 精度：<2%
## 防护等级：IP42
## 产品认证：FCC/CE/FDA
### Eye safety 人眼安全：Class 1
### 接口信息：RJ45母座+M6 Type A 型接口
## 供电电压：12～24V

## 所需调试资源/工具

## 设置软件：

ScepterGUITool-master 1.1.4.zip
压缩包中有windows 平台下的上位机软件和使用手册；
调试电脑；
直流电源 12V/24V。
## 安装和接线
## 机械安装
FOV对安装的要求，电气走线对安装的影响，
如图 4.1 所示，相机的 ToF 视野范围 VFOV 为 56°，HFOV 为 75°
## image.png
## 图 4.1 相机的视野范围描述

## 相机的原点由图 4.2 说明：
X轴的坐标原点位于距离产品上边沿25mm的位置；
Y轴的坐标原点位于距离产品右边沿52.3mm的位置；
Z轴的坐标原点位于镜片的前表面。

## image.png
## 图 4.2 相机的坐标系

如图 4.3 所示，相机安装高度为 H ，可以出现在相机视野范围内的物体最近距离为 L ，则 L=H/tan∠B。若相机以 Z 轴平行与水平面安装，则 L=H/tan28° 。
## image.png
### 图 4.3 抽象后的相机安装角度与栈板可见距离的关系

由于相机本体连接器的存在和线缆弯折半径要求，需要在相机连接器侧预留≥80mm的空间
## 以下为相关3D模型：
## 相机本体3D模型：

## NYX650-3D.stp

## NYX650-3D.x_t
## 安装支架案例：

## NYX650安装支架案例.step

## NYX650安装支架案例.x_t
## 电气连接
## 供电、网络连接
如图 4.4 所示，相机本体共有两个接口一个指示灯，其中框 1 为 RJ45 网口，框 2 为供电指示灯，框 3 为 M6 航空接口（公直头，定义和图示参见仙工智能线缆连接器命名对应）。
## image.png
## 图 4.4 相机侧面接口

如表 4.1 所示，M6 航空接口中 1 、5 号脚为 GND，2 号脚为 VCC ，需要使用这几个端子给相机提供供电。表中”颜色”列作为标准线缆的对应颜色标识，仅供参考，实际功能以引脚描述为准。
## image.png
## 表 4.1 M6 航空接口Pin脚定义

## 参数配置和调试

◆ 提示：本文主要基于win 系统修改相机IP，linux 系统设置ip 方法基本类似
在相机本体上完成的设置主要为是为了将相机的 IP 地址设置为与控制器内部网络相同的192.168.192.xxx网段。
## 前提准备工作
## 硬件连接
使用相机供电线，通过 M6 航空插头，给相机接上直流12V/24V 电源，将相机和PC 电脑通过网线直连起来。供电连接完成后，可以观察相机网口旁边的蓝灯闪烁，若指示灯闪烁表示供电正常。
## 设置相机为固定IP
首先将电脑连接相机的网口改成 “自动获取IP”（DHCP）或者与相机相同的网段（注：相机初始 IP 为 192.168.192.1.101）；
解压“ScepterGUITool-master.zip”文件，得到如下图的文件，双击打开图中标识为“1”的可执行文件；
## image.png
## 图6.1 设置软件在压缩包中的位置

打开上位机软件文件夹中的可执行文件，可以看到如下图的界面。点击方框 1 处的按钮，弹出设备列表，点击“refresh”刷新列表，如果还未能显示连接的相机，可以参考 FAQ 中的描述排查。勾选方框 2 ，选中需要连接的相机，点击“connect”连接相机，进入相机本体设置界面；
## image.png
## 图6.2 设置软件界面

## image.png
## 图6.3 点击 Scan 弹出界面

连接相机之后，界面如图 6.3 所示，在界面左上角框1 ，显示了当前相机的连接信息，点击框2 开关，可以在右侧界面看到当前相机的图像信息，由此可以判断相机工作是否正常；
## image.png
## 图6.4 显示连接信息

点击图中“Network”选项卡，进入相机IP设置界面，如图6.5中显示，选择使用静态 IP 方式，设置相机为192.168.192.* 网段，建议使用192.168.192.192.151～192.168.192.200的 IP ，子网掩码使用 255.255.255.0，设置完成后点击 ok ，出现的两个弹出框均选择 yes 即可完成设置。完成上述点击后相机硬件上的供电灯会短暂熄灭，然后重新闪烁，标识设置并重启成功
## image.png
### 图 6.5 在Network选项卡上设置IP

在相机上位机上设置完成之后，使用控制台 Ping 设置的相机 IP ，如果可以 Ping 通，则相机 IP 设置成功。

### 在Roboshop配置 NYX650 相机的方法
在Roboshop中模型文件配置“Camera”，其中“brand”参数选择为“VZense-TCP”（如图 5.6 中框 1 ）；设置 IP 为上一步中对相机设置的 IP （如图 5.6 中框 2 ）；如果计划使用为栈板识别功能，需要勾选“useForPalletRecognization”；如果计划使用为二维码识别功能需要勾选“useForTagRecognization”；
## image.png
### 图 5.6 在Roboshop中的的设置界面

注意：要求使用RBK3.4.6.* 以上的版本，3.4.6.19以下版本需要配合增量包；
## FAQ
Q：相机上位机无法搜索到相机；
## A：按照如下步骤排查：
上位机软件是否使用的是本文档中提供的版本；
相机是否供电正常，可以通过观察供电插头旁边的指示灯是否为蓝色闪烁状态判断；
相机与配置上位机电脑之间连接的网线是否连接牢固；
上位机电脑用于与相机连接的网卡 IP 是否与相机的 IP 在同一个网段；
上位机电脑的防火墙是否关闭。
Q：如何恢复出厂设置的 IP；
A：在相机供电的情况下，向 M6 航空接口的 6 号引脚输入 3.3～24V 电平，保持 10 秒，相机将恢复出厂预置的 IP：192.168.1.101。
Q：配置完相机之后，在模型文件中配置好相机对应IP，但是还是报连接不上相机；
A：检查 rbk 版本是否是 3.4.6.19 以上，如果不是，是否刷入文中提供的增量包。
Q：相机能够正常连接，但是不能在界面上显示实时画面。
A：检查相机的工作模式，相机应该处于“ActiveMode”，如下图
## image.png
