# 大疆 Livox Mid-360

## 大疆 Livox Mid-360

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.3.25

## 语雀迁移至飞书

## 使用中

## 适用范围
本文档针对 Mid-360 激光传感器的安装以及调试配置进行说明；
适用于 3.4.5 及以上 RBK 版本，优先推荐使用 3.4.6 以上版本。
## 产品介绍
## 产品尺寸：
## image.png

## FOV:
1699542820120-b76687b1-fc6e-42bb-b67c-9656798958fc.png

## 不同角度量程范围：
1699543129303-037a0447-d0d6-46f6-b8cc-a6b64709cf9a.png

## 性能参数：
1699542100969-66737f3d-ab62-472c-a935-0cce0c2ae80d.png

## 官方说明书：

Livox_Mid-360_User_Manual_CHS.pdf
## 3D数模

## mid-360-fov-asm.stp
## 安装方式
Mid-360 设计有标准安装支架，可兼容 CDD14 和 CDD16 原本安装 Mid-70 的安装孔，激光支架 0-15°可调节；
## 安装支架料号：RM011010012

RM011010012 MID-360 可调支架 20231107.STEP

1699410653152-35e1be07-503b-476a-9b5d-81682efc2ee8.png 

1699538918184-d2d5ba1b-1333-4c73-92e8-d3d2d1239275.png

## 叉车推荐安装方式：
支架立装，激光仰角 15°，水平±90°，下图供参考；
1699439027325-e55bb9ef-08b3-4ec7-987b-62db0fa9bba4.png

## 底盘车推荐安装方式：
复合机器人：支架立装，与叉车相同，一般安装在车头和车尾；
底盘车：车头位置相机正装，检测前方地面及空中障碍物，配合安装位置，可以有条件的检测低于 2D 激光检测高度的障碍物。
### *倒装时，Mid-360 底面距离地面不能低于 0.5m
1699541386506-d4a43efe-4884-47e7-b198-93a85a5a2252.png

## 接线方式
### MID-360 有配套线缆，料号：RM006000097
线缆一头 M12 12PIN 与激光连接；
激光通讯通过 RJ45 连接 SRC 控制器网口即可；
激光供电可采用 SRC 24V DO 控制，或者直接连接 24V 供电，线缆供电端子连接器型号是 TE 282104-1，TE 插头的1号管脚为电源正，TE 插头的2号管脚为电源负；
1699422023451-830286e9-30ac-4def-a3fc-656c9a03eb6f.png

## 调试配参
## 上位机下载
Mid 360 和 Mid 70 上位机并不通用，Mid 360 上位机可通过以下官网链接下载，软件名称： Livox Viewer 2
https://www.livoxtech.com/cn/mid-360/downloads

## 上位机参数配置
将 PC 与 Mid-360 用网线直连；
需要将 PC 的 IP 类型设置为静态 IP，IP 地址为 192.168.1.50，子网掩码为 255.255.255.0，默认网关为 192.168.1.1。
打开上位机软件 Livox Viewer2 进入主界面。 Livox Viewer2 主界面由工具栏、设备管理器和点云显示界面组成。
1680845097050-729f17c4-e22a-48d9-b8bb-0ff35bef1c78.png

设备成功连接后，点击工具栏中 settings 按钮，可打开设备的参数设置界面，查看当前 Livox 设备的基本状态以及对其参数进行更改
1708428774412-1880c8d7-4b95-49af-aa92-6b8fdd7546e9.png 

将激光 Lidar IP 设置成 192.168.192.XXX 网段内的 ip，Gateway Address 改为 192.168.192.1 。点击 Confirm 按钮确认配置。

## Roboshop 配置方法（避障配置）
在左侧模型文件中点击 Camera，在右侧 brand 下拉框中选 DJI-mid360-tcp ，
1680846314851-01c2c74c-5d09-479c-abd4-2636ba9a49b8.png

ip 和 port 端口号填写上一步设置相机内参时相同的 IP 和端口号；
上面部分的相机外参，后续会开放自动标定功能，目前需要自己根据机械安装尺寸填写；
在 RBK 3.4.5 版本中建议安装姿态为 M12 接口朝上安装（如下图），并勾选参数“isUpside”；
## image.png

在 RBK 3.4.6 及以上版本中，可以任意姿态安装，并勾选参数“isUpside”；
FOV 配置：目前支持 mid360 配置多个 Fov，其中包含水平方向和垂直方向的视野范围，可以根据上面示意图中 mid360 的覆盖范围进行配置，其中 RBK 使用的坐标系与 mid-360 内部的一致，水平角度的FOV的0°为M12插口位置，符合右手定则，逆时针为正方向。可在 Livox 提供的上位机中，使用它的设置工具进行设置，测试 FOV 设置，然后实时查看效果作为参考。注意：测试完成后需要恢复 mid-360的设置，避免出现意想不到的情况。
注意：相机作为避障使用，onlyForPalletDetection 应不勾选。
## RBK 3.4.6+
## Q107qw6Fh2.jpg

RBK3.4.6 之后的 mid-360 在 roboshop 上的配置界面如上图所示。相机配置参数如下：
maxLength : 最远成像距离，超过该距离的相机数据会被截断
### horizontalStartAngle ： 水平起始角度
### horizontalEndAngle   ：水平结束角度
verticalStartAngle      ： 垂直起始角度
verticalEndAngle       ： 垂直结束角度
## Roboshop 配置方法（导航配置）
## 模型配置
img_v3_02io_9c78cc2c-82b3-49e4-a1ee-a53488c995cg.jpg

在左侧模型文件中点击 Camera，在右侧 brand 下拉框中选 DJI-mid360-tcp
ip 和 port 端口号填写上一步设置相机内参时相同的 IP 和端口号
在完成激光上位机配置后，在roboshop模型中，需要将“useForLocalization”勾选
### 下面部分的相机外参，需要自己根据机械安装尺寸填写
## image.png

如安装姿态为 M12 接口朝上安装（如上图），并勾选参数“isUpside”
## 参数配置
img_v3_02io_08cf2d6b-618a-4de5-8ee7-aa1149c1da4g.jpg

配置完成对应模型后，需要将以上框选参数配置中对应参数进行更改
## 建图配置
img_v3_02io_54b87689-0a7a-4d02-9a7e-c7709e107fdg.jpg

## image.png

打开3D建图；选择3D在线建图，然后选择特征建图，点击确认后，运行车辆进行建图
## image.png

建图完成后，需要绘制“定位配置区域”将之前扫出的点云都框选在内，并将对应参数“use Mid360For3DLoc”开启
## 标定配置
img_v3_02io_349eba27-d723-4b57-9295-8fbd96132b5g.jpg

在标定机器人前，需要手动重定位，在置信度高于80以上的环境进行标定测试
### 点击上方工具栏其他；选择机器人标定（基于RBK版本标定）
### 选择对应相机，点击开始标定，或者重新标定即可
## 使用注意事项
## 1、相机无法检测到高度低于 30mm 的物体；
### 2、RBK 最低支持版本：SRC3000&SRC2000&SRC880&SRC800 RBK3.4.5.22，建议使用 3.4.6 及以上版本；
### 4、相机能够正常避障的最小尺寸验证总结如下
使用40mm钢管测试，避障距离如下，在0.2m/s、0.5m/s、0.8m/s速度下mid-360可以有效识别到，但在
## 速度1m/s 时无法避障

## 速度

### 0.2m/s

### 0.5m/s

### 0.8m/s

## 1m/s

## 1

## 85cm

## 84cm

## 61cm

## 避障失败

## 2

## 90cm

## 81cm

## 56cm

## 避障失败

## 3

## 82cm

## 83cm

## 59cm

## 避障失败

## 4

## 87cm

## 73cm

## 70cm

## 避障失败

## 5

## 89cm

## 69cm

## 70cm

## 避障失败

## image.png
## 尺寸为40mm的钢管

使用80mm钢管测试，避障距离如下，直径提高到80mm后，在0.2m/s、0.5m/s、0.8m/s速度下mid-360可以有效识别到、1m/s速度下mid-360大概率能识别，在测试中1m/s速度，5次测试中，避障失败一次。

## 速度

### 0.2m/s

### 0.5m/s

### 0.8m/s

## 1m/s

## 1

## 94cm

## 91cm

## 89cm

## 70cm

## 2

## 94cm

## 91cm

## 64cm

## 77cm

## 3

## 93cm

## 90cm

## 54cm

## 59cm

## 4

## 95cm

## 78cm

## 58cm

避障失败，在被测物品前50cm左右停止3s左右后继续启动前进撞上

## 5

## 94cm

## 92cm

## 85cm

## 46cm

## image.png
## 尺寸为80mm的钢管
