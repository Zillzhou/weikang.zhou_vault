# 清能德创驱动器

## 清能德创驱动器

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 语雀迁移飞书

## 使用中

## 一、适用范围

本技术规范适用于公司使用清能德创驱动器进行自动化改造的研发、生产、调试的技术人员。
### 二、调试资源

## USB-485 转换器

1652601140296-18195c39-0520-422c-9ecc-cbb949496758.png

## 驱动器相关手册：

[驱动器手册] https://seer-group.coding.net/s/d08d5fcf-e1d6-4b0d-ad02-2d52db7e4dd0

驱动器配置软件 DriveStarterS V1.0.1.1_Test：

[ 驱动器配置软件] https://seer-group.coding.net/s/47aaf622-b164-4585-bf99-cc15d35150d7
### 三、改造和安装

### 3.1 类 Kiva 顶升部分 DI 使用规范

### 3.1.1 接线说明

## 顶升部分 DI 使用规范

## 序号

## DI

## 功能

## SRC 线号

## 1

## DI2

## 顶升下限位开关信号

## T23  6 号线

## 2

## DI5

## 顶升上限位开关信号

## T23  7 号线

## 3

## DI6

## 旋转零位信号

## T23  5 号线
注1:在顶升车上这三个 DI 不能作为其他其他用途；

注2：确保这三个传感器的均为 NPN 型，发出的信号能被 SRC 核心控制器检测到。

### 3.2 进行改造（底盘驱动器部分）

### 3.2.1 行走电机驱动器安装方式

## 1.驱动器需要与车体进行可靠固定，检查驱动器与对应电机的三相线、编码器线路连接正确；

2.当机器人安装有多个驱动器(数量 ≥2)时，所有从站的 CAN_L,CAN_H 引脚直接相连即可，尽量采用串联方式接线，如图 4.4.1 所示；若驱动器仅提供一个通讯接口，无法完成驱动器的 can 线串联时，则将所有驱动器 can 线引出后把所有 can_H 压入同一德驰插筒连接器，将所有 can_L 压入同一德驰插筒连接器，接入德驰 DT06-2S 公头，最后与 TE35 中的 32、33 号线（can1)相连.

由于部分驱动器没有提供级联接口，只能通过从总线上接引线的的方式来串联，这里引线的长度需小于 10CM.

注：在改造过程中若由于驱动器连接所需要的线束数量不足，无法实现在驱动器端进行快速串联，可采用图 3.4.2 所示连接方式，但不推荐。
e86a36f8-005d-4b41-9406-19cd061dd8ac.png

## 图 3.4.1  图3.4.2

为保证 can 通讯质量，需要在距离核心控制器最远的驱动器上或总线末端安装终端电阻（阻值一般是 120ohm).（注：客户可在购买驱动器时向驱动器厂商提出购买配套终端电阻）

### 3.CAN 终端电阻是否正确打开的检测方法：

关机断电，断开驱动器和控制器的 CAN 连接线（如图 4.4.1 中 Driver4 和控制器之间的位置），使用万用表电阻档测量驱动器侧的 CAN 总线上 CAN_L、CAN_H 之间电阻，电阻值为 120Ω 则正确，如图 4.4.3 所示。电阻值明显小于120Ω（如 60Ω),则说明至少有两个驱动器打开的终端电阻。

断开图 4.4.1 中 Driver1 和 Driver2 之间的连接线，使用万用表电阻档测量 Driver1 侧的 CAN 总线上 CAN_L、CAN_H 之间电阻，电阻值为 120Ω 则正确，如图 4.4.3 所示。如果电阻值明显大于 120Ω（如几 KΩ),则说明终端电阻打开的位置不在 CAN 总线末端，需要调整。
39b2e524-4436-4daf-970a-53a9bef40f52.png

## 图3.4.3

4.清能德创驱动器急停配置如 图 3.4.4 所示，将所有驱动器的 公共端并联后接入急停输出 1+（TE35 4 号线），将所有驱动器的 STO 端并联后接入急停输出 1-（TE35 5 号线）。（任意一路 STO 触发都表示急停触发，所以只接一路 STO 也可以）
325f4226-4c87-4973-be42-083de8fd1b2b.png

## 图3.4.4  图 3.4.5

注：TE35 的 4 号和 5 号线标无正负之分，为一组干触点，在实际接线中可以不用区分其正负。

### 四、驱动器参数配置
## 工具：
## USB-485 转换器
c5f2417a-b73c-4e8a-bb64-967540ba935d.png

## 驱动器相关手册：
## [ 驱动器手册]
驱动器配置软件 DriveStarterS V1.0.1.1_Test：
## [驱动器配置软件]

使用 USB-485 转换器连接电脑和驱动器，打开驱动器配置软件，正确选择端口号，点击快速连接设备
732fe896-06b7-45a9-8729-c708cec19642.png

## 控制模式选择 canopen 模式
972d09ec-52b4-4c7e-8e1f-8d552c033645.png

选择【参数】---【伺服参数】，按照使用需求修改驱动器 ID 和波特率，点击【设保存值】保存参数
cd45b70a-4b11-40a4-acc8-ec344ff1c397.png

## 修改参数后给 驱动器重上电 参数生效
### 驱动器终端电阻必须接上 ，否则 can 无法通讯
### 五、机器人模型配置说明
### 根据电机及减速实际情况配置行走电机参数：
注：这些参数需根据驱动器及选用电机及减速机的实际进行填写；
371c1778-1621-4fb1-b00f-8b16a2ca3f6f.png

## 图 5.1

注：减速比、编码器线数、电机最大转速、驱动器品牌需要根据选用的实际填写。

### 六、驱动器的功能检测

## 1.在整车组装完成未安装外壳前，请再检查一遍接线确保接线正确。

2.将车体加高，使轮子离地。开启机器人，使用网线连接机器人。使用 Roboshop 软件操作机器人让轮子转起来。 使用 CanScope 夹在 CAN 总线上检测 CAN 报文至少 1 小时，CAN 报文无错误。

### 3.让车体着地，使用 Roboshop 软件操作机器人做运动动作:向前，向后，向左，向右运动。

4.未拍急停按钮前，推动机器人，无法推动（电机使能），检查 Roboshop 中机器人状态处于“未急停”“驱动器未急停”，如图 6.1 所示；所示拍下急停按钮后，再次推动机器人，可以推动（电机使能释放），检查 Roboshop 中机器人状态处于“已急停”，“驱动器已急停”，如图 6.2 所示。
2f6e3255-9321-4e47-8fbc-1a438ee8d619.png

## 图 6.1
29bce4ca-0400-4370-adea-228e929776b4.png

## 图 6.2
### 5.任务链运动老化测试 24H，查看 Robokit Log 无错误报警。

### 七、附录

### 7.1 致远CAN Scope使用方法

## 1.软件安装--安装 CAN Scope 配套软件 CANScope。（软件及使用手册请联系致远厂商售后）.

2.硬件连接--参考 CAN Scope 使用手册接好电源，USB 调试线，插上 CAN Port 板,将 CAN_H 接到 SRC2000 外接线束 TE35 33 号线上，将 CAN_L 接到 SRC2000 外接线束 TE35 32 号线上 USB 调试线插在电脑上。

3.打开软件 CANScope，选择【Port板】，取消【启用终端电阻】，选择【报文】，配置【波特率】为 250Kbps,取消【总线应答】，选择【开启】，CAN 报文实时如图 7.1.1 所示：
d2d9719f-f403-44e4-9850-3da4ca4ae628.png

## 图 7.1.1

### 4.选择【状态】【错误】，检查是否有错误报文。如图 7.1.2 所示：
bdfdec97-e814-4103-b428-f22d249d516b.png

## 图 7.1.2

### 7.2 USB CAN 卡使用方法

## 1.软件安装—安装软件 USB_CAN Tool（软件及使用手册请联系 CAN卡 厂商售后）.

2.硬件连接—准备 USB CAN 卡和连接线，将连接线 CAN_H 接到 SRC2000 外接线束 TE35 33 号线上，将连接线 CAN_L 接到 SRC2000 外接线束 TE35 32 号线上。如图 7.2.1 所示：
e1b2464e-56d3-4fdb-9b74-189406f3fb73.png

## 图 7.2.1

3.打开 USB CAN tool ,选择【设备操作（O）】【启动设备（S）】,确认 CAN 参数，【波特率】为 250Kbps,选择【CAN通道号】为通道1,点击【确认】。如图 7.2.2 所示：
9a9c91b6-5010-453c-975c-52c40d420f66.png

## 图 7.2.2

### 4.选择【显示（V）】，取消选择【合并相同 ID 数据(M)】，CAN 报文如图 7.2.3 所示。
773b8634-aca6-4ee8-8fa4-edecacc12b31.png

## 图 7.2.3

### 7.3 udpconsole 使用方法

udpConsole 是我司工程师用于调试 bug 开发的小工具，可以检查到固件上报的错误信息。

## 1.打开 udpconsole 工具前需用网线确保电脑与机器人的物理连接。

### 2.打开 udpconsole 进行驱动器功能测试，时刻检查 udpconsole 显示内容。

### 驱动器通讯过程中出现错误帧如图 7.3.1 所示：
60a0afc8-d9ec-4ef4-801b-9d8728fe3baf.png

## 图 7.3.1

### 八、驱动器常见错误码
fed41f28-a505-4c15-935d-6843c494f1d9.png

9568483f-aa12-44ff-82fd-215f8d61e4d7.png

4cf71a2c-d701-41cf-b36a-cf6fc4eda4a9.png

### 九、 附录
### 9.1 驱动器接线图
beccd50c-e3a1-462b-be6f-2be05fbc7164.png

e39b25dc-0bf9-4bcb-9632-4cf765b3d856.png
