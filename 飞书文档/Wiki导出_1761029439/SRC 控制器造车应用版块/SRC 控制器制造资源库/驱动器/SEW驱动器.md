# SEW驱动器

## SEW驱动器

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 语雀迁移至飞书

## 使用中

## 版本
### SRC2000，固件版本需要高于2.1.50
## SRC800，暂不支持
## 资料
## CAN通信协议

CANopen-Functions_MDX-B_EN.pdf
操作指导书 操作手册MOVIDRIVE MDX60B/61B （中文操作手册）
产品手册  系统手册MOVIDRIVE® MDX60B/61B （英文系统手册）
MOVIDRIVE® MDX61B Extended Positioning via Bus Application （驱动器定位控制英文手册）
## 电气
### 硬件急停方式配置（Inhibit模式，STO模式均可）
## Inhibit模式
端子X13：1， 定义为“/控制器禁止”，不可更改；1（DC24V）为解除禁止，驱动器能够正常工作；0（DC0V）为禁止，驱动器处于禁止状态，不能正常工作； 
1684734874935-33e201e1-2186-43a7-ad32-f35321265289.png

## STO模式
端子X17，出厂状态下，X17：1和X17：3短接，X17：2和X17：4短接；如需要以STO的模式停止，则需要拆除出厂状态下的短接线，给X17：3(-)和X17：4(+)接入安全DC24输入，并控制该组24V的通断（断开状态激活STO，接通状态解除STO）。端子功能如下： 
1684734917955-55634fe3-13a1-4630-8e39-a75c0bd674fc.png

## 转向驱动器，CW、CCW限位安装
以下为驱动器X13的默认端子定义；驱动器限位默认的端子为X13：5 和X13：6，为常闭点，正常状态为“1”；端子状态从“1”变“0”时，触发限位报警。 
1684734954223-c4fdf9b3-a9de-4f0d-aa58-bdf905aadb66.png

## CAN通信的接口定义
端子X12 为CANopen通讯的硬件接口，接线是务必屏蔽双绞线，端子功能如下； 
1684734967044-66ba788d-432f-425c-9164-072ab9f5467b.png

CANopen通讯线要求2x2屏蔽双绞线；线径0.25—0.75mm²；电缆阻抗120Ω（1MHz时）；电缆容抗≤40pF/m at 1Hkz; GND 为2线连接； 
1684734978310-685db5d3-4ab2-424a-88c9-4cbf205c1164.png

## 终端电阻的配置方法
驱动器上的S12为终端电阻拨码开关（DIP switch），处于网络终端的驱动器的S12拨码要拨到“ON”的状态；
1684735000828-4123e508-26bb-413f-9c3f-bac5c4399f6f.png

## 调试通讯口
驱动器上XT为调试接口，可以使用SEW标准的USM21A （包含转接盒及[1]/[2]两根电缆）调试线通过软件连接该驱动器 
1684735019446-8a84c30c-aeb7-4f3e-9efc-9f7b691bb0fd.png

## 500V怎么接
驱动器X4端子为DC500V接线端子，-Uz/+ Uz，连接DC500V的“负”和“正”端子，功能如下：
1684735034278-d17dda22-a088-4061-a1fc-c3e27d8dfe16.png

## 驱动器配置
## 看门狗配置
驱动器参数P883为CANopen 通讯超时时间设置，单位S。 
1684735130179-38999adc-5f8f-4103-ad8f-b9676bc9e5cc.png

## CAN波特率配置
驱动器参数P884 为波特率设置，支持1M/500k/250k/125k 4种； 
1684735157015-7aaa6b64-1fe8-4626-8c24-f3801d52b172.png

## CAN地址，节点配置
## 驱动器参数P886为通讯地址设置
1684735185877-46c68f43-cac7-4528-9a3f-4ab280f74f63.png

## 电机参数整定
## 联系SEW
## 特殊参数
## 以下参数，需要按照要求进行设置：
### P880为通讯协议，设置为CANopen
1684735233710-66e9f55d-27c5-4051-9810-6be87b044836.png

参数P100，设置为SBus 1/fixed setpoint 参数P101，设置为SBus 1 
1684735258316-1cb2e9bf-e4a8-4486-9618-c0007162d5fb.png

P903=4 为反限位寻零，P901（碰限位之前）/P902（碰限位之后）设置寻零运行时的速度（单位rpm）； 
1684735274390-aa44ad96-a5ed-4808-9c5d-84e4a5317920.png

## P730 设置为ON
1684735301342-17c13566-5752-4cb8-b2ed-51e705c5817e.png

## 绝对值编码器，人工标零（方法）
在X13端子上接好正负限位的前提下，通过PO1发送寻零指令，驱动器即按照预设的模式开始寻零。寻零过程中，驱动器数码管和PI1状态字均显示“C”，寻零完成后状态变为“A”，同时状态字上会有对应的标志位显示。寻零过程中碰到对应的限位，驱动器不会报警。
具体的寻零过程为：发送寻零指令后，驱动器控制电机以PP901设置的速度反向运行；碰到反向限位（1->0）后，再以P902设置的速度正向运行；当脱离反向相位（0->1）时，电机再继续正向运行1圈后停止，此时编码器脉冲数值为4096（电机一圈对应4096个脉冲）；
## firmware版本
驱动器的firmware要求Firmware .17 及以上；
## 驱动型号
驱动器型号为Movidrive MDX61Bxxxx-503-4-0T（xxxx代表不同的功率），整个系列的驱动器都适用该套协议。
## 模型配置
## canID配置
在模型文件中，对应添加的电机中修改canID改成和驱动器中配置节点一致
1682401843881-e68fa165-982b-4164-ae1a-582f60fa824b.png

## 转向电机标零方式
如果是增量式编码器的电机作为转向电机，则需要配置驱动器参考模式为CCW限位标零模式，将resetMode改成resetByDriver方式
1682401835495-4d09d61d-5d2d-4e12-8637-b0da965727bf.png

如果是绝对值编码器的电机作为转向电机，则转向电机转到车体对应正前方后，在驱动器中使用参考模式，设置当前编码器为0位，将resetMode改成None 
1682402081747-5c300c42-f164-481f-9d97-9e712653fd9c.png

## 编码器配置
使用SEW驱动器，无论电机编码器分辨率如何，电机转一圈输出的脉冲数均为4096，则encoderLine统一/4后填入
1682401821795-0cc153d0-4c88-4507-a2af-ad7ae22de5d4.png

## 驱动器品牌
1682401784356-0a8424f4-6b5c-441e-9bf0-72bbcb3d4d0d.png

## 错误码
## 手册也可以，错误码解释、处理方法
## FAQ
当拍下急停按钮时，电机急停效果为去使能，表现为可以外力转动（有抱闸时转不动）
增量式编码器的电机使用CCW寻零方式，当电机转动，到达CCW限位触发，再反转离开CCW限位至下降沿触发后记录当前位置为0位，然后会再多走一圈。
只有转向电机使用增量式编码器的情况下，才使用标零，其余电机类型或绝对值编码器均不进行标零或使用SEW上位机进行人工标零。
## 电流是有功电流，具体含义可以咨询SEW
1682402887425-070d93bc-da21-452d-96f2-81c2d16f3abf.png
