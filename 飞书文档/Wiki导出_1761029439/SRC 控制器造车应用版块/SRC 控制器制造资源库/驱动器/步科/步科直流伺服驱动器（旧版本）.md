# 步科直流伺服驱动器（旧版本）

## 步科直流伺服驱动器（旧版本）

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 语雀迁移至飞书

## 使用中

## 一、适用范围
本文适用于步科驱动器调试与配置。
## 二 、调试资源

## 驱动器手册：
### 📎Kinco 低压伺服驱动器使用手册.pdf

## 调试软件：
KincoServoPlus SetupV1.1.3(build210203).zip

### 三、接线与改造
### 3.1 驱动器抱闸
根据驱动器手册判断驱动器的抱闸接法，本文提供两种接法如图 2，更多请在驱动器说明文档中查阅。

1677662239278-0b9ce481-6da1-4608-b9f1-1d5948492f13.png
## 图1

1677662254472-57282009-dc06-42a7-b0f4-5a0bbfbd955d.png
## 图2

### 3.2 进行改造（底盘驱动器部分）
驱动器需要与车体进行可靠固定，检查驱动器与对应电机的三相线、编码器线路连接正确
1677662271422-1f093a44-aa7e-4ed9-985a-d5d3a918dac2.png
## 图3.2.1

当机器人安装有多个驱动器(数量 ≥2)时，所有从站的 CAN_L , CAN_H 引脚直接相连即可，采用串联方式接线
1677662286030-33ee0c06-b8e0-4d00-8769-9b903b08defa.png
## 图3.2.2

将 Driver4 最终引出的 can_H 压入一个德驰插筒连接器，同理将 can_L 压入一个德驰插筒连接器，接入德驰 DT06-2S 公头。最后与 T35 中的 32,33 号线 （can1） 相连；(注意：各型号驱动器引脚定义详见附录一)
## 注：
## 各型号驱动器引脚定义详见附录一
为保证 CAN 总线通讯质量，请将 CAN_GND 接到 DCDC 输出端负极或者控制器上的接地，驱动器端总线通讯接口（X1)如下图所示。
1677662300131-f6174f0f-e9e9-42b6-9dea-646b98d81482.png
## 图3.2.3

为保证 can 通讯质量，需要将距离核心控制器最远的驱动器上的 120Ω 终端电阻打开，如上图 4 中将 Driver1 驱动器上终端电阻通过拨盘打开；其他 Driver2,3,4 的终端电阻关闭，打开时终端电阻开关如图 6 所示；
1677662313606-ebd67426-0647-4b8e-a115-3f3a0a34a0d5.png
## 图3.2.4

## 终端电阻是否正确打开的检测方法：
关机断电，断开驱动器和控制器的 CAN 连接线（如图 4 中 Driver4 和控制器之间的位置），使用万用表电阻档测量驱动器侧的 CAN 总线上 CAN_L,CAN_H 之间电阻，电阻值为 120Ω 则正确，如图7 所示。电阻值明显小于 120Ω （如 60Ω），则说明至少有两个驱动器打开的终端电阻。
断开图 4 中 Driver1 和 Driver2 之间的连接线，使用万用表电阻档测量 Driver1 侧的 CAN 总线上 CAN_L , CAN_H 之间电阻，电阻值为 120Ω 则正确，如图7所示。如果电阻值明显大于 120Ω （如几 KΩ)，则说明终端电阻打开的位置不在 CAN 总线末端，需要调整。
1677662327695-54f0d151-e675-4dbe-89ed-3646ea04c780.png
## 图3.2.5

公司适配的核心国产驱动器采用控制电机是否使能的方式来实现急停与否的功能。电机是否使能可以通过控制驱动器上相应 IO 口电平高低的方式来实现；
Kinco 驱动器如图8 所示，将所有驱动器的 COMI 并联后接入 DCDC 24V+ 输出；将所有驱动器 IN1 并联后连接 SRC2000 急停输出 1+ （TE354 号线），将另一根急停输出 1- （TE355 号线）连接 DCDC  24V- 输出。
1677662347096-1b05989e-6069-41b3-9ab2-11f00f6113ab.png
## 图3.2.6

### 四、驱动器配置
该配置方法适用所有CANopen协议的步科伺服驱动器。
如果电机铭牌的的 Motor Code 不是数字，可以参照 电机参数cdi文件使用方法 进行配置。
### 4.1 行走驱动器配置方法（速度模式）
软件的连接、电机参数的设定、驱动器参数初始化；
Kincoservo+ 快捷方式打开 Kincoservo+ ,选择“通信 C”“通信设置”打开通信设置，点击“刷新”更新通讯串口，点击“打开”连接驱动器
1677662365584-042fad46-ad2f-4a9f-890b-497d4355e385.png
## 图4.1.1

【设置电机型号】设置电机型号，选择“电机 M”--“电机配置”打开电机配置，在“电机型号”的 Value 栏设置电机型号
注意电机型号若在铭牌上找不到，可以联系 Kinco 的售后获得。
1677662380129-0e06e93f-6170-4a8e-8023-43278609ea66.png
## 图4.1.2

【初始化驱动器参数】选择“驱动器 D”“初始化/保存/重启”打开操作界面，依次选择“存储电机参数”--“初始化控制参数”--“存储控制参数”--“重启”。
1677662396124-e03cfa4b-d818-46f1-86f2-2f78a6ca96da.png
## 图4.1.3

选择“驱动器 D”“ ECAN Settings ”“其他”，选择“节点保护时间”将驱动器看门狗保护时间更改为 100 ，选择“节点保护时间系数”将驱动器看门狗保护时间系数更改为 3,选择“ CAN 波特率”将驱动器 CAN 波特率更改为 250KHz ,选择“通讯中断模式”将驱动器中断模式更改为 1。如图 4.1.4 所示：
1677662413013-b273e2dc-7321-4068-af29-65028a4cec0b.png
## 图4.1.4

注：调试窗口 8 中的 25 代表 CAN 波特率 250KHz。
选择“驱动器 D”“数字 IO 设置”，清空所有数字输入 DIN 设置。
注：机器人开机后对驱动器数字输入 DIN 先做一遍全部清空的操作，所以请勿设置其他 DIN 功能！用户在此设置的 DIN 功能届时无效。
1677662428437-32521b8a-0afc-41ac-a344-aefe504be8af.png
## 图4.1.5

选择“驱动器 D““基本操作”,“工作模式”将驱动器工作模式更改为“速度模式”，配置方式如图 4.1.6 所示：
1677662443944-204de3db-b989-41ea-820d-bd0a432afaf0.png
## 图4.1.6

注：配置窗口 22 行中的 -3 即表示速度模式，配置成功后第 0 行有效工作模式将也变为 -3
## 增加驱动器清错功能，如图所示：
1677662460823-56331537-9abb-44c9-89a6-8841990f301d.png
## 图4.1.7

## 注：
【 复位故障】功能目前仅速度模式支持，且需配置在 DIN4中 ，不可复用；
若驱动器硬件版本无 DIN4，请检查 DIN4 的实际输入是否为低电平（按钮灰色），若是低电平，可以配置使用【复位故障】功能，若是高电平，不支持。
由于步科驱动器不同版本 IO 电平处理不同，故此处需人工验证判断是否可用
选择【驱动器 D】【驱动器配置】,【驱动器编号】分别给驱动器给予不同的 can ID ,一般双轮差动机器人，左边的驱动器编号为 ID 1 ,右侧驱动器编号为 ID 2 。
1677662481898-1ecc832a-9e09-4513-8f78-e77ba889346e.png
## 图4.1.8

## 注 :
需要确定驱动器是否带拨码键盘配置 ID ，如果有，那么软件配置 不一定有效 ，请根据驱动器上的指示（如下图） 直接通过拨码键盘配置，修改设备站号即修改驱动器的 CAN ID 。
1677662496683-02919697-4fcf-439a-a596-35e8a740293d.png

1677662513263-ef4fa316-a75b-416c-b175-b495b96646fe.png
## 图4.1.9

## SW3

## SW2

## SW1

## 二进制码

## CAN(node) ID

## OFF

## OFF

## OFF

## 000

## EEPROM(软件配置有效）

## OFF

## OFF

## ON

## 001

## 1

## OFF

## ON

## OFF

## 010

## 2

## OFF

## ON

## ON

## 011

## 3

## ON

## OFF

## OFF

## 100

## 4

## ON

## OFF

## ON

## 101

## 5

## ON

## ON

## OFF

## 110

## 6

## ON

## ON

## ON

## 111

## 7
选择“驱动器 D""对象字典","开启 Keba PLC 模式"将驱动器的 Keba PLC 模式调整至打开状态， Value 配置为“ 1 ”。
1677662528213-0e7909aa-1727-45ef-87f8-3c7d16f7fa32.png
## 图4.1.10

关闭驱动器上的 PDO 配置，通过“驱动器 D"-->" ECAN 配置"-->" TPDO "/" RPDO ",将 TPDO1--TPDO8 映射组改成 0 ， RPDO1--RPDO8 映射组改成 0 。
1677662544610-14c14729-eeaa-49c4-9844-a1bb93e6f020.png
## 图4.1.11

下载配置参数到驱动器，选择“驱动器 D”“初始化/保存/重启”打开操作界面，依次选择“存储控制参数“”存储电机参数“”重启”。
1677662565229-212f7344-e886-4c53-8a20-7e62e50df766.png
## 图4.1.12

通过 roboshop 手动控制，是否正常运动，若不正常请检查以上步骤；若正常请进行下步：通过“驱动器 D"-->"控制环"-->"速度环",逐渐放大速度环比例增益（建议最终值在300-400，每次设置后进行第9步保存参数等）至电机静止或外力推动时发出较大电流声后，将该值降低些许至不发出电流声即可。
1677662590166-403dc24d-5501-4e8f-9a76-13c7637caeb3.png
## 图4.1.13

驱动器配置完毕，关闭串口连接，关闭配置软件 Kincoservo+ 。
### 4.2 舵轮配置方法 （位置模式）
### 注意 ：急停线接 IN1，功能设置为【紧急停止】

按照4.1章节，进行步骤 1，完成软件的连接、电机参数的设定、驱动器参数初始化；
按照4.1章节，进行步骤 2 ，步骤6完成驱动器“看门狗”，波特率，驱动器 ID 的设置；
## 【驱动器 I/O】
注：保证模型文件对应的驱动器配成 steer ，否则会出现 I/O 烧写不进去的情况
1677662613045-49e0b7dc-b0da-434c-89ae-67996c115861.png
## 图4.2.1

## 限位开关
第一步判断限位开关的线序，一般传感器的线序为：棕正，蓝负，黑信号。 此处线序需要向厂家确认。
第二步判断舵机的零位开关，限位开关是 NPN 还是 PNP。接线图参考 图8， 下面提到不同类型传感器的两种接法：
若是 NPN 型（低电平触发） ：将所有驱动器的 COMI 并联后接入 DCDC 24V+ 输出；将所有驱动器 IN1 并联后连接 SRC2000 急停输出 1+(TE35 4 号线），将另一根急停输出 1-（TE35 5 号线）连接 DCDC 24V- 输出；
若是 PNP 型（高电平触发） ：将所有驱动器的 COMI 并联后接入DCDC 24V- 输出；将所有驱动器 IN1 并联后连接 SRC2000 急停输出 1+(TE35 4 号线），将另一根急停输出 1-（TE35 5 号线）连接 DCDC 24V+ 输出。
IN2 接零位开关 ，如果使用了限位开关，接入 IN3，（IN3 功能配置为 正限位 还是 负限位 根据实际使用情况选择配置）
1677662631048-d4955f58-1ae5-49b8-97b0-b7372d82538c.png
## 图4.2.2

1677662644921-021e307e-4b98-4023-9dd9-9df23abefeaf.png
## 图4.2.3

选择找零模式（原点模式），根据有无限位开关零位开关选择。
1677662658969-367362a6-87ae-4680-9118-a830d9b1491d.png
## 图4.2.4

1677662674773-d6f4e488-0ea9-4aa4-b01b-569f4d21eaff.png
## 图4.2.5

### 修改找零速度，根据使用需求设置找零速度，注意勿超过额定转速
1677662691561-6bf12702-7611-4c5e-adbe-0ee1c01fbda7.png
## 图4.2.6

修改找零方向，根据找零需求选择初始找零方向，修改为 1 即可反向，默认值是 0；
1677662714581-87f07f9a-b0af-4888-9b27-f8c4e679a5d8.png
## 图4.2.7

修改位置模式舵机执行舵角的速度，按照实际使用情况调整加减速度大小。
### 注：此处修改速度无效，机器人开机会下发默认速度
1677662830145-35da4cce-a070-4318-bb45-768c8000fb3b.png
## 图4.2.8

## 屏蔽“实际误差超过允许”报错
## （1）打开驱动器D-》控制环-》位置环
### （2）将 最大跟随误差 改成 655360
1684205368186-aa7d1531-484e-4707-a5da-288191d2af43.png
## 图4.2.9

进行步骤 6 - 8 完成驱动器设置；
如果找零完成后零位不满足使用要求，模型文件中按照需求设置舵角骗置，正确设置最大最小舵角。
1677662846493-929d3f8b-cdef-42b8-82cb-52ea86dbaa13.png
## 图4.2.10

【 resetMode 】此处选择【 resetByDriver 】 
1677662863550-3e527025-9115-431a-937d-a0d6c7702e9f.png
## 图4.2.11

位置速度配置如图：设置值为 30 ，默认为 -1 .
1677662878507-dc548dd5-166e-4897-9086-bab0c45918f9.png 
## 图4.2.12

### 4.3 舵轮配置方法 （位置模式）[kinco绝对值编码器方案]
说明：此配置方法使用于kinco为转向电机且转向电机编码器为绝对值编码器方案。

### 急停线接 IN1，功能设置为【紧急停止】

进行步骤 1，完成软件的连接、电机参数的设定、驱动器参数初始化；【参照 4.1 速度模式 1 配置】
进行步骤 2，完成驱动器“看门狗”，波特率，驱动器 ID 的设置；【参照 4.1 速度模式 2 配置】
使用绝对值编码器方案作为舵轮，不需要使用限位信息，故相关限位的信息可以不用配置
## 查看故障
## 电机存储控制参数
## 点击重启，就会看到驱动器有故障显示
1677662897589-86c3c3b2-731a-4fcb-82b4-45edb5687911.png 
## 图4.3.1

## 打开故障显示
## 点击驱动器D
## 选择故障显示
查看故障状态，发现编码器UVW故障或内部故障前面的指示灯为红色。
## 如下图 4.3.2 所示：
1677662914590-3981bcab-9e79-4eb7-a5bf-340e74d6db00.png
## 图4.3.2

## 处理故障显示
## 点击驱动器D，基本操作
## 将通讯编码器数据复1 改为 10
## 点击回车
## 如下图 4.3.3所示：
1677662931082-107525f6-96b4-4a56-a990-e94d03571ec7.png
## 图4.3.3

## 点击存储控制参数
## 点击重启，会看到错误消失
## 如下图4.3.4所示：
1677662948565-ddb5087b-b9ee-4fd7-a202-cc70d5df46a7.png
## 图4.3.4

## 设置原点模式
## 打开驱动器D
## 打开控制模式
## 打开原点模式
## 设置原点模式35
## 如下图4.3.5 所示：
1677662965797-cd7e2bea-caf0-4052-ad9d-dcc5f5ed66dd.png
## 图4.3.5

## 设置上电找原点2
## 存储控制参数
## 如下图4.3.6所示：
1677662981160-0491770b-30da-470d-b64f-95ed2b3f58df.png
## 图4.3.6

## 修改梯形加速度和梯形减速度
## 将梯形加速度修改成 280rps/s
## 将梯形减速度修改成 280rps/s
## 如下图4.3.7所示：
1677663000919-b74043d4-564b-4c96-bb3c-409b2ce4d632.png
## 图4.3.7

注意：如果设置完成之后，操作舵轮转向时候，发现转向机构声音很大或者出现过流的问题，请将梯形加速度、梯形减速度调整到280rps/s，如果发现调整到280rps/s，仍然会出现这种抖动和异响的情况，请继续减小梯形加速度和梯形减速度（最小应该为200） 
此时应该注意，梯形加速度和减速度过小会导致转向电机转速过慢，影响到位精度
## 标零操作
选择工作模式3，写入控制字 103f ，给定一个目标速度，建议是一个比较小的速度，例如 50rpm ，会看到舵轮在慢慢的转动。
### 肉眼确定这是一个机械零位（可能有偏差），将目标速度设为0
## 注：要找一个机械参照点，来确定零位
## 如下图4.3.8：
1677663031029-1b20464c-275a-440d-b1e2-cc1a2a4bc8d0.png
## 图4.3.8

此时将工作模式改为6，伺服实际的位置就是0了。
## 调整0位位置
如果在步骤9中，实际零位位置相差较大，可以将目标速度设置为一个负速度，将舵轮转回去，继续（2）和（3）的操作，将标零的零位确定在机械零位上面
## 配置软限位正设置、软限位负设置
注意： 由于绝对值编码器电机的没有限位开关，所以电机可以旋转 360° ，如果我们要限制电机旋转的角度，就要配置软限位正设置、软限位负设置，当做限位来使用。
## 如何设置软限位的值？
明确需要配置的角度值 α 。
明确电机的编码器线数 encoderLine （模型文件中填的steer Motor的 编码器线数），明确整个机构的减速比 reductionRatio 。
配置的参数为： α / 360° * 4* encoderLine * reductionRatio 。
## 打开驱动器D
## 打开对象字典
1677663054282-8d8f4292-dae5-49f1-b14d-5d5374c76a18.png
## 图4.3.9

搜索软限位，找到软限位正设置，将需要配置的参数输入进去，点击 enter 键确认。
1677663069206-c344cadf-6d17-45c4-855c-1d2710431584.png
## 图4.3.10

找到软限位负设置，将需要配置的参数的相反数输入进去，点击 enter 键确认。
1677663087317-602744b3-cfc0-4843-b469-96de4d4a5ac9.png
## 图4.3.11

## 屏蔽“实际误差超过允许”报错
## （1）打开驱动器D-》控制环-》位置环
### （2）将 最大跟随误差 改成 655360
1684205368186-aa7d1531-484e-4707-a5da-288191d2af43.png
## 图4.3.12

## steer 模型文件的配置
注意：将模型文件中的【resetMode】 选择为【none】 如下图 4.3.13
1677663103586-a67d66c4-5355-4f5f-bf6c-69269d0b9478.png
## 图4.3.13

### 五、Model 文件配置说明
Roboshop 版本是 2.0.X（固件版本为 1.8.X 及以下），请参考机器人模型图 5.1 所示。Roboshop  版本是 2.1.X（固件版本为 1.9.X 及以上），请参考机器人模型图 5.2 所示。

## Key

## Description

## Value

## Unit

## x

## 驱动器安装的X坐标

## 根据实际安装位置填写

## m

## y

## 驱动器安装的Y坐标

## 根据实际安装位置填写

## m

## yaw

## 驱动器安装的朝向

## 根据实际安装位置填写

## 度

## canID

## 驱动器的的CANID

## 根据驱动器上位机配置决定

## maxRPM

## 驱动器最大转速

## 3000

## RPM

## encoderLine

## 编码器线数

## 根据实际情况填写

## canPort

## 驱动器使用的端口

## 根据实际情况填写

## brand

## 驱动器品牌

## Kinco-FD-CANOpen

## wheelRadius

## 轮半径

## 根据实际情况填写

## m

## reductionRatio

## 减速比

## 20

1677663118565-530685c5-3ee1-4ceb-8fb7-bb8704193e4e.png
## 图5.1 图5.2

注：减速比、编码器线数、电机最大转速、驱动器品牌需要根据选用的实际填写； 编码器线数可以通过驱动器调试软件查看电机编码器参数配置
### 5.1 encoderLine
### 增量式编码器填 2500 ，绝对值编码器填 16384
1677663132774-dd8c5a0e-5082-47d9-aeed-59afb825b2d0.png
## 图5.3

注：该条encoderLine配置说明，仅适用于步科驱动器，其他品牌不通用
### 5.2 currentFactor
电机电流系数配置方法， currentFactor配 1 / (2048 / Ipeak / 1.414);
其中驱动器峰值电流（Ipeak），步科常用型号Ipeak值如图5.5，请查表如实配置;
如OD124S系列，currentFactor = 1 / (2048 / 36 / 1.414) = 0.024856
1677663150058-e3f54db1-615e-4c12-875b-a7f2757d8ab7.png
## 图5.4

1677663163029-e70bd08d-37a9-4ea1-8da3-69c6cf9ea921.png

1677663175823-b426f0e1-3584-448d-b03c-6e502924aecf.png
## 图5.5

### 六、驱动器功能检测方法
在整车组装完成未安装外壳前，请再检查一遍接线确保接线正确；
将车体加高，使轮子离地。开启机器人，使用网线连接机器人。使用 Roboshop 软件操作机器人让轮子转起来。 使用 CanScope 夹在 CAN 总线上检测 CAN 报文至少 1 小时，CAN 报文无错误；
让车体着地，使用 Roboshop 软件操作机器人做运动动作:向前，向后，向左，向右运动；
未拍急停按钮前，推动机器人，无法推动（电机使能），检查 Roboshop 中机器人状态处于“未急停”“驱动器未急停”，如图 6.1 左侧图所示；所示拍下急停按钮后，再次机器人，可以推动（电机去使能），检查 Roboshop 中机器人状态处于“已急停”，“驱动器已急停”。如图 6.1 下方图所示；
1677663188481-0a751fbe-e933-459f-baf7-bff708003d7e.png 
## 图 6.1

任务链运动老化测试 24H ，查看 Robokit Log 无错误报警。
### 七、附录
### 7.1 驱动器总线通讯接口（X1）
1677663204719-10e410ba-adbe-4ea5-877a-81f63a34ff65.png
## 图 7.1

### 7.2驱动器调试 RS232 串口（X2）
1677663219936-c123f9b1-0ba0-48a0-9997-744813872fec.png
## 图 7.2

### 7.3 驱动器外部输入输出（X3）
### FD123/FD133 驱动器 X3 接口定义
1677663237355-85ef0f34-fab2-4052-a815-6035227ffb72.png
## 图 7.3.1

## FD1X4S 驱动器 X3 接口定义
1677663251424-4816a26c-aa92-48de-b9ea-3e26fe76b1de.png
## 图 7.3.2

### 7.4 致远 CAN Scope 使用方法
软件安装--安装 CAN Scope 配套软件 CANScope 。（软件及使用手册请联系致远厂商售后）。
硬件连接--参考 CAN Scope 使用手册接好电源，USB 调试线，插上 CAN Port 板,将 CAN_H 接到 SRC2000 外接线束 TE35 33 号线上，将 CAN_L 接到 SRC2000 外接线束 TE35 32 号线上。USB 调试线插在电脑上。
打开软件 CANScope ，选择【Port 板】，取消【启用终端电阻】，选择【报文】，配置【波特率】为 250Kbps ,取消【总线应答】，选择【开启】，CAN 报文实时如图 7.4.1 所示：
1677663268954-291e38ce-489f-4027-9856-ba2dc40ce17a.png
## 图 7.4.1

选择【状态】【错误】，检查是否有错误报文。如图 7.4.2 所示。
1677663284387-3b841e8b-ddc8-454b-937a-3ef429c43fd8.png
## 图 7.4.2

### 7.5 USB CAN 卡使用方法
软件安装—安装软件 USB_CAN Tool （软件及使用手册请联系CAN卡厂商售后）。
硬件连接—准备 USB CAN 卡和连接线，将连接线 CAN_H 接到 SRC2000 外接线束 TE35 33 号线上，将连接线 CAN_L 接到 SRC2000 外接线束 TE35 32 号线上。如图 7.5.1 所示：
1677663297946-d2deb605-d867-404b-9d95-46ccacc6814e.png 
## 图 7.5.1

打开 USB CAN tool ,选择【设备操作（O）】【启动设备（S）】,确认 CAN 参数，【波特率】为 250Kbps ,选择【CAN 通道号】为通道 1,点击【确认】。如图 7.5.2 所示
1677663314011-7de9aff6-8174-4a56-8e03-3b39b60ae9cc.png
## 图 7.5.2

### 4.选择【显示（V）】，取消选择【合并相同 ID 数据(M)】，CAN 报文如图 7.5.3 所示：
1677663331870-19c60412-c4a1-4a72-b5c8-971eadf2facf.png
## 图 7.5.3

### 7.6  udpconsole 使用方法
udpConsole 是我司工程师用于调试 bug 开发的小工具，可以检查到固件上报的错误信息。
打开 udpconsole 工具前需用网线确保电脑与机器人的物理连接。
打开 udpconsole ，进行驱动器功能测试，时刻检查 udpconsole 显示内容。
### 驱动器通讯过程中出现错误帧如图 7.6.1 所示：
1677663346738-3ee02f11-3de8-474e-9375-c36e600c4f2b.png
## 图 7.6.1

### 7.7  驱动器配置方法二
针对驱动器配置方法二，驱动器初始化成功可用上位机选择【驱动器 D】【数字 IO 设置】检查 DIN 功能及当前状态确认物理线路是否连接正常，如图 7.7.1 所示：
1677663362172-5ea0c9c8-44b8-47b1-a976-ecb7abfae880.png
## 图 7.7.1

### 八、驱动器常见错误码

## Bit 15

## Bit 14

## Bit 13

## Bit 12

## Bit 11

## Bit 10

## Bit 9

## Bit 8

## 存储器
## 报警

## 电机励磁
## 报警

## 电机高温
## 报警

## 脉冲频率过高报警

## 电机或驱动器 IIt 报警

## 逻辑低压
## 报警

## 位置误差
## 过大报警

## 吸收电阻
## 报警

## Bit 7

## Bit 6

## Bit 5

## Bit 4

## Bit 3

## Bit 2

## Bit 1

## Bit 0

## 驱动器
## 过流
## 报警

## 驱动器
## 低压
## 报警

## 驱动器
## 高压
## 报警

## 驱动器
## 高温
## 报警

## 编码器
## 计数
## 报警

## 编码器 UVW 连接报警

## 编码器 ABZ 连接报警

## 内部错误报警
## 举例：
移除驱动器的编码器线，Roboshop 报警显示报错码“ 0x6 ”,如下图所示。对应二进制为“ 0110 ”， Bit 1 ,Bit 2 为“ 1 ”,查看对照驱动器实时报警错误状态，确认报警错误为“编码器 ABZ 连接报警”，“编码器UVW连接报警”。
1677663376091-60f14b68-66f5-4002-b6aa-34a4fc58bb29.png
## 图 8

## 1.9.72 以上版本错误码以下图为准
1677663390216-75eda6b8-0edc-4d7c-abac-c8d8ed214ecc.png

### 步科伺服驱动器错误码详细说明表及排查方法
### 📎步科伺服错误详细说明表 20201225.xlsx

### 九、Kinco 驱动器升级方式
## 1. Kinco 驱动器固件升级方法
因为 Kinco FD124-CA-000 步科已停产，但是市面上依然有一些流通旧版本，如果固件版本日期早于 20191231，建议按照如下方法更新驱动器固件：
注：更新方法和固件是由 Kinco 技术支持提供，若有异常，请联系 Kinco。本改造方法仅供参考，不可作为技术协议及承担责任的内容。
打开上位机，[通信设置]建立软件通信链接。
1677663407088-25777b5c-4955-48b0-b1e6-f41ed99d9743.png
## 图9.1.1

### 打开[驱动器]-->[固件下载]-->[加载文件]
1677663420844-da8028de-a973-4278-9840-ea73678e2200.png
## 图9.1.2

## 打开选择固件
1677663436062-a32b1c04-4e30-43e3-bf4e-5dcf629cb7ae.png
## 图9.1.3

## 点击[下载]下载固件等待固件更新
1677663488351-f566e4da-863b-4b92-b7ec-23c1c89dbbee.png
## 图9.1.4

## 等待进度条完成，中途不要断电
1677663501753-5f912392-e503-42b2-bbc2-069f2b0ead90.png
## 图9.1.5

## 固件更新成功
1677663516587-e0a84bcd-5dd4-4ad4-96ae-dde8e2f05fee.png
## 图9.1.6

选择[驱动器]-->[初始化/保存/重启]-->[存储控制参数]-->[重启].
1677663531923-27d36aef-a538-4c34-8600-9190341afa03.png
## 图9.1.7

## 固件升级完毕！
注：固件升级完毕后，需要重新配置驱动器参数。若控制驱动器/电机行走电机噪音很大，请联系 Kinco 技术支持调整速度环、电流环增益参数。

### 2. 电机参数cdi文件使用方法
部分电机是不能通过配置电机型号的方式选择参数的，比如铭牌电机代码为G4
1686205950184-beff549a-c411-4536-aa86-5265372ce282.png
## 图9.2.1

此时需要联系步科要电机的配置参数，配置参数的格式为 .cdi 格式，该参数导入步骤如下图
1686205876120-a0a41801-bf29-4a51-b1f8-7b44783f194f.png
## 图9.2.2

### 十、FAQ
## 带抱闸驱动器拍急停时下滑
## 打开抱闸配置
1677663544769-8657cd4e-d285-457a-bb0b-c6fa33886fa0.png
## 图10.1

垂直带抱闸结构，结构刚性差，打开抱闸配置后仍会出现下滑时，需调节驱动器PID和抱闸延时，下图为参考值，如果无法解决，请联系步科工程师协助调试解决
1677663565001-4746ea81-e583-47b0-9e5d-48132cd6787d.png
## 图10.2

报错“0x8611-实际跟随误差超过允许”，检查如下配置是否成功
## （1）打开驱动器D-》控制环-》位置环
### （2）将 最大跟随误差 改成 655360
1684205368186-aa7d1531-484e-4707-a5da-288191d2af43.png
## 图10.3
