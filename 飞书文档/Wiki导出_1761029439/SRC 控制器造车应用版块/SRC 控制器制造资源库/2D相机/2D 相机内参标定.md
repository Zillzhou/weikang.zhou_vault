# 2D 相机内参标定

## 2D 相机内参标定

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.3.25

## 语雀迁移至飞书

## 使用中

如果相机的厂商在相机出厂之前没有做好内参标定，那么需要我们自己标定，目前需要标定的相机型号为： 海康相机 、 大恒相机 、 usb相机 。

目前可以采用两种方式进行标定，第一种需要使用 matlab 工具，第二种直接在 roboshop 上进行标定。

## 1. 使用matlab 工具进行标定

对于相机的内参，目前需要借助 matlab 工具进行标定，详细安装步骤如下：

第一步：将相机连接到电脑上，打开 matlab ，第一次使用需要安装相机驱动包
## image.png

## 第二步：找到标定工具
## image.png

第三步：采集照片，推荐采用棋盘格来进行标定，需要提前将棋盘格打印出来，大小可选择 A4 纸

在 Add Images 中选择 From camera ，此时 matlab 会调用相机进行图片采集，在采集的过程中要保证相机能够完整的拍摄到整个棋盘格，最好能够变换不同的角度进行图像采集。

选择完毕后点击 Capture 进行采集；选择 Capture 后会弹出弹窗，让你填写棋盘格网格实际物理尺寸，按照实际的填写
## image.png

## image.png

第三步：开始标定，计算内参.

实际采集 20 张图像后即可停止采集，在选项中选择了 3 阶径向畸变系数，计算切向畸变系数。只要你的重投影整体平均误差小于 0.5 像素即可
## image.png

## image.png

上图划红线解释依次为：径向畸变系数（3 阶），切向畸变系数（2 阶），世界坐标单位是 mm，内参矩阵，焦距（分 fx,fy)，成像平面原点坐标（单位是像素）。

径向畸变系数对应 Roboshop 中的 k1,k2,k3；切向畸变系数对应 p1,p2；焦距对应 fx，fy；成像平面原点坐标对应 cx，cy。

### 2. 使用roboshop的内参标定工具进行标定

步骤1：RoboShop中添加相机，确保相机正常连接。
## image.png

步骤2：进入标定界面，找到相机内参标定选项；
## image.png

步骤3：点击开始标定，这时候可以看到标定界面出现相机的实时画面，点击Take Picture按钮即可保存一张图片，按钮的（）中代表保存了几张图片
## image.png

步骤4：需要至少采集15张图片，采集过程中需要从多个角度和方向对标定板进行采集，采集足够的图片后点击计算内参按钮；
## image.png

步骤5：之后会跳出一个弹窗，行数和列数根据标定板上tag的行和列来输入，相机类型选择1，网格长度和网格间距分别填写0.03和0.3；
## image.png

步骤6：待标定完成之后点击结束停止标定按钮，界面会跳出标定结果，点击设置标定参数即可将标定结果设置到相机模型中对应的内参区域内；
## image.png

步骤7：点击查看计算结果，可以看到此次标定的结果图，可以从图中分析此次标定的精度；
## image.png

步骤8：下图为标定结束的图例，途中绿色的点为算法识别到的角点，红色的点为标定之后重投影到标定板上的点，好的标定应该是红点和绿点尽量的重合；左下角橙色代表的是平均重投影误差和最大重投影误差，单位是像素；图例采用的相机为普通的usb相机，识别精度要差一些，对于工业相机来说，平均重投影误差需要小于0.3.
## image.png
