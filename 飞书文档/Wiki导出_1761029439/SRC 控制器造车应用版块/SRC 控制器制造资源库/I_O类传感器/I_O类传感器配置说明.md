# I/O类传感器配置说明

## I/O类传感器配置说明

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.3.8

## 语雀迁移至飞书的文档重构

## 使用中

## 一、简介
本文档针对机器人改造涉及的传感器改造过程进行规范，保证产品质量稳定，使技术人员在进行改造过程中有章可循。
机器人自动化改造涉及传感器众多，建议采用仙工标准核心控制器线束 TE23, TE35, 本文档以核心控制器标准线束为蓝本进行作业指导。
注：本文档只适用于改造参考，不可作为技术协议及其他承担责任的内容。
### 二、适用范围
本文档说明适用于公司使用传感器进行自动化改造的研发、生产、调试的技术人员。
### 三、传感器的选型
 对于 NPN- 常开型，在没有信号触发时，输出线是悬空的，就是 0v 线和 out 线断开。有信号触发时，发出与 0V 相同的电压，也就是 out 线和 0V 线连接，输出低电平 0V 。
 对于 NPN- 常闭型，在没有信号触发时，发出与 0V 线相同的电压，也就是 out 线和 0V 线连接，输出低电平 0V 。当有信号触发后，输出线是悬空的，就是 0V 线和 out 线断开。
 工核心控制器 SRC 2000 的 DI 接口只支持 NPN 逻辑，不支持 PNP 。出于功能安全考虑，建议选型 NPN- 常闭型传感器。选型 NPN- 常闭型传感器是从硬件角度考虑功能更安全。可以提前检测到是否有传感器掉电或者传感器输出信号线脱落。
如下本文档将以光电传感器Sick GTB10-N1212为例进行改造说明。

### Sick GTB10-N1212 规格书：

dataSheet_GTB10-N1212_1065859_zh.pdf
### 四、改造流程
### 4.1 传感器状态确认
熟悉机器人改造涉及的传感器的机械/电子参数。
熟悉机器人改造涉及的传感器的线路走向，对裸露的带电端子使用绝缘胶带包扎保证整机用电安全。
熟悉机器人改造涉及的传感器的机械布局，如：传感器安装位置或者客户要求传感器安装位置等等；
熟悉机器人改造涉及的传感器的安装位置的状况，确认安装位置内干燥、干净、无腐蚀性液气体、无铁屑、无尘埃、无油气、无机械干涉。
### 4.2 接线改造说明
根据产品说明书明确产品工作用电电压。光电传感器Sick GTB10-N1212工作电压：10-30V DC
根据产品说明书找到接线定义。
光电传感器 Sick GTB10-N1212 接线定义如图所示 。棕色线接电源正极。蓝色线接电源负极。黑色线接DI对应信号输入线。
1658805537093-4f4e858e-af05-4da3-80c5-c7d43b1043a1.png

根据产品工作电压和接线定义完成接线改造说明。接通工作电压，绿色LED 指示灯亮起。
### 4.3 传感器的调试
光电传感器Sick GTB10-N1212有明通/暗通两种触发方式，通过旋转开关7设置。如图4.3.1所示
1658805556370-6319e5b1-541a-4cdc-a884-a02e6cad5f54.png

## 图 4.3.1
4.3.2  L 档为明通，光电接收器接收到照射时输出为接通状态，即有遮挡物反射时传感器闭合，光电接收器未接收到照射，即无遮挡物反射时输出为断开，可以理解为常开。 D 档为暗通，光电接收器未接收到照射时输出为接通状态，即无遮挡物反射时传感器闭合，光电接收器接收到照射，即有遮挡物反射时输出为断开，可以理解为常闭。
### 4.3.3 在此选择暗通方式，即将旋转开关 7 旋转到 D 档。
### 4.3.4  确认检查使用条件：校正至物体或背景的扫描范围和距离，以及物体的反射能力。 漫反射： 6 % = 黑色， 18 % = 灰色， 90 % = 白色
### ( 以 DIN5033 中规定的标准白色为基准 )
### 4.3.5  将光斑对准探测物体，如果黄色 LED 指示灯持续亮起，表明光电传感器有检测到物体。如图 4.3.2 所示。
1658805573699-e718a873-8a49-49a1-b9a1-1ec0ceae0cf1.png

## 图 4.3.2
4.3.6 使用电位计调整扫描范围：将探测物体定位在光路中距离传感器 0.5m 处（此处取 0.5m 作为安全距离，请根据现场情况调整），向右转动 6 号旋转开关（电位计），直至黄色 LED 指示灯持续亮起。移开物体，黄色 LED 指示灯熄灭，调整结束。
如果黄色 LED 指示灯未熄灭或闪烁，则缓慢向左转动 6 号旋转开关（电位计）直至黄色 LED 指示灯熄灭。重新定位物体， 如果黄色 LED 指示灯持续亮起， 则调整结束。如果无法确保能够探测到物体，则检查使用条件（参考 4.3.4 ）。如图 4.3.3 所示。
注：有些品牌型号光电传感器尤为对黑色探测物体失去功能效果，建议测试时也要选用黑色探测物体测试。
1658805588554-5ada7b17-8700-4fd6-89ce-d0d985c99457.png

## 图 4.3.3
### 4.4 Roboshop 机器人模型配置
4.4.1 打开 Roboshop 机器人模型设备添加 DI 设备，配置属性窗口 id 。请注意此时 inverse 先不要打勾。本次以 DI0 为例。如图 4.4.1
1658805610901-afdddb48-93f9-4824-a6f2-800f3b29c158.png

## 图 4.4.1
### 4.4.2 打开Roboshop地图与控制I/O 配置，检查DI0 的状态显示为绿色（高电平，1）。此时DI0 状态为绿色说明传感器是常闭型的。如图4.4.2
1658805643673-f75206de-d8c1-4ad0-8ca4-1ccbf59f84fd.png 

## 图 4.4.2
### 4.4.3  根据产品设计在 Roboshop 机器人模型设备添加新的 DISensor, 并在设备属性配置传感器的位置及功能。如图 4.4.3
1658805728111-b0bcd1f1-73c5-4d71-8826-4d175e1bf4ef.png

## 图 4.4.3
 4.4.4  简单测试一下，在传感器检测区域放置一个探测物体，控制机器人向探测物体方向移动，检查 DI 是否实现配置的功能。此时可能会出现两种情况： 1. 传感器信号未触发 , 信号灯未显示，但 Roboshop 上传感器停障状态却是有效的； 2. 传感器信号触发 , 信号灯显示，但 Roboshop 上传感器停障状态却是无效的。这个反逻辑的状态原因是 Roboshop 为了适应各种传感器传统使用习惯导致的，消除这个问题只需在机器人模型中，将传感器对应 DI 的设备属性配置勾选 ‘inverse’，再推送机器人模型。再次控制机器人向探测物体方向移动，再次检查 DI 是否实现配置的功能，此时传感器信号未触发 , 信号灯未显示，机器人正常行走，待传感器信号触发，信号灯显示，机器人停障。如图 4.4.4 所示。
1658805777487-3e7b31c2-e2dd-4d13-be25-0d29cc0b9f64.png

## 图 4.4.4
### 五、功能测试
功能测试是用来判断传感器安装及功能是否正常（供参考）。
5.1  通过 Roboshop 任务链控制机器人路径导航，此时机器人路径导航行走正常，然后在机器人导航路径上传感器检测区域范围内放置各类探测物体，查看机器人传感器是否实现了配置的功能。此时机器人实现了停障功能。（功能部分）
注：有些品牌型号光电传感器对黑色探测物体失去功能效果，建议测试时也要选用黑色探测物体测试。
5.2 断掉传感器电源，通过 Roboshop 任务链控制机器人行走，此时不需要在机器人导航路径上传感器检测区域范围内放置各类探测物体，机器人就会停止移动，实现了对传感器的掉电检测，保证了机器人运行安全。
 5.3 人为断开传感器的信号输出线，也会类似 5.2 导致机器人停止移动。实现了对传感器的信号输出线脱落的检测。信号输出线和电源短路也可以检测，信号输出线和地短路无法检测。
### 5.4 测试完毕后请恢复传感器电源和信号线连接，确保传感器功能正常使用。
