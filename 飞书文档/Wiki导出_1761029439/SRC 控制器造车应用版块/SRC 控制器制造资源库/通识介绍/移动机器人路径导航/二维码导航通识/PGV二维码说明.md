# PGV二维码说明

## PGV二维码说明
结合供应商和实际应用测试，对当前在使用的读码相机支持码型进行汇总，可作为选型和现场布设参考。
当前使用过程中发现，海康pgv对于单码的识别效果不好，选型过程中尽量避免。

## 码类型

## 倍加福100

## 倍加福100r

## 大华r3138

## 海康SC200
## （暂不推荐）

## 牧星sc200A（同海康）

## 1

## DM12

## 单码

## 不支持

## 不支持

## √

## √（不推荐）

## √（不推荐）

## 2

## 单圆码

## 不支持

## 不支持

## 不支持

## √

## √

## 3

## 多码（4*4）

## √

## √

## √

## 不支持

## 不支持

## 4

## DM14

## 单码

## 不支持

## 不支持

## √ （不推荐使用）

## √（不推荐）

## √（不推荐）

## 5

## 圆码

## 不支持

## 不支持

## 不支持

## √

## √

## 6

## 多码（4*4）

## 不支持

## √ （不推荐使用）

## 不支持

## 不支持

## 不支持
## 二维码类型
## 单码
无圆环和有圆环，圆环的作用是辅助定位， 大华不支持带圆环的单码
1683271568498-43e60d1b-c6d0-4b10-b4b0-c2710e164be2.png 

1699342024607-8026c6e7-8381-49e4-bec1-ffa46a2ef1bc.png

## 4*4二维码

1663924687393-42d0fd84-0786-4375-85c7-582a7cf7ccc7.png

## PGV支持的二维码类型
## 倍加福
### PGV100 仅可以识别标准版二维码（DM12）
### PGV100R 可以识别标准版和扩展版二维码（DM14）
## 大华
### 大华仅支持读取 标准版 二维码（ DM12 ）
### 大华 仅支持 识别 1*1 和 4*4 的二维码
1683271568498-43e60d1b-c6d0-4b10-b4b0-c2710e164be2.png 

1663924687393-42d0fd84-0786-4375-85c7-582a7cf7ccc7.png

## 单码尺寸范围20~30mm
## 1*1二维码 4*4二维码
## sick
sick-GLS100G 需要使用 sick 的二维码生成器生成二维码
### 2.4 Hikvision
### MV-SC2005AM-02WBN只支持单圆码
## roboshop生成pgv二维码：
### roboshop支持生成的二维码和一维码
通用一维码、通用二维码、April Tag码、倍加福DM码标准版和扩展版，均可通过 roboshop 生成。路径在ROBOSHOP——其他——二维码工具。
## 图片.png

## DM12 和 DM14 区别
1663924650602-7e6081e1-d60e-48cd-8dd5-ce342a4f859f.png

## 二维码尺寸要求
倍加福和大华所用的二维码尺寸要求是固定的， 二维码的尺寸要求必须严格按照下图 格式

1663924687393-42d0fd84-0786-4375-85c7-582a7cf7ccc7.png

## 导航及二次定位DM单码生成
导航及二次定位DM单码通常使用DM12和DM14，具体可根据相机支持的码型选择使用。在根据相机支持码型选择后，还可以根据现场情况进行单码还是多码的选择。一般来说，单码比多码的定位精度高，多码的抗脏污和干扰能力更强。
## 生成DM12单码方式如下：
## 图片.png

## 图片.png

## 生成DM14单码方式如下：
## 图片.png

## 图片.png

## 导航及二次定位DM多码生成
## 生成DM12 4*4多码的方式如下：
## 图片.png

## 图片.png

## DM14 ：2*2多码生成配置如下
## 图片.png

## 图片.png

## 相关系统参数
## 二次调整
如果遇到二次调整时间过长，
先检查车体标定是否正常，在检查二维码标定是否正常。如果标定不准会导致二次调整无法完成。
对于 机器人直接行驶到终点，然后原地旋转调整到位的应用场景。 需要 检查车体原地旋转是否有侧向偏差。需要将 PGV_ReachDistTor 改成 和原地旋转侧向偏差同等量级。这是由于机器人原地旋转引入的侧向偏差，在二次调整时无法补充。
请参照下述参数，通过修改参数改善。

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## PGV_Time

## 参数配置-Navigation

## —

## 5

## 0

## 1000000

### 3.3.4.20~latest

## PGV 看不到二维码报警的次数阈值

## PGV_Speed

## 参数配置-Navigation

### 0.005

### 0.001

### 0.1

### 3.3.4.20~latest

## 按 PGV 进行二次调整时的移动速度

## PGV_Rot

## 参数配置-Navigation

## °/s

### 10.0

### 0.001

### 180.0

### 3.3.4.20~latest

## 按 PGV 进行二次调整时的角速度

## PGV_Method

## 参数配置-Navigation

## —

## 1

## 0

## 3

### 3.3.4.20~latest

PGV 的调整方式。方法0，调整定位基于二维码，只支持第一种调整方式。方法1，agv看到二维码时，定位基于二维码，看不到二维码时基于里程，可以支持所有调整方式。方法2，在方法1的基础上增加了更强的滤波，用于精度要求高，效率不高的场合。在3.3.5.67 版本上，增加了方法3，这种方法去除了方法1的滤波，用于精度要求不高，效率高的场合。

## PGV_ReachDist

## 参数配置-Navigation

## m

### 0.001

### 0.000001

### 0.1

### 3.3.4.20~latest

## PGV 首次调整的位置到点精度

## PGV_ReachAngle

## 参数配置-Navigation

## °

### 0.5

### 0.00001

### 180.0

### 3.3.4.20~latest

## PGV 首次调整的角度到点精度

## PGV_ReachDistTor

## 参数配置-Navigation

## m

### 0.00001

## 0

### 0.1

### 3.3.4.20~latest

## PGV 非首次调整的额外的位置到点精度

## PGV_ReachAngleTor

## 参数配置-Navigation

## °

### 0.0001

## 0

### 180.0

### 3.3.4.20~latest

## PGV 非首次调整的额外的角度到点精度

## PGVError

## 参数配置-Navigation

## —

## True

## —

## —

### 3.3.4.20~latest

### 控制在随动下如果上视pgv看不到二维码就报错

## PGVFilterThreshold

## 参数配置-Navigation

## —

## 2

## 0

## 1000

### 3.3.4.20~latest

## PGV 滤波参数阈值

## PGVAdjustMaxTheta

## 参数配置-Navigation

## °

## 10

## 1

## 90

### 3.3.4.20~latest

按 PGV 二次调整，规划路径时的最大角度。只对于采用限定范围的调整方式生效，即下发任务中包含 pgv_adjust_dist 字段。

## PGV_AverageTime

## 参数配置-Navigation

## s

### 2.5

## 0

### 100.0

### 3.3.5.65~latest

### 当 PGV_Method 为 2 时，均值滤波的平均时间

## PGV_AdjustMaxTime

## 参数配置-Navigation

## 0

## 0

## 100

### 3.3.5.78~latest

进 行二次调整最多次数。如果该值为0，表示没有次数限制。如果该值大于0，当调整次数大于此阈值，会报错 52805
