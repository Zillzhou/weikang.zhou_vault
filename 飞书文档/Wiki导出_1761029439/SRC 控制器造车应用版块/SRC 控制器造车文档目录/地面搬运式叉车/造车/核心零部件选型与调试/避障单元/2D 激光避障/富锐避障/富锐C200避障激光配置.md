# 富锐C200避障激光配置

## 富锐C200避障激光配置

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 调试工具
需要使用的软件与工具包括：富锐的上位机、roboshop、网线、 笔记本电脑。
## 富锐上位机下载：

C&H激光配置软件_UpperCom_1.02.07.011.rar
## 配置激光
本篇文档参考 富锐 C2 激光 进行激光内部参数配置，具体步骤如下：
首先将激光与电脑通过网线直连，需要将个人电脑的ip修改该为同一网段
需要对激光雷达的ip和端口号进行配置：打开上位机软件，点击左侧“基本信息”，输入雷达 IP 地址，点击“连接”。连接雷达后，上位机会显示设备名称、设备序列号、设备版本号、MAC 地址信息。富锐C2激光默认ip为192.168.192.100。
1701139289230-f43156c4-db78-4d1a-a9e4-456b64b74ddc.png

连接上了之后点击参数配置-雷达权限解锁如下图。往下配置扫描频率、角分辨率、和ip。
1701140614776-d210f378-bead-4be6-9cbc-e26027b1f5aa.png 

4. CBD15默认左激光修改为192.168.192.101，右激光修改为192.168.192.102，点击修改并保存。(设置扫描角度不用重启雷达就能生效；设置了网络参数，需要重启雷达才能生效)
1701141580210-fbaa4462-94c0-4da6-b0de-d1c6bd83d43b.png

接着修改转速/角分辨率，修改为 2515Hz/0.3333° 。点击修改并保存。
## image.png

1701142249313-bb89ff99-5038-4c9e-9959-c2d1745ac83a.png

修改完成之后需要对激光雷达断电重启之后，设置才会生效，然后就可以在roboshop上配置使用。
## 配置模型文件
在模型文件界面左侧点击laser，如下图①，在左侧进行具体参数配置，如下图②，进行 左激光 的参数配置，此时可以看到③处激光被选中。
1710836635320-0155f439-30be-4e58-8ffc-4cfbc1a8753c.png

配置通讯：据本文第二章在 左激光 内配置的ip，在ip处填写192.168.192.101，端口处填写2111，brand选中FocueRay-c200-TCP，如下图方框所示：
1710856961555-1897b544-f072-45ef-b8ea-c63bea803f60.png

由于此激光做避障用，无需导航，useForLocalization不勾选，如下图
1710857203323-3ddaee1f-227a-462e-b88c-ba319e6f14bf.png

配置激光位置，即激光在机器人坐标系中的x y z yaw和是否倒装。
1710857037061-43aebaa6-7f0e-4082-aa55-80f2e74c7d8a.png

## 具体参数释义如下：

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## x

## 模型文件-laser

## m

## 0

## -99

## 99

### 3.3.4.20~latest

## 激光雷达在车体坐标系下x轴方向的值

## y

## 模型文件-laser

## m

## 0

## -99

## 99

### 3.3.4.20~latest

## 激光雷达在车体坐标系下y轴方向的值

## z

## 模型文件-laser

## m

## 0

## -99

## 99

### 3.3.4.20~latest

### 激光雷达在车体坐标系下z轴方向的值，该值无关紧要

## yaw

## 模型文件-laser

## m

## 0

## -180

## 180

### 3.3.4.20~latest

## 激光雷达在车体坐标系下的角度偏移值

根据本文第一章介绍的激光 有效测量角度，配置激光坐标系下的最小角度和最大角度如下图框所示
1710857337335-fb77f017-ac67-4e89-ba94-a02f1f0d54b4.png

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## minAngle

## 模型文件-laser

## °

## 0

## -180

## 180

### 3.3.4.20~latest

最小有效角度；有些情况激光雷达会存在遮挡，这个时候需要人为设置一下最小测量角度。

## maxAngle

## 模型文件-laser

## °

## 0

## -180

## 180

### 3.3.4.20~latest

最大有效角度；有些情况激光雷达会存在遮挡，这个时候需要人为设置一下最大测量角度。

## step

## 模型文件-laser

## °

## 0

## 0

## 5

### 3.3.4.20~latest

角分辨率；表示激光雷达在单帧扫描过程中每两根扫描线之间的夹角

## 激光区域扣除
仙工智能另外提供了根据角度来扣除点云的功能，在支持该功能的激光雷达的配置列表下，可以看到如下几个参数：

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## useAreaRemove

## 模型文件-laser

## —

## false

## —

## —

### 3.3.5.20~latest

## 判断是否扣除该区域

## areaStartAngle

## 模型文件-laser

## double

## 0

## -180

## 180

### 3.3.5.20~latest

## 区域内的起始角度

## areaEndAngle

## 模型文件-laser

## double

## 0

## -180

## 180

### 3.3.5.20~latest

## 区域内的终止角度

## CBD15 不启用，如下图：
1710857652101-ec218a9f-883d-41c7-87a9-2466f652f7ee.png

## 串口配置
对于用作避障的某些激光雷达，如 Sick 的 Tim 系列，会用到串口作为控制器和激光雷达的通信。这类激光雷达通常不需要将点云的原始数据传输到控制器，激光雷达内部可以规划安全区域，当安全区域内存在障碍物的时候，上报存在障碍物的信号即可。

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## Com

## 模型文件-laser

## —

## —

## —

## —

### 3.3.4.20~latest

## COM口号；配置某些避障激光

### CBD15作为网口通讯，无需配置，如下图
1710858369011-e3449a7d-af5b-4bcc-b255-7af24d0515d2.png

重复1-6步，注意激光ip和安装位置，配置右激光。
## 验证
### 保存推送模型文件，roboshop 没有报错
### 阻挡左激光，roboshop上出现对应的点云，如下图
1711021007760-18a6e662-feec-4170-8066-1212c0866a66.png

### 阻挡右激光，roboshop上出现对应的点云，如下图
1711020994242-b4dada60-59e2-45bb-b982-71a64a19ef58.png
