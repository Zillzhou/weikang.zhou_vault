# 如何选择驱控方式

## 如何选择驱控方式

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## v1.1

### 2024.06

## 增加选型说明

## 使用中

      CBD15 搬运车支持的运动模型是单舵轮运动模型，包括前进、后退、左转、右转、旋转等运行动作，和货叉抬升。
## 舵轮选型参考

## 序号

## 功能

## 运动 模型

## 推荐等级

## 特点

## 需授权 rbk 功能

## 1

## 行走&转向

## 单舵轮

## 推荐

承载力强，设计调试较简单，但灵活度不高。

## rbk_steer

## 2

## 多舵轮

## 一般

承载力强，全向移动灵活度高，但设计、调试困难。

## 3

## 双轮差速

## 不推荐

承载力差，一般用于小型地牛。

## 4

## 升降

## 泵控液压

## 推荐

## 只有升起来后的高位、和降下来后的低位

## rbk_fork

## 5

## 伺服电机+丝杆

## 一般

## 6

## 电缸

## 不推荐

## 舵轮模组组成介绍
下图是叉车舵轮的 2D 结构图。
## image.png

## 序号

## 零件名称

## 作用

## 备注

## 1

## 行走牵引电机

## 舵轮前进后退、加减速的动力来源

## 2

## 回转机构

将车体的负载传递到舵轮上，同时能保证车体和舵轮的相对转动，它由内圈、外圈、滚动体等构成

## 3

## 限位开关（传感器）

## 用于舵轮左右转动角度极限检测

## 非必须部件，选配件
## 绝对值转向驱动器可不安装

## 4

## 电磁制动器

## 行走牵引电机的刹车

## 5

## 行走减速箱

## 降速同时提高输出扭矩

## 6

## 转向减速机+电机

## 为舵轮转向提供动力

## 7

## 转向齿轮

### 转向电机减速机输出的扭矩通过转向齿轮传递到回转机构外圈

## 8

## 包胶轮

## 舵轮直接与地面接触部分

## 属于易损件
## 驱动器选型
### 选型时优先考虑已适配的驱动器方案与协议。具体请见驱动器
## 转向选型
## 编码器与零位说明
## 转向电机编码器线数不低于 128 线
舵轮必须要有零位，零位的准确与否直接影响导航精度。
零位传感器可以有两种型式，一种是安装在大齿轮盘上的接近开关，另一种是转向电机内置绝对值编码器。
转向驱动器的选择有两种方案，一种是柯蒂斯直流和交流驱动器方案，一种是用通用伺服驱动和电机方案。
如果选择柯蒂斯方案就必须加入零位传感器，如果车体原厂已经加了零位传感器就可以省掉大量的机械改造工作量，否则需要改造舵轮结构。对于原厂车体没有零位传感器的，可以选择使用带绝对值编码器的标准伺服驱动器，如步科的 FD 系列。
## Curtis 转向驱动器方案
Curtis 方案主要有直流电机驱动器 1220C 和交流电机驱动器 1222，如果原厂车体已配了 Curtis 的方案，可以考虑沿用，如果原厂车体原本不是 Curtis 方案，推荐换成通用伺服驱动器方案；
Curtis 转向驱动器最高支持 256 线编码器；
Curtis 转向驱动器挑转向电机，只支持它支持列表（Curtis 未公开）内的电机型号；
Curtis 转向驱动器角度执行精度较差；
使用 Curtis1222 转向驱动器会存在误计数的现象，必须使用 0Hz 的编码器
## 通用伺服驱动器转向方案
### 选用通用伺服驱动器转向方案，需要考虑动力和转速两个方面：
转向机构的速度：一般舵轮的转速要求不小于 80°/s；就要评估电机额定转速、减速机的减速比、齿轮比等参数；以实际使用的方案：电机额定转速 3000RPM、减速机减速比 35、齿轮比为 130/18；
驱控供电：叉车大部分是 24V 的电池，而伺服驱动器大部分是 48V 的额定工作电压，当降额工作在 24V 时，输出的扭矩和转速都会减半，会导致舵轮动力输出和转速都不够。所以需要用专用的 24V 版本伺服驱动器。
## 推荐型号：
FD124S-CB-005+400W 电机（SMC60S-0040-30QAK-5BSU）（24V 电池系统）
FD134S-CB-003+750W 电机（SMS80S-0075-30KAK-3DSU）（48V 电池系统）
如果选型同毅驱动器需要联系同毅供应商进行评估；
## 行走选型
目前行业中叉车改车的驱动器可以选择 ZAPI 和 Curtis 两个品牌，可以选用 ZAPI 的驱动器。配套电机功率由叉车厂或者舵机厂根据车体重量、负载、舵机齿轮减速箱等进行选型，行走电机功率举例说明如下：

## 负载

## 1-1.2T

## 2T

## 3T

## 行走电机功率

## 1-1.25kw

## 1.3kw

### 2.2kw
## ZAPI 选型
目前我们公司跟 ZAPI 供应商合作开发了协议和驱动器，可在 SRC 上适配使用二代 ZAPI ，根据供电系统可以分 24V 与 48V 两个型号：
ZAPI COMBIMDCX 24V/240A+270A AGV CAN
ZAPI COMBIMDCX MDCX 48V/210A AGV CAN
## 柯蒂斯选型
F2A24-240 可以支持不大于 2000W（S260min）的行走电机；F2C24-280-300 可以支持不大于 2400W（S260min）的行走电机和不大于 2500W（S310%）的泵电机；
### 1232 系列驱动器基本停产，推荐客户造车需要谨慎对待。curtis 已经推出替代产品 F2A、F2C，相比较 1232E 驱动器，F2A 功率略小。
### 1298 驱动器版本较老，有报错问题无法解决，不推荐客户造车方案。
## 升降选型
搬运车升降机构的主流可以分行走驱动的集成式 DO 泵控和电动升降。一般低负载的车型可以采用电动的方式，高负载的车型考虑用液压泵控。举例：

## 负载

## 1-1.2T

## 2T

## 3T

## 泵控电机功率

## 1-1.25kw

## 1.5kw

## 1.8kw
液压泵控的 ZAPI 方案与行走控制器集成，根据供电系统可以分 24V 与 48V 两个型号（和行走电机为一个驱动）：
ZAPI COMBIMDCX 24V/240A+270A AGV CAN
ZAPI COMBIMDCX MDCX 48V/210A AGV CAN
液压泵控的柯蒂斯方案与行走控制器集成型号为 CURTIS-F2-A，非集成式的泵控可支持 CURTIS-1220C-2201
## 常见组合方案
## 常见组合方案如下

## 方案

## 集成泵控

## 转向电机方案

## 行走驱动器型号

## 转向驱动器型号

## 泵控驱动器型号

## 推荐等级

## ZAPI + kinco

## 是

## 绝对值

ZAPI COMBIMDCX 24V/240A+270A AGV CAN

## kinco

ZAPI COMBIMDCX 24V/240A+270A AGV CAN

## 主推方案

## ZAPI + kinco

## 是

## 绝对值

ZAPI COMBIMDCX MDCX 48V/210A AGV CAN

## kinco

ZAPI COMBIMDCX MDCX 48V/210A AGV CAN

## 主推方案

## curtis+kinco

## 是

## 绝对值

## CURTIS-F2-A

## Kinco

## CURTIS-F2-A

## 主推方案

## 是

## 增量式

## CURTIS-F2-A

## Kinco

## CURTIS-F2-A

## 主推方案

## curtis

## 否

## 绝对值

## CURTIS-F2A

## Kinco

## CURTIS-1220C-2201

## 不推荐

## 否

## 增量式

## CURTIS-F2A

## Kinco

## CURTIS-1220C-2201

## 不推荐
注：集成泵控：如果是集成泵控代表，一个柯蒂斯驱动器的硬件可以驱动一个行走和一个泵控货叉升降
## 目前 CBD15 验证方案如下：

## 序号

## 运动类型

## 是否支持横移 / 全向

## 是否支持随动

## rbk 功能

## 驱动器模块

## 型号

## 其他说明

## 1

## 单舵轮底盘

## 否

## 否

## rbk_steer

## 转向驱动器
## 行走驱动器

## curis F2-A
## kinco 124S-CB-005

## 转向为绝对值编码器，不需要额外传感器

## 2

## 货叉升降

## /

## /

## rbk_fork

## 泵控驱动

## curtis F2-A

升降需要加上限位与下限位开关，一般需要 NPN 信号接入 SRC
## 配置底盘运动模型
## 运动模型配置 SOP
## 进入机器人
1711013134663-871be69f-a1fe-4ed7-a12b-fdccde4b3c15.png

1711013258950-d32d0b70-be06-4a35-b4b1-e59b62d02b7c.png

## 进入模型文件页面配置运动学模型
## 进入 chassis
输入机器人类型名称；
选择模型类型：一般配置为单舵轮 steer；
选择外形及参数：一般为矩形 rectangle，配置车体宽度 width、车体高度 height、里程中心到车尾的距离 tail、里程中心到车尾的距离 head。
1711015355469-b4990173-5faa-4ba7-95d9-fceb4d902e2e.png

### 连接机器人后进入调试页面，并切换到模型文件页面，如下图
1702524415677-7a2240f9-5f04-48dd-a0ce-7af0b3aae904.png

## 模型（mode）配置说明
叉车常见运动模型有：单舵轮模型、双差速模型、多舵轮模型、全向模型、差速模组模型等。可根据需要选择类型并配置参数。
1702524442835-97d11f90-7d07-4515-af27-eb60202591d2.png

## 单舵轮车型
叉车常见运动模型，模型文件中选择 mode 为 steer，参数说明如下：

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## realWheelDrive

## 模型文件-chassis-mode

## ——

## false

## ——

## ——

## ~latest

## 是否是后轮驱动，根据实际情况选择填写

### wheelBaseShiftLength

## 模型文件-chassis-mode

## m

## 0

## -0.5

### 0.5

## ~latest

叉车在升起后，加载货物的时候，主动轮与从动之间的轴距的变化值，根据实际情况填写

allowWheelBaseShiftLengthCalib

## 模型文件-chassis-mode

## ——

## false

## ——

## ——

## ~latest

允许轮距偏移长度校准，主要用于搬运车车型，货叉升起后从动轮相对车体位置发生变化的情况

## 双差速
该运动模型一般用于平面搬运机器人（地牛），模型文件中选择 mode 为 differential；参数说明：

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## wheelNum

## 模型文件-chassis-mode

## ——

## false

## 2

## 4

## ~latest

轮子数量，地牛类搬运叉车一般配置为 2。

## 多舵轮
该运动模型一般用于异形叉车，模型文件中选择 mode 为 mutiSteers，此处不需额外配置参数。
## 形状（shape）配置说明
在 shape 下拉框中选择实际车型所需的车体形状。车体形状可选类型有：矩形（rectangle）、圆形（circle），可根据实际配置形状以及参数。
1702525167893-a42f5ea0-9f48-4157-8d91-95365e92335e.png

## 矩形车

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## width

## 模型文件-chassis-shape

## m

## ——

## 0

## 9

## ~latest

矩形车的宽度，根据实际车体尺寸配置。

## height

## 模型文件-chassis-shape

## m

## ——

## 0

## 9

## ~latest

矩形车的高度，根据实际车体尺寸配置。

## head

## 模型文件-chassis-shape

## m

## ——

## 0

## 9

## ~latest

矩形车的里程中心到车头的距离，根据实际车体尺寸配置。

## tail

## 模型文件-chassis-shape

## m

## ——

## 0

## 9

## ~latest

矩形车的里程中心到车尾的距离，根据实际车体尺寸配置。
