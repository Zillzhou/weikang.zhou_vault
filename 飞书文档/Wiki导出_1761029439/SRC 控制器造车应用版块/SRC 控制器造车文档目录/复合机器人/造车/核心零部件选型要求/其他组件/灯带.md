# 灯带

## 灯带

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 适用范围

本文档针对“DMX512 灯带”的配置方法进行说明。
## 适用灯带 IC 的选型有：
## SM16512
## SM17512
## TM512AC
SM18512（ SRC2000 固件版本需要在 2.1.36 以上，SRC800 rbk 版本需要在 3.3.5.74 以上）
其余灯带 IC 未测试过，不推荐使用。

## 线束连接
### 更换氛围灯连接器，改为 TE DT06-4S 连接器：
## 氛围灯连接器官网链接

## 连接器 PIN *

## 线标

## 对应线束

## DT 0 6-4S PIN1

## 485 通信 A

## 灯带蓝线

## DT06-4S PIN2

## 电源

## 灯带红线

## DT06-4S PIN3

## 地

## 灯带黑线

## DT06-4S PIN4

## 485 通信 B

## 灯带绿线
注 1：灯带黄线不引出。
注 2：对接入 SRC-2000(S) 控制器的 TE35 连接线的 DT04-4P 连接器中。（线号为 17 、 29 、 25 、 10 ，分别为 RS485_N1 、 RS485_P1 、 GND 、 PWR_DO6 ）
## 模型配置
1710468752387-95d4fb31-d91a-4a42-b37b-0dc5e01cb959.png

## 电脑连接机器人后：
## 步骤①：点击模型文件
## 步骤②：点击左侧列表中 LED
## 步骤③：右侧点启用设备
步骤④：brand 里面选 WST-SM16512PS-DMX512，
## 参数配置说明

## Key

## Description

## Value

## Unit

## colorRed

## 红色的参数设置

## 范围（0,255）

## colorGreen

## 绿色的参数设置

## 范围（0,255）

## colorBlue

## 蓝色的参数设置

## 范围（0,255）

## colorWhite

## 白色的参数设置

## 范围（0,255）

## showCharging

## 是否显示充电效果

## 勾选则为显示充电效果，不勾选则为不显示

## showBattery

## 是否显示电池效果

## 勾选则为显示电池效果，不勾选则为不显示

## turnLeftFrontPos

## 左前转向灯组序号（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnLeftFrontNum

## 左后转向灯组数量（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnLeftRearPos

## 左后转向灯组序号（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnLeftRearNum

## 左后转向灯组数量（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnRightFrontPos

## 右前转向灯组序号（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnRightFrontNum

## 右前转向灯组数量（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnRightRearPos

## 右后转向灯组序号（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnRightRearNum

## 右后转向灯组数量（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## lightTotalNum

## 灯珠组数量（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## redChannel

## 红色灯带通道

### 默认通道顺序 RWGB：参数配置依次为 0、2、3、1

## greenChannel

## 绿色灯带通道

### 默认通道顺序 RWGB：参数配置依次为 0、2、3、1

## blueChannel

## 蓝色灯带通道

### 默认通道顺序 RWGB：参数配置依次为 0、2、3、1

## whiteChannel

## 白色灯带通道

### 默认通道顺序 RWGB：参数配置依次为 0、2、3、1

## isBackBreath

## 倒退是否白色呼吸

## 勾选则倒退是白色呼吸

1677577445836-e506d303-afeb-4c5a-bde2-cdee2210757e.png

1677577464877-7947690b-82eb-4eea-a05b-4c46939ce38e.png

## 测试
### 参数 DmxTestFlag 配为 true
1677577486260-4313441d-6646-4242-ad48-1cbfc8ce8b4b.png

## 参数配置

## 现版本名称

## 单位

## 默认

## 解释

## 支持版本

## DmxTestFlag

## ——

## false

## 选择 ture，可开启灯带测试

可以直接修改模型文件中 RGB 参数控制灯带发出对应颜色的光，可以参考网上 RGB 配色表进行调色验证。
1677577516312-cd7ff0a4-88c2-4e20-887a-fc475cf6f13e.png

## 灯带使用技巧
很多时候车上需要多段灯带，但控制器只能接一根灯带，如何处理？
灯带是基于 RS485 总线的设备，RS485 总线是可以串联的，我们用到的灯带是按节控制的，一节一般长度是 100mm，RBK 目前能控制的总节数是有上限的，当长度没法满足我们的布局，可以按 100mm 的整数倍长度（焊接处）将灯带剪断，再用导线连起来，分成多段来控制。
剪开灯带时，注意不要打乱原来整条中每段的顺序，每段灯带都有对应的地址！
1701135267301-3d9c497c-afe8-4e15-a219-cf54d6fb4e51.png

## 不同控制器 RBK 可控灯带长度限制：

## 控制器

## 灯带总节数

## 灯带亮灯长度总长

## SRC-2000

## 60

## 6m

## SRC-800/3000/880

## 20

## 2m
## 左右转向灯示意
剪开灯带时，注意不要打乱原来整条中每段的顺序，每段灯带都有对应的地址！
剪开灯带时，注意不要打乱原来整条中每段的顺序，每段灯带都有对应的地址！
剪开灯带时，注意不要打乱原来整条中每段的顺序，每段灯带都有对应的地址！ 
1677577545831-87e7859a-a54a-4bf4-aa97-9a0fbbb12ad1.png

## 常见问题 FAQ
## 出错报警：红色呼吸
## 急停：暗红色闪烁
## 被阻挡：粉紫色跑马灯
## 运动中：蓝色呼吸
## 充电中：橙黄色呼吸
### 电量低于 20%（可配置）: 暗红色跑马灯同时伴随蜂鸣器响
静止状态：显示电量，从绿色 （100%）至暗红色 （20%）渐变
### 电池类型未配置（或电池通讯出错）且机器人静止：彩虹灯带

以上顺序即为氛围灯显示的优先级，即出错报警优先于急停显示。高优先级的条件满足后即显示相应的灯带效果，并且不再对低优先级的条件进行判断。每次更新的时间间隔约为 300ms 。

## 配置验证
## 灯带通电后
## 观察灯带颜色
车体待机状态灯带应该为呼吸灯，灯带颜色和电量相关，绿色代表 80%以上，黄色代表 40%以下
导航过程中，阻挡车体，灯带应该会出现短频闪烁；
按下急停，灯带会出现高频闪烁；
