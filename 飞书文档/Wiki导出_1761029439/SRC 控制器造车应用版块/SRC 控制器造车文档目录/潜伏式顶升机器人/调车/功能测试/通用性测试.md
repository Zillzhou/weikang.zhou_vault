# 通用性测试

## 通用性测试

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.3.15

## 初版

## 使用中

## V1.1

### 2024.4.09

## 修改编号

## 使用中

## RBK功能激活检查
在 Roboshop首页找到想要查看的机器人，打开高级配置界面，点击【版本信息】，查看RBK是否已激活功能【rbk_diff、rbk_roaming、rbk_laser_loc、rbk_script、rbk_reflector、rbk_tagrecognize】，如果缺少请找相关人员开通。
1710123737571-14593d29-d90a-4cd1-82e2-fc3bf8ead843.png

## 平动测试
a）首先完成激光slam建图，把车体位置摆正在地图合适区域； 
b）在车体当前合适位置的地面做好标记点一，然后在标记点一的正前方3m处的地面标记好标记点二； 
c）在roboshop上通过平动功能下发3m的移动距离，速度为额定速度，实际到点后再在车体同一位置的地面做好标记点三； 
d）测量标记点三距离标记点二的距离x，x≤1cm，测试至少3次数据（里程模式测量三次）。
## 原地转动测试
## 差速模型：
a）在驱动轮中心位置的地面做好两个标记点； 
b）通过roboshop转动功能下发转动360°，角速度为额定角速度，旋转完成后再在驱动轮中心位置的地面做好两个标记点； 
c）分别将转动前的两个标记点和转动后的两个标记点连成线，得到两条直线，取两条直线的中点，以第一个点作为参考点测量转动后的点在机器人坐标系下x、y方向的偏差，x、y方向的偏差≤5mm，测试至少3次数据。
## 额定速度测试
GB_T 20721《自动导引车-通用技术条件》-条款5.2.2
a）额定速度测试是指重复数次测试通过直线上（根据默认最大速度及最大加、减速度确定加速区间）速度稳定那一点起5m以上区间的时间，以测定的时间、距离为基础计算额定速度，测试重复进行3次取平均值；
b）在空载、满载、前进、后退的工况下进行测试；
c）速度V（m/s）=L/T，其中，L表示区间距离米（m），T表示区间通过时间秒（s）；
d）实测速度V与roboshop运行状态界面显示的速度进行对比；
1709807298196-5e3771de-30d5-43da-9e8c-cd4cdb76af06.png 

## 操作步骤：
让机器人以自身所能达到的最大旋转速度运动，观察roboshop上实际速度是否为设置的旋转速度。
## 图片.png

## 地面适应性测试
### 移动机器人应能满足以下要求的地面上运行：
a）平面度：移动机器人运行应能通过平面度在1m²范围内不小于3mm的路面，应能实现可控的额定速度行驶；
b）坡度：移动机器人运行应能通过坡度不小于0.05的路面，应能实现可控的额定速度行驶。应能在路面坡度不小于0.01的停车点可靠停止；
c）台阶高度：移动机器人应能通过台阶高度不小于5mm的路面，应能实现可控的额定速度行驶；
d）沟槽宽度：移动机器人应能通过沟槽宽度不小于8mm的路面，应能实现可控的额定速度行驶。
## 操作步骤：
在机器人设计要求的地面场地上（比如：环氧地面，水泥地面），控制移动机器人前进、后退、转弯、侧移、自旋,观查机器人在空载/满载情况下能正常移动，无明显打滑现象。
机械机构，硬件有无明显噪音。
## 负载测试
## 静载测试
加载1.25倍额定负载进行静态测试，测试时间15min，不得出现肉眼可见的塑性变形或破坏。
## 动载测试
在正常环境中，按要求加载额定负载，测试移动机器人运动控制（例如：启动、停止、急停、加减速等）、执行机构动作等。
## 刹车距离测试
## 避障刹车距离测试
a）保证参数ObsDecDist、load_ObsDecDist、ObsStopDist、load_ObsStopDist的值为默认值（测试结果需要标注具体数值），在空载和满载的工况下以最大速度进行测试；
b）在跑道一端摆放标准的检测障碍物，车辆在跑道上加速至最高车速并保持直至到达指示线（指示线与障碍物之间的距离为 ObsDecDist-空载/load_ObsDecDist-负载 的参数值）检测到障碍物后开始制动，待完全停止后测量制动距离（指示线距离小车的距离）；
c）测试三次，取试验结果三次中的最大值。若前进和后退速度不一致或者质量分布不均匀则前进和后退方向需分别测试。

## 空载

## ObsDecDist

## ObsStopDist

## 速度

## 刹车距离

## 前进

## 后退

## 满载

## load_ObsDecDist

## load_ObsStopDist

## 速度

## 刹车距离

## 前进

## 后退

## 紧急刹车距离测试
a）保证参数ObsDecDist、load_ObsDecDist值为0，参数ObsStopDist、load_ObsStopDist为默认值（测试结果需要标注具体数值），参数EmergencyStopDist需保持与ObsStopDist、load_ObsStopDist一致。在空载和满载的工况下以最大速度进行测试；
b）在跑道一端摆放标准的检测障碍物，车辆在跑道上加速至最高车速并保持直至到达指示线（指示线与障碍物之间的距离为 ObsStopDist-空载/load_ObsStopDist-负载 参数值）检测到障碍物后开始制动，待完全停止后测量制动距离（指示线距离小车的距离）；
c）测试三次，取试验结果三次中的最大值。若前进和后退速度不一致或者质量分布不均匀则前进和后退方向需分别测试。

## 空载

## ObsStopDist

## EmergencyStopDist

## 速度

## 刹车距离

## 前进

## 后退

## 满载

## load_ObsStopDist

## EmergencyStopDist

## 速度

## 刹车距离

## 前进

## 后退

## 前后避障测试
a）保证参数ObsDecDist、load_ObsDecDist、ObsStopDist、load_ObsStopDist的值为默认值（测试结果需要标注具体数值），在空载和满载的工况下以最大速度进行测试；
b）在跑道一端摆放标准的检测障碍物，车辆在跑道上加速至最高车速并保持直至到达指示线（指示线与障碍物之间的距离为 ObsDecDist-空载/load_ObsDecDist-负载 的参数值）检测到障碍物后开始制动，待完全停止后测量避障距离（小车距离障碍物距离）；
c）测试三次，取试验结果三次中的最大值。若前进和后退速度不一致或者质量分布不均匀则前进和后退方向需分别测试。

## 空载

## ObsDecDist

## ObsStopDist

## 速度

## 避障距离

## 前进

## 后退

## 满载

## load_ObsDecDist

## load_ObsStopDist

## 速度

## 避障距离

## 前进

## 后退

## 侧边避障测试
### d）车体膨胀宽度以默认参数为准，测量以下数据：

## 空载

## 最大速度

## ObsExpansion

## DecObsExpansion

## 1.当车体运行在路径中左右间隔＜ mm时，车体被阻挡不能通行；
### 2.当车体运行在路径中左右间隔≥ mm且＜ mm时，车体可以减速通过设置的场景，而不会阻挡；
### 3.当车体运行在路径中左右间隔≥ mm时，车体能够以最大速度行驶，过程中不出现减速以及停止等现象。

## 满载

## 最大速度

## Load_ObsExpansion

### Load_DecObsExpansion

## 1.当车体运行在路径中左右间隔＜ mm时，车体被阻挡不能通行；
### 2.当车体运行在路径中左右间隔≥ mm且＜ mm时，车体可以减速通过设置的场景，而不会阻挡；
### 3.当车体运行在路径中左右间隔≥ mm时，车体能够以最大速度行驶，过程中不出现减速以及停止等现象。

## 底盘车体重复到位精度测试方法
## 环境要求
四周有明确的墙体或者障碍物，不会导致激光看到很远的地方。
需要准备出来的测试场地面积建议至少10m*10m。
室内测试车辆窗户遮阳处理。
机器人工作环境（温度、湿度等）：符合产品要求。
## 测试所需工具
## 多色打点笔
## 卷尺、直尺
## 二维码标签
## 红外打点器
## 测试前的准备工作
机器人标定项已完成。
检查激光视角无机器人机构干涉，测试环境无打地情况。
## 建图和测试要求
移动机器人现有运动车型激光导航测试直行，倒走，左转，右转重复到点精度建图应用。
至少需要6m*6m的测试空间。
完成测试区域的扫图工作。
连接线型：高阶3阶贝塞尔曲线。
连接线LM1->LM4, LM1->LM5, LM1->LM8 方向都是正走。
连接线LM4->LM1, LM5->LM1, LM8->LM1 方向都是倒走。
连接线LM2->LM1长度1m。
LM1原地旋转90°向下倒走，新增1个站点，连接线长度1m。
连接线LM2->LM4,LM2->LM5最小曲率半径1m。
## 最小通行宽度
## 设置车体运行路径场景如下：
a）路宽以车体运行在路径正中间为基准，左右设置可移动型障碍物，保证设置车体运行在路径中左右间距相等；
## b） 路径包含直行与转弯场景?
### c）车体运行速度为空载速度与满载速度。?
## 空载：
## maxspeed:0.3m/s
## ObsExpansion:0m
## DecObsExpansion:0m
## 满载：
### load_maxspeed:0.3m/s
### load_ObsExpansion:0m
### load_DecObsExpansion:0m
### 可持续老化24小时，观察机器人的行驶精度
## 噪声测试
a）硬质地面，平坦光滑，无坑洼，保证移动机器人在地面上移动不产生附加噪音；
b）测量A计权声压级和测量背景噪声A计权声压级的差值不小于10dB（A），并保证测量不被偶然的其他声源所干扰；
c）应使用满足GB_T 3785.1《电声学 声级计 第1部分：规范》中规定的性能为2级或以上的噪音分析系统，或其他性能相当的测试仪器（如声级计）。
## 噪声检查方法
## 基准体
宜选择包络移动机器人的最小矩形六面体为基准体。
## 测试点
a）噪声测试点：测试点距离基准体1m（d=1m），参见图中1、2、3、4点。
1710409239817-6e066afd-cdc5-47bb-8a2d-a927948af0d6.png 

## 测试点布置图
b）以机器人在直线轨迹的中点位置进行布置测试传声器，测试点位分布在机器人左、右距离基准体边界1m处的包络面上的1/3及2/3的位置。
## 测试点高度：
（L3+1）/2＞1.5m时，测试高度采用1.5m;
(L3+1）/2≤1.5m时，测试高度采用(L3+1）/2m。
## 测试方法
a）按测试点布置图所示，在移动机器人运行方向的两侧至少设置4个测试点；
b）在测试开始之前，采集测试点至少30秒的背景噪音值，确认背景噪声值小于65dB（A）；
c）设定其测试状态的运行轨迹为直线运行，长度为3m（机器人直线运行轨迹示意图如下图），且直线运行轨迹的任意点距离最近的墙壁大于1m；
d）机器人从起点移动到终点，再从终点倒退至起点为一个移动行程，不具备倒退功能的机器人可不测倒退模式下的噪声；
e）移动机器人空载以额定速度移动4个行程，每个移动行程测试1个点，按照测量包络面上左、右1/3及2/3位置顺序依次进行测试。4个行程为一个周期（如果具备布置2个或者4个传声器的条件，可在2个或1个运动行程中，直接测试出机器人包络面上左、右1/3及2/3位置的噪声值）。
1710409239751-7a135688-47ac-4209-9a04-9a5699fe733a.png 

## 机器人直线运行轨迹示意图
## 测试结果
所有测试点最大噪声值的平均值即为所需测试结果，要求移动机器人工作过程中所产生的噪音≤75dB（数值参考GBZ_T 189.8《工作场所物理因素测量 第8部分：噪声》，测试点位置参考GB_T 37242《机器人噪声试验方法》）。
## 简易测试方法
a）测试地面要求：硬质地面，平坦光滑，无坑洼，机器人移动不产生附加噪声；
## b）测试运行条件：
## 1. 正常工作状态
### 2. 当有负载要求时，应在额定负载的状态下进行测试
### 3. 应正常运行至少3min后进行测试
### 4. 环境噪音低于30dB
c）测试方法：在距离地面高1米，水平距离0.7米的位置测试机器人工作过程中(负载最大速度1.5m/s运行)所产生的噪音≤75dB.
## 音频测试

## 测试标题

## 操作步骤

## 预期结果

## 修改备注

## 测试结果

## 测试结论

## 附件

## 基本功能

## 1.Roboshop上传WAV 标准音频文件，点击播放音频

## 1.语音播报器播放指定音频

## 状态功能

## 1.控制AGV进行如下条件下的测试，观察机器人播放音频
左转，右转，导航前进，倒走，被阻挡，低电压，错误，碰撞条，使用指定错误码音频

## 1 .播放对应音频

## 脚本指定
## 音频功能

## 1.机构python 脚本执行,参数写一个音频的名称，观察结果
### 2.路径导航执行该脚本，参数写一个音频的名称，观察结果

## 1 .单独执行可以播放对应音频
### 2.路径导航到点执行播放音频

## 音频音量

## 1.在环境噪音低于30dB,播放音频，使用分贝仪站在1m以内的位置上测试

## 1.音频能达到80dB

## 充电测试
## 手动充电
使用手动充电器直接连接机器人的手动充电口（航空插头），观察充电器是否显示正常电压、电流输入以及Roboshop运行监控界面是否是显示正常充电状态。
## 自动充电
通过Roboshop软件设置机器人自动充电任务， 使用反光板识别验证车体自动充电功能 ，观察Roboshop运行监控界面是否是显示正常充电状态（输入电流是否为正值，充电按钮是否显示等）。
## 开关机测试

## 测试标题

## 操作步骤

## 预期结果

## 正常开机

## 1.拧动电池钥匙开关从关到开，观察机器人表现
### 2.在电池上电后，按下开机键，1s后松开，观察机器人表现

## 1.听到“滴”的上电声，部分由电池直接供能的部件上电显示。
### 2.开机灯上电点亮。数十秒后RBK启动完成，机器人无报错，蜂鸣器不会一直啸叫。

## 正常关机

## 1.在机器人长按开关机键10s以上，然后松开，观察移动机器人表现

## 1.10s内移动机器人未关机，松开后，移动机器人迅速关机

## 开机过程异常测试
## （电机带抱闸的无法测试）

## 1.在开机过程中，推动机器人移动至电机使能无法被推动，观察机器人表现

## 1.机器人在rbk 启动完成后无报错。
### 2.机器人未出现异常现象出现。

## 开关机老化测试

## 1.反复按开关机键开关机30次，观察移动机器人反应

## 1.机器人RBK启动完成，机器人无报错，蜂鸣器不会一直啸叫。

## 软重启老化测试

## 1.软件执行机器人重启300次，观察移动机器人

## 1.机器人RBK启动完成，机器人无报错，蜂鸣器不会一直啸叫。
## 开环运动检查
手动控制（Roboshop手动控制、其他外部手动控制装置）机器人进行前后左右移动，查看机器人运动是否平稳、有无卡顿、大幅度跑偏等情况。
## 车体 DI 、 DO 功能检查
根据车体实际I/O接线表验证各个DI、DO对应功能。
## 灯带测试
根据灯带逻辑确认不同状态下机器人灯带显示的颜色，是否与下图规定一致：
1709808187702-5cbedc7f-d456-46f9-a292-a010172d8d80.png

## 默认的氛围灯及显示效果为：
## 机器人出错报警：红色呼吸
## 机器人急停：暗红色闪烁
## 机器人被阻挡：粉紫色跑马灯
机器人转向中：橙黄色闪烁（根据实际数量及方向：1.向前左转、右后退，左灯带橙黄色闪烁，右灯带未点亮；2.向前右转、左后退，右灯带橙黄色闪烁，左灯带未点亮；3.原地旋转，左右灯带同时橙黄色闪烁）
## 机器人直行倒车：白色呼吸
## 机器人直行中：蓝色呼吸
## 机器人充电中：橙黄色呼吸
## 机器人低电量模式：暗红色跑马灯
机器人静止状态：显示电量，从绿色（剩余电量 100% ）至暗红色（剩余电量 10% ）渐变
### 电池类型未配置（或电池通讯出错）且机器人静止：彩虹灯带
## 老化测试
a）建立地图，在地图中增加正走、倒走、转向、自动充电、直线行驶、顶升、随动动作等元素；
b）加载额定负载，将机器人在此循环中持续运行24h，观察持续运行期间小车有无报错；
c）检查log，若24h 持续测试中途由于报错、故障被打断，则重新开始 24h 老化测试。
## 驱动器看门狗
控制机器人转向电机转向，在电机转向时此时断开驱动器通讯CAN,查看转向电机是否继续转向，是否报错
控制机器人行走电机直行，在行走时此时断开驱动器通讯CAN,查看行走电机是否继续行走
控制机器人货叉电机上升或者下降，在上升或者下降中断开驱动器通讯CAN,查看货叉电机是否继续上升或者下降
## 安全（ce）调试（若有）
潜伏顶升车当前无包含Ce相关内容，若有造车需求，可以参照ce测试项（ISO 3691-4）。
## 整车运行调试
## 测试路径规划要求
根据使用条件和现场环境，设计移动机器人的行驶路径，并确定充电系统（充电桩）、外围设备、现场操作站等的位置。应充分考虑车体尺寸、驱动方式、执行机构动作方式及运行环境条件等，确保移动机器人在运行时，与周边的物体无干涉现象发生。在路径设计中应该考虑以下因素： 
a）停靠点（PP）、充点电（CP）、动作点（AP）、途经点（LM）； 
b）操作站台、充电桩、外围设备等； 
c）运行速度； 
d）公共区域、限制区域、危险区域划分。
