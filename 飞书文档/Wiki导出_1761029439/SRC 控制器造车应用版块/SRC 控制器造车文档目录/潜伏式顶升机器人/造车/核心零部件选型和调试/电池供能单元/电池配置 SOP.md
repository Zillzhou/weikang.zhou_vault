# 电池配置 SOP

## 电池配置 SOP

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.2.15

## 初版

## 使用中

## 选型说明
本应用示例选用电池：TB4840F-WwPrivate RS485 19200 Modbus 拓邦（TB4840F）
1711089263544-6d301b33-531f-42de-afaf-7e95a9744ae6.png 

## 模型文件配置
1）连接机器——【模型文件】——【battery】——参数配置
1711015577169-eb4468bc-fcf2-49c0-9be7-ecd7596e8c8c.png 

## 图片.png

## 参数名称

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## lowVoltage

## V

## -1

### 用于电池最低电压报警阈值。-1默认不启用

### temperatureThreshold

## 温度报警限制，-1默认不启用

## warningPercentage

### 电池告警百分比，用于指示电池低电量告警阈值

## errorPercentage

### 电池错误百分比，用于指示电池电量低于多少进行报错

## shutdownPercentage

## 关掉电池百分比，默认-1，不启用

## timeoutThrowError

## s

### 电池超时报错时间，请根据实际情况进行配置

## chargeCounter

## 0

连续多少次判定为充电，默认为0，表示不启用，检测计数每秒1次

## quantityFilter

## %

## 滤波

## shutdownStillTime

## s

## 关闭电池等待时间

## fullPercentage

## %

### 电池充满百分比，用于设置电池充电最大百分比

2）基础信息按照实际配置填写。
1711088629789-9b9d0fe4-2fca-4441-b5fc-f920d8d9b8f6.png

## 3）型号
1711088660128-b8829a14-e89e-406b-a618-edbaeef53263.png

按照实际型号选择，若其中无电池型号，只要有电池通讯协议，即可通过脚本实现电池穿透。
【通用脚本】——【电池穿透脚本】（写作可咨询交付工程师）——模型文件根据电池通讯类型配置如下：
1711088813074-3934d44d-1dfb-448c-83aa-bdad4e50fee6.png

### 在脚本名称处，填写 已编写完成的电池穿透脚本名称即可
1711088879887-f08276d2-2dd7-4d29-96b4-5e9dcb7cc154.png

## 4）串口配置：

注意事项： SRC-880控制器造车电池采用485串口通讯，在模型文件配置时请注意：
SRC800和SRC880在模型文件中串口名称不一致，SRC800 在配置时，其“devname” 均为“/dev/ttyUart ”（数字以接口定义中实际使用的485口接线为准） ；SRC880控制器配置时“devname” 变更为“/dev/ttyS ”
1711088922201-20fdf0e5-19e2-4db0-9c24-e13dfa34e550.png

## SRC-880造车PGV串口配置：
1710904938476-8880e3f9-ae15-420c-8197-860deca0a6b6.jpeg

注意事项： SRC-880控制器造车灯带采用485串口通讯，在模型文件配置时请注意：
SRC800和SRC880在模型文件中串口名称不一致，SRC800 在配置时，其“devname” 均为“/dev/ttyUart ”（数字以接口定义中实际使用的485口接线为准） ；SRC880控制器配置时“devname” 变更为“/dev/ttyS ”
1711088173017-085ea216-0292-42d1-ba91-442282904e66.png

## SRC-880造车PGV串口配置：
1711088975066-5a381e9f-2e0f-467a-97a0-c07ba72ec4cf.png

## 功能验证
## 1）能正常开机，且指示灯显示正常：
1711015766547-fbcb9f6f-5cf3-4bdd-86d3-e6292d023f25.jpeg

2）【运行状态】——【状态信息】界面可正常显示当前电池电量、电流、电压等信息。
1711015736583-c749ea65-db40-4baa-9dd6-0f11a36ed580.png
