# 激光 

## 激光

## 装配工艺要求
a）在安装激光之前，需要对照清单确认物料是否符合要求；
b）激光的激光头需要固定在车体上或者设备支架上，一般采用螺钉或吸盘等方式进行固定，要保证固定牢固确保激光设备不会发生震动影响激光的性能，紧固部件锁紧力矩符合附录D螺丝锁紧扭力要求，紧固处有划线标志。固定时需要注意确保激光头的水平度和垂直度，以确保激光束的精度和稳定性；
c）激光安装要保证水平，前后以及左右需要保证在±0.1度以内角度误差，前提是车子自身是出于相对水平的状态；
d）激光安装时，激光发射面到外壳保证一定的高度，防止激光照射外壳（要求高度≥2mm）；
1707213340608-38b2300c-5ee2-47c1-a72b-bba990be5f1a.png 

e）将激光的电源线和信号线与设备连接，注意接线的正确性和可靠性，以确保设备的正常运行。
## 调试工艺要求
a）安装完成后，需要对激光导航与避障进行调试和测试，以确保其正常运行和精度。需要重点检查激光束的稳定性、障碍物检测的灵敏度、点云轨迹的准确性等；
b）激光调试主要分为激光上位机软件调试与Roboshop模型文件的配置，主要注意以下几点：
激光的上位机软件调试需要将激光的出厂IP地址修改为192.168.192.100，子网掩码配置为255.255.255.0，路由器（网关）配置为：192.168.192.1（若机器人使用双激光，则第二个激光的IP需设置为192.168.192.101，以此类推，子网掩码与网关参数不变）。
Roboshop模型文件的配置需要根据机器人坐标系确定车体的原点位置，然后将激光实际安装位置基于机器人坐标系的基础下填写至激光的模型文件，通过minAngle、maxAngle两个参数确定激光的检测区域。
激光的上位机软件中设置的激光IP地址和端口要与模型文件中配置的激光IP地址和端口保证一致，才能使得激光与控制器能够正常通讯。
c）导航激光需保证调试完成后建图无重影、轮廓清晰，无扭曲变形等现象，无多余噪点，激光点云与车体内部无干涉现象；
d）避障激光需要保证调试完成后激光点云反馈正确，无多余噪点，激光点云与车体内部无干涉现象。
## 激光特性及使用限制说明
## 噪声
激光的噪声是由激光测量的原理造成的，激光测距的时候发射出去的是一个光斑，光斑通常是固定发散角的，因此测量距离越远，在远处形成的光斑越大。如果一个光斑发射出去同时一半照射在前面的物体，一半照射在后面的物体，并且返回的能量都很高，这里测量的距离就会有问题，就产生了通常的激光噪声。
因此通常当背景物体反射率比较高，前景物体靠近背景物体时，在前景物体的边缘处容易产生激光噪声。如下图：
UqazbtCbyoYBVaxd0x9cDHJLnqh.png

## 有效距离
激光正常运行时的有效距离为 0.1m~40m（H1），因此当激光非常靠近物体时，激光的数据可能并不准确，因此在使用时不应将激光特别靠近墙面或其他物体（需要至少留出 10cm 空间）。
## 反射率
激光的反射率通常是跟激光返回的能量强度相关的，因此对于反射率高的物体（反光板）会有较高的反射率，对于普通的物体反射率都比较低。通常我们将反射率归一化至0~255，0为最低反射率，255为最高反射率。一般物体的反射率小于150，专用钻石级反光板的反射率大于200。通过 Roboshop 上的激光点颜色就可以知道某个激光点的反射率，如下图：
J8FebPFldoOVqSxgkSWc7nqJn8e.png

因此，如果环境中充斥着高反射率的物体，可能会对需要识别反光板的相关应用造成影响。
## 黑色物体
对于反射率在10%的黑色物体，激光的有效测量距离是 0.1m~10m。对于反射率更低的黑色物体，激光就有可能不能识别到或者测量的距离不准确。因此，如果环境中充斥着低反射率的黑色物体，机器人可能无法构建精准的环境地图，从而无法稳定且精准的导航。
## 镜面反射物体
由于激光测量是跟根据接收反射回来的激光计算距离，因此各种不同材质的物体会对激光测量产生不同的影响，对于自然物体的材质表面，只要是漫反射均匀的，激光照射到该物体表面的噪声就比较小，测量精度较高。表面光滑的，主要是镜面反射的物体，测量噪声就会比较大，测量精度会下降。因此，如果环境中充斥着镜面反射物体，机器人可能无法构建精准的环境地图，从而无法稳定且精准的导航。
## 激光互相之间的干扰
一般激光在设计的时候通常都做了多激光干扰的防护，避免产生相互干扰，但是激光厂商推荐在使用多激光时使用下面这种安装方式来完全避免它们之间的相互干扰。通过增加激光安装的倾斜角来消除激光之间的干扰，对于激光 SLAM 的应用，应该把倾角朝上，而不是朝下。
Ke3obPscEoEQCexlV9OcTh07nod.png

## 强光的影响
通常室内用激光的环境光抗扰度约为40klux ~ 80klux，一般室内的光照强度都小于这个数值，因此室内的光照对激光不会产生影响，但需要尽量避免阳光直射。对于室外的应用，请选用室外专用的激光，如西克LMS系列。
## 环境变动对激光SLAM的影响
激光SLAM的原理是通过激光雷达扫描环境的轮廓从而构建环境的点云地图，然后依据已构建好的点云地图与激光扫描到的实时点云做匹配来进行定位导航的。因此，如果地图构建后环境轮廓发生较大的改变（>30%），机器人可能无法达到预期的高精度，如果环境轮廓发生更大的变化（>60%），机器人可能出现偏离路径甚至定位丢失的情况。所以，对于需要在环境经常发生较大改变的场景中使用激光 SLAM，请考虑增加其他辅助措施，如启用在线SLAM、部署反光板或二维码等。
