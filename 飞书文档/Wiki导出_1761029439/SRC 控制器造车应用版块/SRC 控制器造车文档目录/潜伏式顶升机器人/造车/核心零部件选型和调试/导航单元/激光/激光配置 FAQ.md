# 激光配置 FAQ 

## 激光配置 FAQ

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2023.12.4

## 初版

## 使用中

### （ 表格功能说明：需要明确文档全生命周期迭代进程 ）
## 问答：
导航激光扫射高度定义是什么？是否需要考虑制造组装零件加工的误差？
## 解答：
1653221435753-f00b8b05-e506-4365-abc6-7f9e30445354.png

如图，单线激光雷达通过发射一根激光束并通过电机旋转使其能够在旋转的平面内扫描。激光雷达的扫射高度就是指这个发射激光束的管道所处的高度，同时要注意管道是否水平，如果不水平，那么扫描出来的平面也是不水平的。
在安装的时候，需要注意将激光雷达水平安装。在保证不会扫描到地面的前提下将激光雷达尽量安装水平，否则会影响到标定的结果已经定位的误差。
## 激光能识别的上下高度范围是多少？
## 解答：
激光雷达是一种典型的束波型传感器，扫描的射线呈束波状，打到物体上是一个光斑，并且距离越远，光斑越大。激光光斑的大小和激光雷达的制造工艺相关，一般来说在10m处光斑的大小可以达到7cm半径的圆。此外还要考虑到同一个光斑打到不同物体上所形成的拖尾。
## 激光雷达通讯问题如何排查
## 解答：
## 激光连接异常主要可以分为两个方向：
## 激光初始化失败
### 激光初始化失败需要从以下几个方向来排查：
激光雷达是否上电正常；
激光雷达的IP以及端口号；
激光雷达与控制器是否连接正常；
常见报错码： Error52100，连接不上激光或者激光雷达初始化失败。
## 激光收不到收据
激光雷达接收不到数据表示激光雷达在正常接收数据的过程中突然接收不到数据，需要从以下几个方向来排查：
激光雷达是否正常上电工作；
网口是否松动；
如果是sick nanoscan3型号激光，是否会报错误码 Error52097，该问题为激光雷达内部错误；
如果是欧蕾激光，是否会报错误码 Error52096，该问题为激光雷达内部错误；
常见报错码： Error52103，控制器接收不到激光雷达数据。
## 激光雷达有噪点如何排查修复
在机器人运行过程中，偶发激光雷达出现噪点导致机器人减速甚至停顿，应该如何解决这种问题？
针对这种情况，通常需要从以下几个方面，具体可以查看 排查手册 ：
检查激光雷达当前配置的角度范围是否合适，会不会存在和本体存在干涉，或者激光保护罩设计是不是不合理，挡住了激光的窗罩，这种在运行的时候激光会偶尔打到本体或者保护罩引起误误触发；
检查激光表面是否存在污渍，需要用无纺布对激光表面擦拭，保证没有东西引起误触发；
如果存在某些固定角度的地方存在误触发，可以对该角度进行扣除，具体可以看 点云扣除 ；
如果是 欧蕾激光 有噪点，可以尝试更新到 3.3.5.X 的最新版本，修复了欧蕾激光由于上传数据不完整导致的噪点问题。
## 激光雷达手册中的精度如何理解
激光雷达的绝对精度和重复精度分别会影响到什么？激光雷达选型的时候如何评估这两个参数？
激光雷达的绝对精度表明激光测量距离的准确性，会影响实际建图的精度和精细程度，重复精度会影响实际激光定位的重复精度。选型的时候更看重重复精度，当然绝对精度也是考虑因素之一，可以查看 激光雷达性能参数
## 报警码
## 激光的现场实施问题处理

## 激光问题处理方法
## 激光对光线的要求如何量化
激光对光线有一定的要求，这个要求有没有标准,单线激光能受光照影响度如何进行判断:
单线激光雷达的工作原理是发射器在激光雷达内部进行匀速的旋转，每旋转一个小角度（称之为角分辨率）即发射一次激光，轮巡一定的角度后，就生成了一帧完整的数据。但也意味着单线激光雷达只能识别同一高度一排点阵，只能描述线状信息，无法描述面以及高度。下图为扫描的原理图：
1651804081406-ee248b90-4e08-409f-a424-097300112108.png

仙工智能定义激光雷达正前方为 0° 角，如果激光雷达为 270°，则有效测量角度为 -135° 到 135°；如果激光雷达为 360°，则有效测量角度为 -180°到180°。激光雷达一般以逆时针旋转。
1651806184320-cfe4c0fc-ff3b-40dd-8fe1-78fed5bea705.png

### 从上段话的描述以及原理图中，有几个定义需要描述一下：

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## upside

## 模型文件-laser

## —

## true

## —

## —

### 3.3.4.20~latest

### 正向安装；（勾选后表示激光正常安装，不勾选表示激光倒装）

## minAngle

## 模型文件-laser

## °

## 0

## -180

## 180

### 3.3.4.20~latest

最小有效角度；有些情况激光雷达会存在遮挡，这个时候需要人为设置一下最小测量角度。

## maxAngle

## 模型文件-laser

## °

## 0

## -180

## 180

### 3.3.4.20~latest

最大有效角度；有些情况激光雷达会存在遮挡，这个时候需要人为设置一下最大测量角度。

## step

## 模型文件-laser

## °

## 0

## 0

## 5

### 3.3.4.20~latest

角分辨率；表示激光雷达在单帧扫描过程中每两根扫描线之间的夹角

激光入射到大多数表面时，会在所有方向上以漫反射的形式使雷达接收到回波信号。反射能力越强，雷达就越容易接收到回波信号。激光的反射特性将随着表面材料、结构和颜色的变化而变化。相对于反射率低的表面，反射率高的表面可以更好的被检测到。下面列举几种常见物体的反射率。其中，3M 反光贴在实际场景中经常被使用到，如识别钻货架、识别充电桩、甚至是反光柱定位等，具体原理和使用请参考 识别章节 。

## 材料名称

## 反射率

## 黑色布料 、橡胶

## 3%

## 不透明褐黑色塑料

## 14%

## 干净粗木板

## 20%

## 包装箱硬纸板

## 68%

## 人的手掌心

## 75%

## 不透明白色塑料

## 87%

## 白墙

## 90%

## 光泽浅色金属表面

## 150%

## 3M 反光贴

## 200%
仙工智能将物体的强度值设置为 0-255 之间，通过设置阈值，大于阈值的强度值对应的扫描点被称为高反点。
### 通过修改下列的参数可以设置激光雷达的最小有效扫描距离：

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## minValidRange

## 模型文件-laser

## m

## 0

## 0

## 99

### 3.3.5.20~latest

## 最小的有效探测距离

具体可以参见不同型号激光抗光强度。
仙工智能提供多种品牌、多种型号的单线激光雷达供客户选择使用，不同的激光雷达在性能参数上有些许的不同，下面是仙工智能已经适配的激光雷达型号以及对应的性能参数：

## 型号

## 探测距离

## 扫描角度

## 角分辨率

## 扫描频率

## 抗环境光强度

## 旋转方向

## P+F R2000 30M HD

### 0.1m-10m (反射率 10%)
### 0.1m-30m (反射率 90%)

## 360°

### 0.042°

## 10-50hz

## <800000Lux

## 逆时针

## P+F R2000 25M SD

### 0.1m-10m (反射率 10%)
### 0.1m-25m (反射率 90%)

## 360°

### 0.05

## 10-30hz

## <800000Lux

## 逆时针

## P+F R2000 60M SD

### 0.1m-20m (反射率 10%)
### 0.1m-60m (反射率 90%)

## 360°

### 0.05

## 10-30hz

## <800000Lux

## SICK NanoScan3

### 0.1m-40m

## 275°

### 0.17°

## 33hz

## ≤40000Lux

## 逆时针

## 富锐R200

### 0.1m-10m (反射率 10%)
### 0.1m-30m (反射率 70%)
### 0.1m-40m (反射率 90%)

## 360°

### 0.1°

## 30hz

## ≤40000Lux

## 逆时针

## 富锐C200

### 0.05m-10m (反射率 10%)
### 0.05m-25m (反射率 90%)

## 270°

### 0.33°

## 15hz/25hz

## ≥40000Lux

## 逆时针

## 富锐H100

### 0.1m-10m (反射率 10%)
### 0.1m-30m (反射率 90%)

## 270°

### 0.05°/0.1°

## 15hz/30hz

## ≥40000Lux

## 逆时针

## 蓝海LDS-50C-C30E

### 0.1m-12m (反射率 10%)
### 0.1m-40m (反射率 90%)

## 360°

### 0.2°/0.3°

## 10hz/15hz

## >800000Lux

## 顺时针

## 万集WLR-716

### 0.05m-8m (反射率 10%)
### 0.05m-25m (反射率 90%)

## 270°

### 0.33°

## 15hz

## <800000Lux

## 顺时针

## 万集WLR-718

### 0.1m-10m (反射率 90%)

## 270°

### 0.33°/1°

## 15hz

## <800000Lux

## 顺时针

## 科沃斯S50

### 0.1m-50m (反射率 80%)

## 360°

### 0.25°

## 10hz

## <100000Lux

## 逆时针

## 欧镭LR-1BS2

### 0.1m-8m (反射率 10%)
### 0.1m-10m (反射率 80%)

## 270°

### 0.225°

## 10-25hz

## <800000Lux

## 顺时针

## 欧镭LR-1BS5

### 0.1m-8m (反射率 10%)
### 0.1m-25m (反射率 80%)

## 270°

### 0.225°

## 10-25hz

## <800000Lux

## 顺时针

## 北阳UTM- 05LP

### 0.05m-12m (反射率 10%)
### 0.05m-30m (反射率 90%)

## 270°

### 0.25°

## 25hz

## >100000Lux

## 星秒 LS-20H

### 0.1m-8m (反射率 10%)
### 0.1m-20m (反射率 90%)

## 270°

### 0.08°/0.16°/0.32°

## 10-30 Hz

## ＞50,000 lux

## sick TIM301/240

### 0.1m-2m (反射率 10%)
### 0.1m-4m (反射率 90%)

## 270°

## 1°

## 15hz

## >800000Lux

## sick LMS 5XX

### 0.2m-40m (反射率 10%)
### 0.2m-80m (反射率 90%)

## 190°

### 0.042°-1°

## 25-100hz

## >70,000 lx

## sick LMS 1 XX

### 0.5m-18/30m (反射率 10%)
### 0.5m-20/40m (反射率 90%)

## 270°

### 0.25°-0.5°

## 25-50hz

## >40,000 lx

## 玩智商 EAI-TG30

### 0.05m-30m (反射率 80%)

## 360°

### 0.09°-0.13°

## 5-12hz

## 注意：
针对抗光强度，通常夏季太阳光直射强度在60000Lux~100000Lux之间，因此需要根据激光的抗光强度选用合适的激光用于室外场景应用。
## SRC 支持的多线激光选型是怎样的
SRC-2000选型手册里没有多线激光选型，实际我们是做过多线激光的叉车的，是用速腾聚创16线和32线激光吗？
是的，目前我们支持的多线激光主要是Velodyne和速腾，Velodyne是国外品牌价格比较贵，我们主推速腾

## 品牌

## 型号

## 基于 SLAM 技术的定位导航功能

## 速腾

## RS-LiDAR-16

### 16线/Fov 垂直 30°,水平 360°/150m

## √

## RS-Helios-16P

### 16线/Fov 垂直 30°,水平 360°/150m

## √

## RS-Helios-5515

32线/Fov 垂直 +15°~-55°,水平 360°/150m

## √
## SRC-2000 最多使用几个导航激光
可以支持2个3D激光或者2个2D激光，性能上没什么问题，只是导航激光多了也不好布局，最好就是斜对角布局。
SRC-800-Q 是否同时支持一台点云激光和一台 IO 激光
SRC-800-Q 目前是用在纯二维码导航，如果有需求的话，是否可以接1个点云避障激光,和1个 IO 避障激光?
目前SRC-800的算力只可以支持一个点云激光的运算，因为IO激光不需要用到算力，所以是可以支持的。
## 报警码
仙工智能在使用激光雷达的时候定义了一些报警码，以便在使用过程中出现问题通过报警码可以快速定位：
### 当激光雷达没有连接上时，会触发连接失败的报错，具体如下：
Error52100 can't connect with laser
### 提示： can't connect with laser
## 触发条件：
激光雷达未上电；
激光雷达故障；
激光雷达 ip 或者 port 不正确；
通讯线故障。
## 解决方式：
检查激光雷达的状态；
通讯线是否畅通；
检查 IP 和 port 是否设置正确。
### 当激光雷达出现接收不到数据，会触犯断联的报错，具体如下：
Error52103 cannot receive laser data from udp
提示： cannot receive laser data from udp
## 触发条件：
激光雷达未上电；
激光雷达故障；
激光雷达 ip 或者 port 不正确；
通讯线故障。
## 解决方式：
检查激光雷达的状态；
通讯线是否畅通、；
对于采用 UDP 传输的，需要检查 IP 和 port 是否设置正确。
当欧蕾激光雷达出现内部错误的时候，会触发内部错误的报错，具体如下：
### Error52096 欧蕾激光出现内部错误
提示： Interal error of olam laser
## 触发条件：
欧蕾激光出现内部错误。
## 解决方式：
检查欧蕾激光状态，重启欧蕾激光雷达。
当sick nano激光雷达出现内部报错的时候，会触发内部错误的报错，具体如下：
### Error52097 Sick Nano 激光出现内部错误
提示： please restart laser, get internal Error with Nanosick
## 触发条件：
Sick Nano 激光出现内部错误。
## 解决方式：
通过 Sick 的上位机软件 Sopas 软件连接激光雷达检查报错信息。
当sick nano激光雷达出现参数配置出错的时候，会触犯配置参数的报错，具体如下：
### Error52099 Sick Nano 激光参数配置错误
提示： Number of laser points is wrong, please reset output range in Sopas
## 触发条件：
Sick Nano 激光参数配置错误。
## 解决方式：
通过 Sick 的上位机软件 Sopas 软件修改对应的配置。
当sick nano激光雷达出现端口配置重复的时候，会触发端口重复报错，具体如下：
Error52098 同时使用两台 Sick Nano 激光，端口配置重复
提示： cannot connect sick nano laser with same port
## 触发条件：
同时使用两台 Sick Nano 激光，端口配置重复。
## 解决方式：
使用 Sick 的上位机软件 Sopas 修改激光雷达端口号，通常默认端口号为 6060，需要将其中一台激光端口号配置为 6061。

## 54071

please clean laser, get Contamination Error with Nanosick

## coding问题
## 触发激光阻挡整车直接断电
### 问题描述：跑老化过程中故意阻挡，整车断电
解决方法：更新最新电池固件后 最大速度1.5m/s 阻挡不会再触发整车断电

## 1000JS 开机时激光报错
问题描述：1000JS 开机时会因为激光还没完全起来，插件就去读取激光，所以会报错，通过在连线文件中增加插件之间启动的延时暂时解决。附件是修改后的连线文件
解决方法：在DSPChassis和MultiLaser间加6s的启动延时，确保DSPChassis先把各类DO打开，同时去掉3000

## W1500SL项目避障激光噪点问题
问题描述：sick TIM240后雷达在无遮挡的情况会扫到障碍物，确认激光表面无脏污
### 解决方法:sick售后处理，后续最好不要使用Tim240

## 四欧镭激光连接不间断挨个报警
问题描述：检查配置正常  但是四个激光同时启用 总会有一个报警  不固定是哪个激光都会出现问题的
解决方法：远程检查配置是没问题的 都有点云 然后启用4个没复现报警 。

## 激光没有点云数据
问题描述：激光没有点云数据， 激光上位机看也没有， 激光未报警  控制器也未报警， 存在安全隐患，需要确认我们是否有检测报错的手段
## 解决方法：激光寄回售后，升级rbk

## 升级之后转向报去使能急停，激光报超时
问题描述：升级之后sick nanoscan3报断连。
解决方法：veichi驱动器协议问题导致异常无法正常使用，建议客户更换步科

## 反光柱区域丢定位
问题描述：倍加福激光双激光地位 在反光柱区域运行会丢定位，反馈反光柱是扫图时自动添加的。看前激光标定数据0.024不知道是否有影响
## 解决方法：更新至3.4.5.46

## 富锐HI报警
解决方法：雷达运行中出现没数据情况了，下次问题复现时候检查下雷达有没有问题，可以参照该文档排查：
## 雷达问题排查方案【高于科】

## 长走廊3D建图是里程异常
问题描述：src2000 RBK3.4.5.44 速腾16线激光，双差速模组履带车，里程计和激光、controller都已经标定过，建图遇到长走廊时建图的距离与实际距离偏差很大
### 解决方法;参看文档：多线激光建图使用说明
## 多线激光建图

## 激光识别料架失败
## 问题描述：
### 测试期间车体识别钻货架识别失败，麻烦看下原因
## 1.修改识别文件根据roboshop上测得的尺寸，推送后无法识别成功
### 2.将其他同种车型可识别的识别文件导入到这台车中，也无法识别
解决方法;将此车参数save pictures when detecting改为false后，可正常生产使用

## 300L避障激光 点云数据异常
问题描述：300L 发到客户现场后，落地后检查，发现避障激光点云数据异常；测试后 点云会跟着车动而一起动，不像是打地。  尝试过很多次重新标定，问题一直还存在。 异常激光为 id2 右避障激光。
## 解决方法：更换激光

## 停障距离过长
问题描述：洗地机器人，富锐H100激光，停障距离过长，测试时默认停障检查1m的情况下，测试小车停障时撞到障碍物，修改为2m停障检测以后，小车停障距离仍有1m+,有较大的安全隐患，麻烦看看如何优化。
解决方法：使用34号脚本，各项功能正常，ControlTime改为默认值，1m的停障检测时，停障距离为10cm以内。
