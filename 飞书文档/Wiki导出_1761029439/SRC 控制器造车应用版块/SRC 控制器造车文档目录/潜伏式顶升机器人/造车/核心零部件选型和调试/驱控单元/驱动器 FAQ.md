# 驱动器 FAQ 

## 驱动器 FAQ

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.3.15

## 初版

## 使用中

## 前言
文中涉及到的其他详细说明或问题在附录中可以找到跳转链接，如驱动器行为表、驱动器
## 行走电机问题排查流程

在检查行走电机问题排查之前， 请先检查驱动器的配置是否正确 ，请参照附录 2《驱动器配置》中相关配置说明
核实机器人motor的实际参数，按照模型文件配置说明，检查 确认模型文件motor的配置是否正确
## 请参照附录 2 《motor参数说明》
1653882586747-7977e21e-99b5-448e-82e1-763253daa5b7.png

确认x，y配置是否按照机械原理图中标注的参数，如果此参数配置错误会导致机器人运动异常；
确认canID配置是否和驱动器内部设置是否正确，如果此参数配置错误会导致机器人报错：motor timeout；

确认motor的encoderLine （编码器线数）配置是否正确，如果此参数配置错误导致机器人平动数据异常；
## 例子：请查找附录 1-2
确认机器人的wheelRadius、reductionRatio配置是否正确，如果此参数配置错误导致机器人平动数据数据异常；
确认模型文件中的电机品牌以及机器人实际安装的驱动器品牌是否正确，如果此参数配置错误会导致机器人报错“motor timeout；
具体电机品牌和驱动器对照请参照模型文件配置说明。
## 进行平动转动测试
如1检查模型文件配置正确之后， 注意检查roboshop中有无机器人报错，若有报错，请 参照3报错情况分析 一章节所描述进行检查；若无报错，可进行平动转动测试，测试步骤如下：
2.1 机器人在地面上面设置一个参照位置，打开roboshop中平动转动，设置一个平动的距离和平动的速度（在平动距离里面不要有障碍物，注意车辆和人员安全，平动的速度请勿设置太大）。
a. 检查机器人在平动过程中的运动状态是否正常，如果发现行走电机抖动，车辆寸动的现象，请参照附录1-4 的解决办法，若为其他品牌的驱动器可按照4 检查驱动器的标准参数，检查电机的死区速度配置是否太大；
b. 检查机器人在平动过程中电机是否存在异响，如果发现行走电机异响，请参照附录1-5 的解决办法；
c. 检查roboshop上面是否有驱动器报错产生，若有请参照4 节所描述的方法解决；
d. 确保机器人在平动过程中自然、无异常情况出现；
e. 平动时车子走歪，删除标定数据后重新标定；
### 2.2 当机器人导航完成之后，用卷尺测量标记位置到机器人导航的距离记录为L；
2.3 如果测量的L值和通过roboshop下发的平动距离相同，则是正常；如果测量的L值和下发的平动距离不相同，请按照 1 中描述检查模型文件中的 encoderLine 、 wheelRadius、reductionRatio配置是否正确，核实清楚之后更新模型文件，进行2.1 、2.2 步骤的操作，验证参数是否正确。
### 3.  确定模型文件配置正确和平动转动测试正确，进行标定
## 标定过程参照附录 2《标定》
### 3.1 若是在标定过程中发生报错，检查控制报错情况，参照4 控制报错相关检查方法。
### 3.2 标定正常之后，可进行重复到位精度测试等流程。
### 4.  控制器报错
### 4.1 检查控制报错情况，如果出现 电机连接超时 ， 请参照附录 1-5 的解决办法 。
如果是与 motor无关的其他报错，请查阅roboshop报错码解析，查找对应解决办法。
### 4.2 若是发现在roboshop上面发现有驱动器相关的报错，应当对应驱动器的品牌找到对应的报错码，针对相应的驱动器报错码分析驱动器报错的原因。
请参照附录 2 驱动器行为列表，对照5 检查驱动相关报错。

### 5.  如上大部分情况均执行正常（ 已正常使用一段时间 ），突然出现如下问题，一般为硬件损坏等原因，不需要找研发确认代码。

### 5.1 电机过流
## 如果发现驱动器报电机过流问题：
（1）  先检查一下行走电机有机械干涉或者地面有障碍物导致电机堵转引起的过流，请相关人员排查现场实际情况，请参照附录 1-8；
（2）  若行走驱动器有抱闸，建议检查控制抱闸的情况，如果是因为抱闸问题导致的过流问题产生，请联系供应商更换抱闸，如驱动器为 curtis-1232E-Ruibote，请参照附录1-12；
### （3）  若无机械干涉、地面障碍物、无抱闸
若是步科类型驱动器，请联系研发同事确认是否因为电机转速和扭矩不匹配导致电机过流，请联系产品经理更换驱动器和电机，请参照附录 1-13；
若是科蒂斯类型驱动器，按照（ 4）检查行走电机编码器是否存在故障
（4）  行走电机编码器存在故障，联系供应商更换编码器，请参照附录 1-11；

### 5.2 心跳包超时
（ 1）如果为步科驱动器-步科转向电机，参照附录1-7 问题解决办法；

### 5.3 电机转子故障
 （ 1）如果为HSL驱动器-HSL轮毂电机（一拖二）则为电机故障，联系售后更换电机，参照附录1-6 ；

### 5.4 驱动器无法解决的报错
（ 1）若驱动器为curtis-1298-Seer，报错0x92，此报错为驱动器供应商无法解决的报错，通过配置Trriger报错时重启驱动器，请参照附录1-9；
（ 2）若驱动器为curtis-1232-Triwin，在充电的时候报错0x52，此报错为驱动器供应商无法解决的报错，告知客户即可，请参照附录1-10；

### 5.5 电机堵转
电机堵转和电机过流这两种问题有很大的关联性，一般情况下是因为行走电机堵转造成过流现象的产生，但是这两种报错在不同的驱动器有不一样的定义，故分析电机堵转的时候，请先分析
（1）  先检查一下行走电机有机械干涉或者地面有障碍物导致电机堵转，请参照附录 1-14
（2）  若行走驱动器有抱闸，建议检查控制抱闸的情况，如果是因为抱闸问题导致电机堵转的问题出现。
### （3）  检查行走电机编码器是否存在故障
若驱动器为 curtis-1298-Seer，报错0x73，此报错是电机刚开始动的时候电流过高，行走电机编码器数据受到干扰或者行走电机编码器损坏导致报错。请参照附录1-11
建议客户更换行走电机编码器。

### 5.6 驱动器电流过大、行走速度反馈异常
如果发现电流过大 【要明白正常行走的情况的电流值，如果没有相关经验可以询问驱动器供应商】 ，但没有报驱动器过流，下发的行走的速度和反馈的行走速度相差很大的情况：
（1）  先检查一下行走电机有机械干涉或者地面有障碍物导致电机堵转
### （2）  检查行走电机编码器接线是否有故障
（3）  检查行走电机 UVW三相线接线是否正确，请参照附录 1-15

## 行走电机相关
## 出现电机连接超时
## 出现电机连接超时的解决步骤：
### （1）  检查模型文件中 motor brand的配置
（2）  按照电气原理图检查 motor 的canport的配置
（3）  检查模型文件 can中baudrate 配置是否和驱动器参数中baudrate配置相同。
（4）  按照电气原理图接线检查接线是否正确。
（5）  按照对应的驱动器配置文档，检查相应的驱动器参数是否正确。
如 上之前情况均执行正常（ 已正常使用一段时间 ），突然出现问题 5，一般为硬件损坏等原因，不需要找研发确认代码。
（ 6）请检查上述步骤之后，仍不能恢复，需要检查控制器相应的can口是否正常，联系售后。
## 顶升车驱动器异常急停
问题描述：顶升车13号车频繁报错54022。已确认CAN线通讯质量有问题。但是车在充电时，除了有CAN通讯质量问题的警告，还有报错驱动器急停错误。
## 解决方法：更换新的spin电机
## 驱动器配置行为表
《驱动器行为列表》 https://books.seer-group.com/robokit/3.3/zh/driver/driver-behavior-list.html
《单电机调试说明》 https://books.seer-group.com/robokit/3.3/zh/appendix/embeded-faq-conbine/single-motor-cmd.html
《标定》 https://books.seer-group.com/robokit/3.3/zh/calibrations/index.html
《驱动器配置》 第5章：驱动器 · 产品手册 (seer-group.com)
《 motor参数说明》 motor · 产品手册 (seer-group.com)
