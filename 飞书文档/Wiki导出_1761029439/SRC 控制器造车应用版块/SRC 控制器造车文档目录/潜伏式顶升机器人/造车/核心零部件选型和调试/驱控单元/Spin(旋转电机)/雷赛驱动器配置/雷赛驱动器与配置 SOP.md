# 雷赛驱动器与配置 SOP

## 雷赛驱动器与配置 SOP

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.3.15

## 初版

## 使用中

## V1.1

### 2024.4.9

## 修改编号

## 使用中

## 当前车型配置示例
此示例选择选用雷赛低压伺服canopen通讯驱动器作为旋转电机，其详细使用文档参照雷赛LD5驱动器 张亚男
## 驱动器本身参数配置
参照文档 雷赛LD5驱动器参数配置 第四章节进行配置软件下载及安装使用。
1710837568139-59bff9a1-d2f2-409e-b931-9a3a19b50e8a.png 

## 调试操作步骤为：
1710837608965-3530c12f-8563-4f47-b29f-4071f09dbf76.png

## 模型文件配置
模型文件总览：通过模型文件——MOTOR——新增moto(为了便于区分，修改电机名称为spin)，即可在右侧属性窗口配置电机及驱动器相关参数。
1710837703920-ceebe254-469e-41cf-bcfd-6169ececd7bd.png 

## 编码器型号及电机参数
## 图片.png

配置encoderLine增量式编码器填：2500绝对值编码器填：16384
1710837772146-e9f5f691-5c51-4983-a811-6b550a453519.png 

## 【注】
减速比、编码器线数、电机最大转速、驱动器品牌需要根据选用的实际填写。
## 电机电流系数配置
currentFactor电机电流系数配置方法，按照实际计算配置，此处 currentFactor配 1
1710837814109-edf4fee7-e8f2-4900-b1dd-b0347917d3c7.png

## 型号和端口配置
1710837862084-ef7b607a-bc02-43b2-9575-4f94dd032490.png 

## 1：功能：旋转 spin
## 图片.png

## 参数名称

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## maxSpeed

## m/s

## 300

## /

## /

电机的启动速度的上限值，例如电机需要0.01m/s才能启动，则下发值始若小于0.01m/s时会逐渐增加到电机刚好动的值作为启动速度，但不会超过该参数。

## 最大速度，请根据实际情况进行填写

## maxAcc

## m/s²

## 最大加速度，请根据实际情况进行填写

## maxDec

## m/s²

## 最大减速度，请根据实际情况进行填写

## maxJerk

## m/s³

## 最大加加速度，请根据实际情况进行填写

## reductionRatio

## mm/round

该参数表示电机旋转一圈旋转机构旋转的角度，此参数值需要结合旋转具体机械传动方式进行计算

## calibrationVel

## m/s

## 标零速度，请根据实际情况进行填写

## offset

## m

补偿值，用做有外置编码器的电机时，用做顶升动作：指顶升上表面到地面最小距离，请根据实际情况进行填写 0

## blockDI

阻挡DI，-1表示不启用，在标零过程中触发报错停止，触发后即可继续标零，请根据实际情况进行填写 

### reductionRatio:减速比 需要测算
减速比一般是由载荷的特性和运动速度决定的。一般计算公式为：减速比=输出轴转速/输入轴转速，其中输出轴转速根据具体要求设定，输入轴转速则根据电机的额定转速来选择。通常会根据需求和具体情况调整减速比。
## 图片.png

## 2：外置编码器配置（若有）
## 图片.png

## 参数名称

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## outEncoderID

## /

## /

## /

## /

## 释义: 外置拉线编码器的can ID
## 说明: 请根据实际情况进行选择

## utEncoderRatio

## 释义: 外置拉线编码器减速比
说明: 使用外置拉线编码器的时候，核算出来的减速比，请根据实际情况进行选择 

## outEncoderLine

## 释义: 外置拉线编码器线数
说明: 使用外置拉线编码器的时候，核算出来的编码器线数，请根据实际情况进行选择 

## outEncoderPort

## port1释义: CAN的通信端口1
## port2释义: CAN的通信端口2
## 说明: 请根据实际情况进行选择

### 3：电机型号LeiSai-LD5-CANOpen
## 图片.png

## 功能验证

注意：电机控制验证前之前必须先完成激光配置、电机配置动作。
在整车组装完成未安装外壳前，请再检查一遍接线确保接线正确；
让车体着地，使用 Roboshop 软件操作，在站点出配置随动，看在站点顶升后是否会正常随动。如果不正常，请检查第四章节驱动器配置。

1711008819264-5c158a7d-0119-4559-9780-230dc31db206.png

通过执行任务链，导航到站点——顶升——随动——运行 运动过程中保持与世界坐标一致
1711010834706-3a11f21d-7022-42ae-9820-27822bb9bccb.png

未拍急停按钮前，推动机器人，无法推动（电机使能），检查 Roboshop 中机器人状态处于“未急停”“驱动器未急停”，如图 1所示；所示拍下急停按钮后，再次机器人，可以推动（电机去使能），检查 Roboshop 中机器人状态处于“已急停”，“驱动器已急停”。
1711003524057-e7201e4f-46f0-4139-9c18-951b040e8712.png 

## 图1 未急停
1711003581375-845014e8-26e0-4181-b98a-90266213baab.png 

## 图2 急停状态
## 整体运动流程：

## 随动功能验证.mp4
