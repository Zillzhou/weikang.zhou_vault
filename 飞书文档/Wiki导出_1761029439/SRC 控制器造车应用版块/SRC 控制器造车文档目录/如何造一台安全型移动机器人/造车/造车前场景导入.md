# 造车前场景导入

## 造车前场景导入

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.11.29

## 文档从语雀迁移至飞书

## 使用中

SRC 安全数据采集方式 OSSD 和 可以实现的安全功能选择
## 名称解释
OSSD：output signal switching device，字面上理解为输出信号可切换的设备，实际更多是指带测试脉冲的安全输出信号，OSSD由两个相同逻辑的信号组成，高电平为逻辑1，低电平为逻辑0，逻辑0触发安全停止。
## image (2).png

## OSSD 信号
## image (3).png

## OSSD 信号里的测试脉冲
SRC-3000控制器可以支持的测试脉冲宽度为50us~1ms，测试脉冲周期5ms~1s。

STO：Safe Torque Off，前文介绍过STO是安全扭矩关断。控制器的STO输出由一对安全DO构成，高电平为逻辑1，低电平为逻辑0，逻辑0时STO触发。
## image.png

## 安全控制器和驱动器的STO连接图

## 目前支持的安全机器人安全功能
这些安全功能由控制器和外部的安全传感器和执行器构成，通过电气的接线配合及 roboshop 里安全模型文件的配置来实现。
### 安全紧急停止（急停按钮 Emergency Stop）
由安全控制器的双测试脉冲输出信号经过双刀的急停按键再回到安全控制器的安全 D0_00~DI_01构成（见1.3章节的架构图），用于必要的时候控制机器人急停。因为安全急停功能用到的控制器管脚是固定的，所以不需要在停车过程中配置安全模型。
## 安全扭矩关断（STO）
当选型的驱动器支持 STO 功能时，控制器的一组 DO 配置成 STO 输出功能，并接到驱动器的 STO 输入管脚（见1.3章节的架构图）。STO 对应的安全 DO 配置在 roboshop 的 SS1 界面中。
当选型的驱动器不支持 STO 功能时，控制器的两组干接点（passive DO）可以接到驱动器的IO急停管脚。能实现等效的驱动器急停功能，但是安全等级无法量化。
## 安全停止0（SS0）
安全急停按钮拍下和其他的安全事件触发都会导致安全停止0，在我们的系统里安全停止由控制器给驱动器发 STO信号，驱动器执行 STO（安全扭矩的动力输出关断）。驱动器的扭矩动力输出关断后，机器人按惯性停止，如果电机上有抱闸，最后抱闸会闭合。

## 安全停止1（SS1）
如果配置了SS1，安全急停按钮拍下和其他的安全事件触发都会导致安全停止1。SS1 和 SS0 的区别是 SS1会在STO 触发前驱动器会让电机先执行0速。

## 安全抱闸控制（SBC）
当驱动器不支持SBC功能但支持BC功能时，可以通过控制器发出的OSSD信号控制外置的安全继电器来实现SBC功能（见1.3章节的架构图）
正常的抱闸逻辑依然由驱动器控制，SBC作为第二道防线，保证该抱闸的时候一定抱闸。STO触发后OSSD触发，STO恢复前OSSD先恢复。
安全抱闸控制对应的安全 DO 配置在 roboshop 的 SS1 界面中。
## 安全限制速度（SLS）
由两个安全控制器和两个安全编码器构成，用于监控顶升车的两个行走轮的转速或者是单舵轮叉车的行走速度和转向角度，通过里程合成计算出机器人的移动速度，如果超出规定的速度会触发机器人急停。如超出最大前进速度或者最大后退速度，超出最大左右转速度，还有如muting的时候超出0.3m/s。
安全限制速度的相关配置在 roboshop 的 SLS 界面中。
### 安全碰撞检测（collisionModule）
常见的方案使用安全接近开关实现叉车叉尖的碰撞检测，如果检测到碰撞会触发机器人急停。
对于普通碰撞条，一般是单DI的传感器，控制器也支持，只是安全等级较低。
安全碰撞检测的相关配置在 roboshop 的 collisionModule 界面中。
## 安全避障检测（SSM）
安全避障检测是一个比较复杂的安全功能，由安全编码器、控制器、安全避障激光等多个设备构成（见1.3章节的架构图）。安全编码器采集到的轮子转速或者位置作为输入，通过控制器的里程算法计算出机器人的行进速度和转向速度，根据SSM里预设的切区挡位，控制器的安全DO控制安全激光的切区，安全激光对保护区域里障碍物做出停车的判断，控制车辆 SS0 或者 SS1 安全停车。
安全避障检测的相关配置在 roboshop 的 SSM 界面中。
## 安全机器人安全回路

## 目前支持的安全机器人类型
因为 SRC-3000FS 安全编码器接口有限（两个），目前只支持以下两种类型的安全型机器人：
### 双轮差速底盘类型（左右轮各一个安全编码器）
### 单舵轮底盘类型（行走一个安全编码器，转向一个安全编码器）
