# 步科驱动器与配置 SOP

## 步科驱动器与配置 SOP

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 运动模型
智千料箱车运动模型为双轮差速，拥有2个驱动轮的差动车。该车型所拥有的2个驱动轮必须共轴，且车体坐标系的原点落在两轮中心连线的中点上，车体坐标系的x轴与轮轴垂直，如下图所示：
1652597627254-fb6a67ce-1648-48ae-9bbb-a02525e9f3fd.png

## 驱动器配置
## 快捷配置
通过导入仙工提供的cdi配置文件完成配置，需注意每个驱动器所对应的cdi文件是固定的，不可调换。
## 左行走电机配置文件：
### motor1_left_130908.cdi
## 右行走电机配置文件 ：
### motor2_right_130908.cdi
## 步骤如下：
准备232调试线，usb端连接电脑，RJ45端连接步科驱动器232调试口；
## 附件为上位机安装包：
### KincoServoPlusSetupV1.1.zip
## 如下图所示用网线连接驱动器
1711074245346-3dd2aeb3-2fee-452d-b43d-ce37b0c4df3b.png

## 打开步科上位机
## image.png

## image.png

依次选择：【工具】 -> 【读写驱动器配置】 -> 【写驱动器配置】 -> 【打开文件】 -> 【选择正确的配置文件】 -> 【等待加载】
1711074920998-7e3003be-f6be-4dfa-9b1d-3936796efe07.png

## 全新配置
使用步科上位机软件从0到1全新配置。可参考制造资源库文档-步科直流伺服驱动器-行走驱动器配置方法。
## 参考链接： 步科直流伺服驱动器
## 模型文件配置
打开 Roboshop 软件，打开【模型文件】-> 找到【motor】参数，右侧为对应motor参数配置项。
1711075410860-bef3d88d-0408-4e92-88ba-18edf92b362e.png

## 具体参数配置如下：

1711075548765-cf9f2131-079b-409c-9e11-6a5c466eee3e.png 

1711075539238-d597028d-b1a3-4713-8a4b-2678cc8bc106.png

## 部分参数释义如下：

## 参数名称

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## x

## m

## /

## /

## /

轮回转中心在右手坐标系下的 x 位置，如小车模型中坐标，根据实际距离填写

## y

## m

## /

## /

## /

轮回转中心在右手坐标系下的 y 位置，如小车模型中坐标，根据实际距离填写

## yaw

## °

## /

## /

## /

## 轮安装的朝向，根据实际安装位置填写

## canID

## /

## /

## /

## /

行走轮对应电机驱动器的 canID，根据驱动器上位机配置决定

## inverse

## /

## /

## /

## /

电机是否反向旋转，根据实际需求配置，本示例中right电机因其安装方向，故而勾选。

## encoderLine

## /

## /

## /

## /

## 电机编码器线数，根据电机实际参数填写

## currentFactor

## /

## /

## /

## /

## 电机电流因数，根据实际情况填写

## upLimitDI

## /

## -1

## /

## /

上限位DI，-1代表不启用，如果启用根据上限位传感器DI填写，行走电机配置为-1

## downLimitDI

## /

## -1

## /

## /

下限位DI，-1代表不启用，如果启用根据下限位传感器DI填写，行走电机配置为-1

## zeroDI

## /

## -1

## /

## /

零位DI，-1代表不启用，如果启用根据零位传感器DI填写，行走电机配置为-1

## passive

## /

## /

## /

## /

### 是否为被动电机，不勾选代表不启用，行走电机不勾选

## brake

## /

## /

## /

## /

## 行走驱动器验证
在整车组装完成未安装外壳前，请再检查一遍接线确保接线正确；
让车体着地，使用 Roboshop 软件操作机器人做运动动作: 向前，向后，向左，向右；
## image.png

未拍急停按钮前，推动机器人，无法推动（电机使能），检查 Roboshop 中机器人状态处于“未急停”“驱动器未急停”，则正常；
拍下急停按钮后，再次推动机器人，可以推动（电机去使能），检查 Roboshop 中机器人状态处于“已急停”，“驱动器已急停”，则正常；
## 机器人状态如下图所示：
1711076037067-ff3df63f-6a11-4dad-a231-3a6526855190.png
