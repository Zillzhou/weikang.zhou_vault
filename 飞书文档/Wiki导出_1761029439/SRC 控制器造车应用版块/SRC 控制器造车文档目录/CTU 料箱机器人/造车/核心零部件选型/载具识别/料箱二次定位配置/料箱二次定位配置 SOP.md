# 料箱二次定位配置 SOP

## 料箱二次定位配置 SOP

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## V1.1

### 2024.7.25

## 增加三联码

## 使用中

## 使用三联 AprilTag 码
## 二维码要求
## image.png

### 二维码类型： AprilTag  36h11
### 功能： 仅支持料箱二次定位，物料号需额外贴一维码
### 材质要求： 推荐亚光透明PVC膜（防镜面反射）
### 金属码需要做阳极氧化镀膜，不然会反光识别不了
## 背胶：       3M胶
## 打印精度：  ≥500 DPI
## PCS(1)：      ≥0.9
## 厚度：0.3mm - 0.5mm
## 安装位置精度要求：
## 水平偏差：±5mm
## 角度：±0.5°
## 三联 AprilTag 码生成和打印
使用 RoboShop v2.4.1.178 版本及以上版本，在识别编辑文件界面可生成三联码。
## 参数设置：
CodeParams 料箱码选择 apriltag36h11
码的尺寸 tagSize=0.024，tagDistance=0.036，
recoType 参数设置为 2，RBK 版本 3.4.6.2105 以上可配置为 3
码的编号从左到右依次为 0， 1， 2。
## 二维码粘贴
码必须正着贴，码的id在码的下方。
码的中轴线与料箱中轴线对齐。
二维码距离料箱底面 5 - 10cm， 所有料箱贴码高度必须一致。
推荐使用模具粘贴料箱码，保证料箱贴码的一致性。
## image.png
## 3联码贴码示范

## 识别文件配置
## 识别文件参数配置：
## image.png

根据码的实际尺寸填写 tagSize 和 tagDistance 的值；
## image.png
## 货架码

recoType 参数设置 2，RBK 版本 3.4.6.2105 以上可配置为 3
## 相机模型文件配置
相机需要做内参标定，并在标定界面设置标定参数；
## 外参参数设置：
## image.png
## 料箱车2D相机识别，相机内外参设置

## 料箱码物料
## 物料号：AM003000053
## 二维码文件：

AM003000053 - 36H11 -  料箱二维码.pdf
## RBK 版本
需要 RBK3.4.6.20 以上版本支持。

## 使用DM14二维码
## 二维码生成和打印
料箱识别使用的是 SELF-DM14-BOX-1*3 ，生成该码的方式为：
## 打开 Roboshop
## 点击【其它】
### 点击【QRcode tool New】或 【新二维码工具】
### 选择【SELF-DM14-BOX-1*3】
## 输入合适的参数，参照下图说明
## 点击【生成】，【保存】，【打印】
## image.png

## 二维码要求
### 材质要求： 推荐亚光透明PVC膜（防镜面反射）
### 功能： 支持料箱二次定位，且支持物料号编码
### 金属码需要做阳极氧化镀膜，不然会反光识别不了
## 背胶：       3M胶
## 打印精度：  ≥500 DPI
## PCS(1)：      ≥0.9
## 厚度：0.3mm - 0.5mm
## 安装位置精度要求：
## 水平偏差：±5mm
## 角度：±0.5°
## 识别文件配置
## image.png

## 识别文件参数配置：
根据码的实际尺寸填写tagSize和tagDistance的值；
## recoType 参数设置2或3

## 使用二联 AprilTag 码
二联 AprilTag 码目前已淘汰弃用，该章节文档仅为现存使用二联 AprilTag 码的项目提供参考。
## 二维码生成
料箱识别使用的是 AprilTag 36h11 ，生成该码的方式为：
## 打开 Roboshop
## 点击【其它】
## 点击【二维码工具】
## 选择【AprilTag】
## Tag 类型选择 36h11
### 输入合适的 Tag 尺寸，如 0.03 m
## 点击【生成】，【保存】，【打印】

1710943474301-fb402a21-516d-4e1a-b54c-7cdcc8a3bc9c.png 

## 料箱二维码的粘贴
料箱二维码粘贴在料箱朝外一侧，且料箱二维码应关于料箱中轴线对称，粘贴方式应保证二维码不易脱落。
1693444206746-ddd085e5-0c0e-44e3-b583-18ae175cfc1d.jpeg

1693447099590-07372ebf-487c-4e05-bb40-a8b32867d5b6.jpeg

## 料箱二维码识别文件配置

RBK版本为 3.4.5.x 识别文件配置位于 tag 文件夹下，配置 tag 文件如下图：
1711088969786-22f2cfd7-e172-45b6-8c84-5165c70de793.png

RBK 版本为 3.4.6.x 识别文件配置位于 code 文件夹下，配置 code 文件如下图：
## image.png
