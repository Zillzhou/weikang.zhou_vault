# 货架二次定位配置 SOP

## 货架二次定位配置 SOP

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 使用三联AprilTag码
## 二维码要求
## image.png

### 二维码类型： AprilTag  25h7
### 材质要求： 推荐亚光透明PVC膜（防镜面反射）
### 金属码需要做阳极氧化镀膜，不然会反光识别不了
## 背胶：       3M胶
## 打印精度：  ≥500 DPI
## PCS(1)：      ≥0.9
## 厚度：0.3mm - 0.5mm
## 安装位置精度要求：
## 水平偏差：±5mm
## 角度：±0.5°
## 三联AprilTag码生成和打印
使用 RoboShop v2.4.1.178 版本及以上版本，在识别编辑文件界面可生成三联码。
## image.png

## 参数设置：
CodeParams 货架码选择apriltag25h7；
码的尺寸 tagSize=0.024，tagDistance=0.036，
recoType 参数设置为 2，RBK 版本 3.4.6.2105 以上可配置为 3
码的编号从左到右依次为0, 1, 2。
## 二维码粘贴
将料箱摆放在货架上，料箱间距不小于 10cm；
料箱距离左右货架立柱的空间宽度不小于 10cm；
用记号笔和直尺沿着货架横梁标记贴码位置，货架码应位于料箱正下方。；
将二维码上方白边对齐横梁上边缘，平整粘贴到货架上，确保不翘边，不起泡；
码必须正着贴，码的id在码的下方。
## image.png

## 识别文件配置
## image.png

## 识别文件参数配置：
根据码的实际尺寸填写tagSize和tagDistance的值；
## image.png
## 货架码

recoType 参数设置2，RBK 版本 3.4.6.2105 以上可配置为 3
## 相机模型文件配置
相机需要做内参标定，并在标定界面设置标定参数；
## 外参参数设置：
## image.png
## 料箱车2D相机识别，相机内外参设置

## 物料信息
## 物料号：AM003000054
## 二维码文件：

AM003000054 - 25h7 - 货架二维码.pdf
## RBK版本
需要 RBK3.4.6.20 以上版本支持。

## 使用DM14二维码
## 二维码生成和打印
料箱识别使用的是 SELF-DM14-SHELF-1*3 ，生成该码的方式为：
## 打开 Roboshop
## 点击【其它】
### 点击【QRcode tool New】或 【新二维码工具】
### 选择【SELF-DM14-SHELF-1*3】
## 输入合适的参数，参照下图说明
## 点击【生成】，【保存】，【打印】
## image.png

## 材质要求
### 材质要求： 推荐亚光透明PVC膜（防镜面反射）
### 金属码需要做阳极氧化镀膜，不然会反光识别不了
## 背胶：       3M胶
## 打印精度：  ≥500 DPI
## PCS(1)：      ≥0.9
## 厚度：0.3mm - 0.5mm
## 安装位置精度要求：
## 水平偏差：±5mm
## 角度：±0.5°
## 识别文件配置
## image.png

## 识别文件参数配置：
根据码的实际尺寸填写tagSize和tagDistance的值；
## recoType 参数设置2或3
## 使用二联AprilTag码
二联 AprilTag 码目前已淘汰弃用，该章节文档仅为现存使用二联 AprilTag 码的项目提供参考。
## 二联AprilTag码生成和打印
料箱识别使用的是 AprilTag 25h7 ，生成该码的方式为:
## 打开 Roboshop
## 点击【其它】
## 点击【二维码工具】
## 选择【AprilTag】
## Tag 类型选择 25h7
### 输入合适的Tag 尺寸，如 0.03 m
## 点击【生成】，【保存】，【打印】
1711088605371-d93816e2-a0d4-47a6-a11c-983f68aa8466.png

## 二维码粘贴
粘贴在货架摆放料箱的位置正中央，当料箱位于货架上时，二维码中轴线与料箱中轴线在同一条线上，粘贴方式应保证二维码不易脱落。
a144f2f4281e62c2d7ceaacd46c70505.jpg
## 货架码粘贴实际图

## 识别文件配置

RBK版本为 3.4.5.x 识别文件配置位于 tag 文件夹下，配置 tag 文件如下图：
1711089080778-4b3e7ccd-12a5-47a7-b03a-0c2a37dbdac0.png

RBK 版本为 3.4.6.x 识别文件配置位于 code 文件夹下，配置 code 文件如下图：
## image.png
