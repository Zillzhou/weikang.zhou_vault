# 灯带

## 灯带

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 选型说明
当前料箱机器人上指示灯均采用支持“DMX512”通讯协议的灯带，其使用、配置和颜色定义可参照 智造资源库——DMX512 灯带 。
## 适用灯带 IC 的选型有：
## SM16512
## SM17512
## TM512AC
SM18512（ SRC2000 固件版本需要在 2.1.36 以上，SRC800 rbk 版本需要在 3.3.5.74 以上）
其余灯带 IC 未测试过，不推荐使用。
## 注意事项：
灯带来源有两种途径，从仙工采购和自行采购，仙工采购的已完成写码等操作，自行采购的灯带在使用前请确认是否写码正确。
## 写码及灯带长度
## 写码
若为自行采购灯带需要写码，灯带写码需要使用工具—K-1000C 写码器和相关写码文件，操作步骤和准备请参照：
## 灯带写码操作说明
## 多条灯带使用技巧
灯带是基于 RS485 总线的设备，RS485 总线是可以串联的，我们用到的灯带是按节控制的，一节一般长度是 100mm，RBK 目前能控制的总节数是有上限的，当长度没法满足我们的布局，可以按 100mm 的整数倍长度（焊接处）将灯带剪断，再用导线连起来，分成多段来控制。
剪开灯带时，注意不要打乱原来整条中每段的顺序，每段灯带都有对应的地址！
1701135267301-3d9c497c-afe8-4e15-a219-cf54d6fb4e51.png

## 不同控制器 RBK 可控灯带长度限制：

## 控制器

## 灯带总节数

## 灯带亮灯长度总长

## SRC-2000

## 60

## 6m

## SRC-800/3000/880

## 20

## 2m
## 左右转向灯示意
剪开灯带时，注意不要打乱原来整条中每段的顺序，每段灯带都有对应的地址！
剪开灯带时，注意不要打乱原来整条中每段的顺序，每段灯带都有对应的地址！
剪开灯带时，注意不要打乱原来整条中每段的顺序，每段灯带都有对应的地址！ 
1677577545831-87e7859a-a54a-4bf4-aa97-9a0fbbb12ad1.png

## rbk 灯带颜色定义
## 出错报警：红色呼吸
## 急停：暗红色闪烁
## 被阻挡：粉紫色跑马灯
## 运动中：蓝色呼吸
## 充电中：橙黄色呼吸
### 电量低于 20%（可配置）: 暗红色跑马灯同时伴随蜂鸣器响
静止状态：显示电量，从绿色 （100%）至暗红色 （20%）渐变
### 电池类型未配置（或电池通讯出错）且机器人静止：彩虹灯带
以上顺序即为氛围灯显示的优先级，即出错报警优先于急停显示。高优先级的条件满足后即显示相应的灯带效果，并且不再对低优先级的条件进行判断。每次更新的时间间隔约为 300ms 。
## 配置验证
### 验证灯带本身及写码正确与否。灯带通电后：
## 1.观察灯带颜色
车体待机状态灯带应该为呼吸灯，灯带颜色和电量相关，绿色代表 80%以上，黄色代表 40%以下
### 2.导航过程中，阻挡车体，灯带应该会出现短频闪烁；
### 3.按下急停，灯带会出现高频闪烁；
## 模型文件配置
## 电脑连接机器人后：
## 步骤①：点击模型文件
## 步骤②：点击左侧列表中 LED
## 步骤③：右侧点启用设备
步骤④：brand 里面选 WST-SM16512PS-DMX512
1710905332412-09784025-3f46-4101-9322-6c212c342b75.png

## 参数配置说明：
1710905349715-7ae00f8c-f8f7-4611-9c28-a4e832ae4566.png

## Key

## Description

## Value

## Unit

## decname

## 串口名称

“/dev/ttyUart”/“/dev/ttyS”参照下方注意事项

## colorRed

## 红色的参数设置

## 范围（0,255）

## colorGreen

## 绿色的参数设置

## 范围（0,255）

## colorBlue

## 蓝色的参数设置

## 范围（0,255）

## colorWhite

## 白色的参数设置

## 范围（0,255）

## showCharging

## 是否显示充电效果

## 勾选则为显示充电效果，不勾选则为不显示

## showBattery

## 是否显示电池效果

## 勾选则为显示电池效果，不勾选则为不显示

## turnLeftFrontPos

## 左前转向灯组序号（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnLeftFrontNum

## 左后转向灯组数量（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnLeftRearPos

## 左后转向灯组序号（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnLeftRearNum

## 左后转向灯组数量（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnRightFrontPos

## 右前转向灯组序号（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnRightFrontNum

## 右前转向灯组数量（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnRightRearPos

## 右后转向灯组序号（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## turnRightRearNum

## 右后转向灯组数量（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## lightTotalNum

## 灯珠组数量（6 灯珠/组）

## 请根据实际使用情况和需求进行配置

## redChannel

## 红色灯带通道

### 默认通道顺序 RWGB：参数配置依次为 0、2、3、1

## greenChannel

## 绿色灯带通道

### 默认通道顺序 RWGB：参数配置依次为 0、2、3、1

## blueChannel

## 蓝色灯带通道

### 默认通道顺序 RWGB：参数配置依次为 0、2、3、1

## whiteChannel

## 白色灯带通道

### 默认通道顺序 RWGB：参数配置依次为 0、2、3、1

## isBackBreath

## 倒退是否白色呼吸

## 勾选则倒退是白色呼吸
