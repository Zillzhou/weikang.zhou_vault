# 实施过程-特殊场景应用 SOP

## 实施过程-特殊场景应用 SOP

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 机器人移动前进行安全检查
需要在机器人模型文件中启用 safeMoveCheck 配置，该配置表示机器人底盘在移动前会触发执行属性窗口中配置的脚本，参考配置如下：
1709718890793-8db2d6bd-33e4-41d5-8feb-bce6ec9cd12e.png

以上配置表示该机器人在移动前会执行 containerRobot.py 脚本，脚本参数为 {"operation": "zero"} ，该配置项使料箱车在移动前自动执行机构复位，保证料箱车在移动前不存在高位货叉、手臂伸出等安全隐患。
## 配置 Trigger 控制机构复位
Robokit 版本： 3.4.5.44  或 3.4.6.16 以上。
在 Roboshop 模型文件 - Trigger 项中配置。
该配置项一般常用于出故障后的自动恢复，通过DI、EMC等信号变化触发执行动作，动作中配置抢占、释放控制权及执行机构脚本复位动作，达到出故障后一键自动恢复的效果。
## emc参考配置如下：
### 企业微信截图_17284730387909.png

## Trigger参考配置如下：
## image.png

以上配置表示：Trigger 配置了EMC上升沿信号（即拍急停）触发一个功能，抢占控制权；
## image.png

以上配置表示：Trigger1配置了EMC的下降沿信号（即松急停）触发一个功能，功能为执行机构脚本 containerRobot.py 的 zero 操作。
通过以上两项Trigger配置，达到的效果为当机器人在调度下执行任务出现异常时，拍下急停按钮，机器人自动抢占控制权; 松开急停按钮，机器人执行机构复位动作，完成后脚本自动释放控制权; 之后控制权会被调度自动抢占，并继续重新执行任务。
## 配置边走边动
在库位里添加内部取、放货动作和外部取、放货动作，参考 料箱车专有功能测试
## image.png

模型文件需要启用 container 999 , 999 表示货叉，启用后表示货叉可以储存货物。
## image.png

只有in_take和in_put动作可以支持边走边动，在这两个动作参数中，需要添加 script_stage 参数，script_stage 参数值为 1。
需要边走边动时，任务链或者天风任务中的每个 load 动作由 ex_take + in_put 动作代替， unload 动作由 in_take + ex_put 动作代替。
模型文件中 safeMoveCheck 配置为 in_put 动作，参考如下：
## image.png

配置示例：机器人从 Loc-003 库位取货，放货到 Loc-0018 库位。
## 普通的天风任务如下：
## image.png

## 边走边动的天风任务如下：
### 企业微信截图_17407246627837.png

### 企业微信截图_17407246786222.png

### 使用运单 preBinTask 配置边走边动
### 具体配置参考文档：在导航过程中执行机构脚本
