# 栈板上下架应用正向操作 SOP

## 栈板上下架应用正向操作 SOP

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## V1.1

### 2024.07

## 修改错误

## 使用中

## 应用场景
## 应用场景介绍

## 场景要素序号

## 场景要素

## 场景说明

## 备注说明（可以含图示）

## 1

## 场景车辆说明

CDD14堆高叉车，货叉起升高度 1.6m；
车辆配置导航激光sick + 避障激光 欧镭；3D避障：大疆mid70；3D识别相机：图漾FM851；叉尖避障：宜科光电

1710467808045-739bb178-06e1-422b-8eae-3d92b9e69979.png

## 2

## 场地布局说明

通道：宽度3m，水泥地面，平整度好；
货架： 立体仓库、高位密集货架，环境重复性较高；
库位：单工作站点在竖直方向上有5层库位；
## 载具：蓝色塑料川字托盘

1710467418177-fd31a219-313b-41f9-893b-9cf60ff794bf.png

## 3

## 业务场景功能实现说明

叉车机器人从待命点出发前往存料点托盘（栈板）存放库位Loc-01；
3D栈板识别相机识别托盘（栈板）实际精确位姿；
叉取托盘（栈板）并前往目标收货点库位Loc-02；
放下托盘（栈板）。

## 路径设计标准
根据使用条件和现场环境，设计移动机器人的行驶路径，并确定充电系统（充电桩）、外围设备、现场操作站等的位置。应充分考虑车体尺寸、驱动方式、执行机构动作方式及运行环境条件等，确保移动机器人在运行时，与周边的物体无干涉现象发生。在路径设计中应该考虑以下因素： 
a）停靠点（PP）、充电点（CP）、动作点（AP）、途经点（LM）； 
b）操作站台、充电桩、外围设备等； 
c）运行速度； 
d）公共区域、限制区域、危险区域划分。
## 实施安全要求
## 一般要求
### 移动机器人在现场使用时应满足以下安全要求：
a）操作员正常操作和日常检查的位置或进出的区域内，不得有任何可能造车伤害的风险源；
b）危险区域和限制区域应由适用方和制造商在设计、安装和启动阶段指定，并对此类区域进行标记，由制造商在系统运行前对使用方人员进行可验证的培训；
c）障碍物和移动机器人（包括负载）之间宜保持0.5m的最小间隙，小于此间隙的所有区域应被视为危险区域或限制区域，须清晰标记；
d）应设计合理的停靠位置，足以保证移动机器人及其负载不会阻塞安全通道。
## 额外交通设施
由于人员视线受限原因可能造成风险时，应采取额外的交通管理措施（如：交通灯、道闸等），以降低风险。
## 初始设置
## 开机
（1） 按下开机按钮，按钮绿灯亮，保持 1-2 s 释放开机按钮；
（2） 等待数秒，灯带亮起，完成开机过程，机器人无报错，指示灯为绿色，此时机器人处于可使用状态。
## 有线及无线连接
完成开机后，需要对机器人进行检查，查看是否一切正常。
## （1） 连接机器人-PC：
使用网线连接机器人，网线一头插在机器人控制器的连接网口上，另一头插在笔记本的以太网口上；
连上后将响应以太网 IP 地址更改为 192.168.192.xx 网段：
进入以太网设置页面；
## 更改适配器选项
右键选择使用的网口；
进入IPv4设置；
设置为手动获取IP，并配置IP。
注意：AMR 默认 IP 地址为 192.168.192.5。 
1684983702415-aed69d0c-24b4-4793-908c-8e7f009f8143.png

## 图3.1 PC端网口配置
### （2） 上位机（Roboshop）连接机器人
连接上机器人后，打开 Roboshop 软件，点击右上角添加设备按钮；
输入控制器默认 IP 地址：192.168.192.5 ，点击即可连接成功。
注意：如机器人内置了第三方网络客户端，所以若需配置无线 IP，需要参考相关文档进行配置。 
1710469077206-dea58b77-7ebe-4278-97d1-f55182ca4199.png

## 图3.2 Roboshop 连接机器人
## 机器人名称设置
## 机器人名称有两种：
调度系统名称 RobotName：调度系统中的机器人ID；
备注名称 RobotNote：用于调试、操作人员记忆查看。
1709876925843-1dab5270-08b6-46e4-be8a-e375a726d524.png

## 全局运动学参数配置
由于我们的模型和参数是适配所有的叉车，对于具体叉车一些参数可能需要调整。可根据实际车型修改速度、加速度、减速度：
增大参数配置中的 MaxSpeed ，如果有货物增大 Load_MaxSpeed 。
增大参数配置中的 MaxAcc ，如果有货物增大 Load_MaxAcc 。
增大参数配置中的 MaxDec ，如果有货物增大 Load_MaxDec 。
### 增大参数配置中的 JerkAcc ，为加加速度
### 增大参数配置中的 JerkAccStep ，为加加加速度
增大参数配置中的 BendAccRate ，转弯时，加速度的衰减系数。1 为不起作用。主要是为了避免急转弯，速度过快导致车子驶出曲线外而设置的。
增大参数配置中的 BendRotAccRate ，转弯时，角加速度的衰减系数。1 为不起作用。主要是为了避免避免急转弯，速度过快导致车子驶出曲线外而设置的。
增大参数配置中的 BendOffDistance , 这个参数表示线路曲率变化不连续时，车子开出线路外允许的最大距离。
如果叉车到点有点急，有骤停情况，可以减小 JerkAccStep，或者 MaxDec，或者 JerkAcc。
如果叉车到点速度慢，可以增大 JerkAccStep。
如果起步会调整舵角，在导航精度满足需求的情况下，可以增大全局的 GoAngle。
如果叉车到点时会调整舵角，在导航精度满足需求的情况下，可以去除目标点的到点角度。
1709877383064-68034763-12e3-4f6d-bb66-ea11b294b363.png

## 扫图
确认机器人无异常后，可开始对所需要的作业区域进行扫图。
回到地图主界面点击【2D 建图】, 选择【在线建图】，如现场使用了反光板/反光柱做辅助定位，需勾选反光板选项，并选择辅助定位方式，然后可开始扫图。通过笔记本电脑键盘上的 "W、A、S、D" 来操控车辆行走，并对所需要的作业区域进行闭环式扫图（扫出来的地图和机器人行走的路线一定要形成一个闭环）。
## 进入建图页面
首页双击指定机器人，并进入【地图与控制】；
点击【2D 建图】；
选择【在线建图】。
1709518359706-2d9c8818-cdc5-409f-9164-43044853f105.png

## 图4.1 开始建图
## 设置建图参数
### 根据实际需要选择建图方式、建图参数，以及是否有反光板：
选择【重新建图】；
设置建图参数；
选择是否启用反光板；
确定开始建图。
1709518359637-ee0d15fc-2bb1-4ff4-b485-7d4e9666b484.png

## 图4.2 配置建图参数
## 遥控机器人，完成闭环建图
键盘W/A/S/D，或建图界面左下角遥控按钮；
【完成扫图】。
1709518359664-8dca7301-11d8-4d8e-8a4c-03c5cc1b5db2.png

## 图4.3 遥控建图
## 完成并保存地图
1709518359681-ea0faa34-f0d3-4ac8-89dc-c58b1513e317.png

## 图 4.4a 保存地图
1709518359650-3c3ec02a-ff1f-42ff-9b45-6b60fd94f05f.png

## 图 4.4b 保存地图
## 根据需要打开或推送地图
将地图保存至本地并将地图推送给机器人，机器人会根据当前激光检测到的点云数据在地图当中的匹配程度自动进行定位，完成后会弹出提示框需要人工进行确认，确保机器人实际位置在当前地图当中是正确的。如果是对的则选择【ok】
1709518360160-84707d89-7625-4b0e-8b4e-d2c720713cd9.png

## 图 4.5 打开/推送地图
1709518360233-80c42aa1-e942-4559-82ce-207caaae43a9.png

## 图 4.6 推送地图
## 机器人重定位
如不对需要人工使用重定位功能进行二次手动定位确认。
在地图与控制页面点击【重定位】；
点击【手动重定位】；
按住鼠标左键不放，然后拖动圆圈来选择定位所需要参照的范围大小，也可不选择。
1709518360281-060a7662-20fe-421f-bfce-a14fc1581bce.png

## 图 4.7a 重定位
1709518360276-75c6cda0-221d-4233-9f54-46a8bf44d256.png

## 图 4.7b 重定位
## 切换地图
如需要更换机器人使用的地图，可加载当前调试用的电脑中的本地地图，并推送至机器人

## 推送地图.mp4
## 视频 4.1 切换地图
## 实操视频

## 建图.mp4
## 视频 4.2 建图实操视频
## 识别功能配置及测试
栈板识别、料笼识别等等。
## 识别文件配置
进入识别编辑页面，首先从机器人控制器拉取所有识别文件；根据实际待识别物品类型，选择相应的识别文件，复制并添加，并根据实际物品外形参数修改识别文件。
## 以基于深度学习算法的栈板识别为例：
## 更新识别文件
## 进入识别编辑页面
点击【下载】，下载机器人当前最新的识别文件；
【确定】。
1709527592753-e6648aec-49dd-4567-8731-6fb9c95bf00b.png

## 图 5.1 更新识别文件
## 选择并复制 plt 类型识别文件
1709527603726-54071a8d-613e-404b-a384-09d88d24bd7c.png

## 图 5.2 新建识别文件
## 修改识别类型为 3dCamera
点击【rec_type】；
选择【3DCamera】；
设置设备ID，如 3D 相机只有一个，则 rec_sensor_id 设置为 -1，如有多个 3D 相机，则输入所使用相机的 id。
1709527625008-75a73ede-127c-4caf-b00b-488b71bda717.png

## 图 5.3a 修改识别文件参数
选择栈板类型 template_type 为 auto_pallet
点击【template_pallet】；
选择【autopallet】。
1709527656374-52878ec8-2263-4bc0-82fc-d09d9cad5887.png

## 图 5.3b 修改识别文件参数
## 设置栈板参数
设置栈板的形状参数：宽度、长度、高度，以及识别的栈板宽度的极限范围；
选择数据返回类别：勾选 max_height_first 则返回最上层栈板位姿信息，不勾选则返回最下层栈板位姿信息；
## 设置栈板叉取参数：
block_laser：勾选后在叉取货物的过程中将加载激光扣除区域；
in_global_framework：勾选则返回世界坐标系下栈板位姿信息，不勾选则返回机器人坐标系下栈板位姿信息；
enable_cargoContactDI：勾选则启用到位开关；
enable_back_dist：勾选则启用倒退距离，叉车机器人里程中心到达栈板识别端面后将继续倒退一定距离，直至完成取货（到位开关触发或倒退距离达到 enable_back_dist）；
识别结果偏移量：rec_off_x、rec_off_y、rec_off_z、rec_off_angle，根据实际情况，调整返回的栈板位姿信息偏移量，特别是 rec_off_z，在使用识别的高度进行货物叉取时，需修改此参数，以保证叉臂高度可以顺利插入栈板，一般为负值。
1709527668983-e42d3121-21c5-45f7-b640-0e5b0d53de36.png

## 图 5.3c 修改识别文件参数
推送识别文件至机器人控制器。
1709527675478-1db46992-cb5b-4a2c-8715-ae02a70ca4b6.png

## 图 5.4 推送识别文件
## 实操视频

## 识别文件配置.mp4
## 视频 5.1 识别文件编辑实操视频
## 识别取货参数配置
识别后取货模式 RecOdo：里程计模式 or 定位模式，true 则为里程计模式，此模式要求标定结果较好，如采用手动标定；
识别后调整轨迹 RecBezierCurve：贝塞尔曲线、双段线，true 则为贝塞尔曲线模式，此模式进货叉效率较高，轨迹顺滑，无特殊情况建议使用；
## 识别后进栈板速度：
### 进栈板速度：Rec_SlowDownSpeed
### 速度调整距离：Rec_SlowDownDist
### 识别轨迹行走速度：RecQRCode_PathSpeed
回前置点方式 BackBasedOnRecPath：原识别规划路径返回、直接返回，true 则为原路径返回模式。
1709879690422-d29c87a7-7d5b-4857-90bf-18ff16b381af.png

## 识别测试
在【地图与控制】页面，选中实时显示的机器人，在页面右侧将会弹出识别测试的入口，选择配置好的识别文件，点击识别，将弹出识别结果，包括图像、栈板位姿信息等。
## 选中实时显示的机器人，并选择识别文件
进入【地图与控制】页面；
左键点击机器人实时图标；
选择识别文件。
1709528224564-d5ca5891-2840-4755-97f1-6a82744a7fcf.png

## 图 5.5 识别测试
## 开始识别
点击【识别】；
等待1-2s 后查看识别结果（不同相机、不同栈板数量完成识别的时间不同）；
查看识别结果图像渲染及栈板识别结果数据信息。
1709528132399-9e6589e8-17da-4871-b051-3a1bdb030d2b.png

## 图 5.6 识别测试及结果查看
## 实操视频

## 栈板识别.mp4
## 视频 5.2 识别测试实操视频
## 地图编辑
## 进入地图编辑页面
## 点击【启用编辑】
1709536706383-82af3579-545d-49b8-92e8-045e9abcf13f.png

## 图 6.1 进入地图编辑页面
## 采集工作站点
打开机器人实时位置显示；
手动遥控机器人至需要经过或上下料作业的点位；
在地图的机器人实时位置上右键弹出操作选项，选择所需要的站点类型，生成站点。
1709536712649-2c125d62-16f3-400d-9fd7-5ca984500200.png

## 图 6.2a 采集工作站点
1709536725859-f708cb18-c235-4e4b-b5d0-ab0e601f6a10.png

## 图 6.2b 采集工作站点
## 批量生成站点
在地图站点上右键弹出操作选项，选择【批量创建】；
选择生成方式：单行、矩阵；
在批量创建窗口输入批量生成的方向、起始站点ID；
输入站点间距及数量，点击【确定】生成站点，退出批量创建窗口查看批量生成的站点。
1709536735536-e5807a35-2ad5-4e8f-a340-23c9f43541bf.png

## 图 6.3a 批量生成站点
1709536752674-5335b829-8bf4-41cd-85e3-32417b6d607e.png

## 图 6.3b 批量生成站点
1709536765165-80591742-0f00-4979-bf49-f3761a942152.png

## 图 6.3c 批量生成站点
## 生成路径
点击左侧边栏路径按钮，顺次连接站点生成导航路径；
调整路径形状：选中特定路径，根据实际需要拖动路径形状控制点，改变路径形状；
修改路径参数：根据实际需要修改路径上机器人的运动方式、导航方式、最大速度等参数；对于叉车，很多路径需要机器人倒车前往目标点，如前置点到工作站点之间的线路需设置为倒车运动，而由工作站点返回前置点则需要正走运动，即不同方向的路径行走方式不同。
1709536921656-4213e510-2b3b-432a-8685-5dd0e168357c.png

## 图 6.4a 生成路径
1709536415395-ee22b9c6-d11f-4e1b-8500-258803406ca6.png

## 图 6.4b 生成路径
## 关联前置点
往往机器人执行任务时需要在到达工作站点前进行识别栈板或料笼，这就需要在地图编辑页面给不同站点关联唯一的前置点。
选中 AP 站点;
在右侧属性栏最下方，选中前置点。
1709536885692-212feb1b-a891-477d-b3c6-571444e519a1.png

## 图 6.5 关联前置点
## 建立库位
对于高位货架，同一工作站点有不同高度的几个库位，不同库位所执行的取放货任务指令不同，因此我们设计了库位，不同库位可以绑定同一个站点，库位可以添加多个操作键，并针对不同的键设计不同的操作指令；指令内容也可通过任务链测试后填入。
点击左侧工具栏库位图标；
在地图中左键点击生成库位；
设置库位参数：绑定站点、添加键/值 。
1709536447260-4a12fde9-1d75-45c6-bb1a-fb02ae3503bc.png

## 图 6.6 建立库位
## 清理地图点
点击左侧工具栏橡皮擦图标；
在地图中清理地图点。
1709536473108-010109fb-6635-4c14-8eaa-5388a010a026.png

## 图 6.7 清理地图点
## 添加屏蔽区域
点击左侧工具栏区域图标；
选择区域类型为屏蔽区域；
在地图中画区域；
选择需屏蔽的类型。
1709536563779-dfe6812a-3634-44ac-8f45-4042371e5e2d.png

## 图 6.8a 添加屏蔽区域
1709536571826-d4c67da6-176a-4de3-88ab-44b4f26ddd6d.png

## 图 6.8b 添加屏蔽区域
## 添加DI区域
点击左侧工具栏区域图标；
选择区域类型为 DI 区域；
在地图中画区域；
选择需屏蔽的 DI 。
1709536631407-9ca5cdd9-a557-4228-aaee-e69e645df6b4.png

## 图 6.9a 添加DI区域
1709536656975-b44f77b4-1f89-4b87-8da9-147276bcd46e.png

## 图 6.9b 添加DI区域
## 路径导航验证
点击路径导航；
右键点击目标站点；
选择路径导航至 XXX 点。
1709536680413-995f0d88-9c04-4e3a-9e77-bbe08606c6e0.png

## 图 6.10 路径导航验证
## 实操视频

## 编辑地图.mp4
## 视频 6.1 地图编辑实操视频
## 取放货参数配置
取货时识别前的高度 Fork_LoadInitHeight：一般使用任务参数指定高度，任务参数优先级高于参数配置的参数；
放货时识别前的高度 Fork_UnloadInitHeight：一般使用任务参数指定高度，可设置为-1；
取货时导航前的货叉高度 Fork_LoadHeight：可使用任务参数指定高度，如使用识别结果的高度，设置为-1；
取货时到点后的货叉抬升高度 Fork_UpHeight：可使用任务参数指定高度，不设置任务参数 end_height，则抬升到当前货叉高度+Fork_UpHeight。
## 单机任务链测试
在建立完所有的站点和路线后，可以使用 Roboshop 当中的任务链功能进行单机测试，确保前期建立的数据都是正确的，如：站点位置、库位、识别文件参数是否正确等。将测试通过的任务链指令写入库位的 load、unload 键值，用于 RDS 调用。
## 新建任务链
## 进入任务链界面，新建任务链：
进入【任务链】页面；
点击【新建】；
点击任务中的【新建任务】；
点击组中的【添加组】；
从可拖拽标签中拖拽需要用到的动作标签。
1709531633922-2634d022-968f-4224-8ac5-9a9eb506136c.png

## 图 8.1 新建任务链
## 添加货叉上升动作
起始高度根据项目现场货架高度合理设置，保证栈板识别相机高度与栈板高度大致相同，如使用识别得到的栈板高度，则取消结束高度的勾选。
拖入【叉货/放货】；
选择货叉动作【货叉上升】；
输入动作关联的站点；
输入高度数据：起始高度、行走高度、结束高度、最小保护高度；
选择识别文件；
勾选识别功能。
1709531634041-b9125121-034d-4bae-9a1d-911fa7c13f20.png

## 图 8.2 新建动作
## 修改指令
1709531633984-a4582edd-9afd-4355-9207-eb20349d66eb.png

### 图 8.3a 修改动作指令内容（高级参数）
如使用识别到的栈板高度，则增加rec_height参数，值为-1。
1709531634029-301666ce-b1c8-4a46-8f9a-e22ed1538bf1.png

### 图 8.3b 修改动作指令内容（高级参数）
## 修改全局参数
### 修改参数 Fork_LoadHeight 为 -1：
打开参数设置；
选中显示更多；
选择舵轮机器人；
修改指定参数；
生效参数修改。
1709532442708-ac3343ce-384e-415a-b294-e2950f76ddbd.png

## 图 8.4 修改全局参数
## 执行任务链
选中需要运行的任务；
选中需要运行的动作组；
发送任务链并执行。
1709531635730-590fb7f1-08a8-4f40-84ac-c2f6391f533e.png

## 图 8.5 运行任务链
## 查看任务实时执行情况
进入地图与控制页面查看任务链运行情况。
1709531635907-a3dc113f-320d-44ec-8ed9-01146b2bdd99.png

## 图 8.6 查看运行情况
### 将任务链测试通过的指令粘贴或输入库位的 load 键值中
启用编辑并选中库位；
点击【编辑】；
选中load键或新建新的键；
点击【编辑】；
修改键值，将任务链中测试通过的load动作指令内容粘贴至load的键值中。
1709531784896-0b72537a-d28b-4e62-b47b-ead360a40939.png

## 图 8.7 编辑库位键值
## 实操视频
完成以上操作及测试后，将机器人及地图添加至调度场景并推送至服务器。

## 任务链测试.mp4
## 视频 8.1 单机任务链测试实操视频
## RDS 测试 bintask
完成单机测试后，可在 RDS 系统内使用天风任务调用机器人执行库位取放货。
注意：此部分内容需先将机器人添加至调度场景中。
## 新建天风任务
打开RDS网页端，并进入天风任务；
点击【定义新任务】；
在弹窗中输入任务名称；
点击【确定】；
完成新建任务后，点击【编辑】，进入任务编辑页面。
1709533824000-8905b9cd-0fc6-4412-bff1-f7c6835cdce1.png

## 图 9.1a 新建天风任务
1709533823939-4ed63077-3082-4650-a84a-b49b30861743.png

## 图 9.1b 新建天风任务
## 选择执行任务的机器人
## 添加机器人通用动作
点击【机器人调度】；
拖拽【选择执行机器人】至右侧任务窗口；
拖拽【机器人通用动作】至右侧任务窗口；
输入执行任务的机器人名称；
设定关键路径；
输入目标库位，如 Loc-1；
设置指令内容：选择 bintask；
设置指令参数：输入 load 或 unload。
1709533796999-3524eaa0-a0b9-47d4-9088-fd86f2fc3073.png

## 图 9.2 编辑天风任务
## 保存并运行天风任务
完成任务编辑后点击【保存】；
点击【运行】；
弹窗中点击【运行】确认下发任务。
机器人接收到调度下发的任务后会自动前往 Loc-1库位取货，到 Loc-2 库位放货。
1709533824043-7b2ac362-5352-4344-a7c2-9cd97d8c974c.png

## 图 9.3 运行任务
## 实操视频

## RDS任务编辑.mp4
### 视频 9.1 bintask控制机器人实操视频
## 实际货架实操测试

## RDS.mp4
视频 10.1 堆高叉车机器人栈板上下架实操视频（RDS端）

## 上下架实操视频.mp4
### 视频 10.2 堆高叉车机器人栈板上下架实操视频（实物）
## 充电
## 充电桩扫描
### 建立地图，将充电桩扫描进地图内，如下图：
1700207464313-220fe929-c485-4731-b92d-baaae6b3081f.png

## 图 11.1 建立地图
## 标记特殊工作站
将鼠标悬停在代表机器人的蓝色矩形上，右键点击，选择【标记特殊工作站】，将会出现充电点
【ChargePoint】。
1700207496319-e92c8200-ef42-421a-93ec-b88427deb928.png

## 图 11.2 标记特殊工作站点
## 配置叉车充电桩识别文件
输入 IP 让叉车和充电桩获取通讯。
注：建议按下述参数填写。

## SCS-C24100D

## SCS-C4850D

## SCS-C48100D

## IP

## 输入充电桩 IP 地址

## MaxCurrent

### 28.8

### 58.8

### 58.8

## MaxVoltage

## 100

## 50

## 100
1703215695729-6e3bcf8d-bb21-4581-8b55-a989210b676e.png

## 图 11.3 配置识别文件
## 选择模型文件
选择充电点的识别模型文件为【fork.chargerpot】。
注：如果不选择，则无法使叉车与充电桩产生通讯。
1700207516224-a1526172-e2da-4f5b-8c24-0112e496b576.png

## 图 11.4 关联识别文件
## 路径保存
（1）控制机器人前进，前进到距离 CP 点 1 m 的位置附近时，将鼠标悬停在代表机器人的蓝色矩形上，右键点击，标记站点，会出现一个 LM 点；
1700207584169-f0e450d8-8852-45b4-8cad-e29d03010f5a.png

## 图 11.5 增加LM点
（2）将 LM 点与 CP 点进行连接，并且配置好 LM -> CP 点的机器人行走【direction】和 CP -> LM 点的机器人行走【direction】：进入充电点为倒走，导航方式为路径导航；退出充电点为正走，导航方式为路径导航；LM2 至 CP1 之间连线一定要直连；（ 注：如若 LM 在 CP 点下面，则行走方式相反。 ）
1700207535375-4a7a6aae-5ac6-4c84-ab8a-ac0b4a890134.png 

1700207661127-b3e6755e-3f75-4fc7-943e-8b8d366d7b05.png

## 图 11.6 配置路线
（3）将 LM2 设置为 CP1 的前置点；
1700207723210-49686399-610b-42a4-88ac-4031240e27ca.png

## 图 11.7 配置前置点
（4）将配置的充电点和前置点与地图中的其他站点相连，形成机器人可达的线路；
1700207734480-10170f2e-e733-4d9e-acab-e7a2c0b12bb7.png

## 图 11.8 补充其他站点、路线
（5）保存并推送地图至机器人，使用路径导航至 CP1 点，即可进行自动充电。
## 错误示范
1700207755324-78bb7bf2-596e-4dd8-8eb5-b14bb8b99ae7.png

1700207760229-d6204f6d-bd31-424b-9035-8fa4408b51ab.png

1700207764162-0b93d2e1-10fa-4cd3-a53d-b57622759c35.png

## 图 11.9 错误图例
## 机构脚本
如叉车需使用机构脚本控制叉臂运动，或其他功能需通过机构脚本实现，参考以下操作。
## 进入机构脚本页面
## 进入【机构脚本】页面
点击【刷新】；
点击【下载】，从机器人控制器下载脚本最新版本。
1709639325273-d277253a-807a-494c-9c83-eda8b5e9463c.png

## 图 12.1 进入机构脚本页面
## 导入/新建
## 导入脚本：
在左侧空白处或指定文件夹，【右键单击】在弹出的操作按钮中选择【导入文件】
在弹窗中选择待导入的 .py 文件，打开完成脚本导入。
1709639635265-937b522c-0835-4b7e-9c9d-a7039da785bd.png

## 图 12.2a 导入脚本
1709639741449-317172e6-cf61-4433-9d4d-8e3f64da84af.png

## 图 12.2b 导入脚本
## 新建脚本
在左侧空白处或指定文件夹，【右键单击】在弹出的操作按钮中选择【新建文件】;
选中新建的脚本，可在窗口中间的空白区域输入脚本内容。
1709639589655-d2a9f184-ea3c-4021-ad6e-a9c51d3321d8.png

## 图 12.3a 新建脚本
1709639869812-42a1a5dc-7020-4978-8775-8d2c22a5be8b.png

## 图 12.3b 新建脚本
## 推送及执行
右键选中脚本；
选择【推送】，将脚本推送至机器人；
点击开始按钮，在弹窗中选择或输入脚本参数，点击【确定】开始执行脚本。
1709639969381-6d83fb14-5cce-447d-a3b2-8e3cff802ee0.png

## 图 12.4a 推送及执行脚本
1709640065638-d8544804-9416-4484-af47-2b8810df54bf.png 

## 图 12.4b 推送及执行脚本
