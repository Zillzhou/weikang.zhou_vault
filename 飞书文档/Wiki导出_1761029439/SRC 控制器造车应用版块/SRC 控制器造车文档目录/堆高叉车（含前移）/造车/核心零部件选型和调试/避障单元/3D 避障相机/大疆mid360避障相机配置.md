# 大疆mid360避障相机配置

## 大疆mid360避障相机配置
## 更新记录：

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 文档资源文件清单：

## 文件名

## 资源文件

## 文档内编号

## 常见类型叉车模型文件

## 模型文件.zip

## 模型文件-01
## 上位机配置
### 此部分内容参见：大疆Livox Mid-360
## 模型文件配置
## 以mid360为例：
1711021262267-289443c6-39fa-4873-b368-443d56f389b9.png

## 图 2.1 避障相机模型文件配置SOP
首先进入camera，复制并添加新的camera，重命名设备并启用，随后按照如下流程配置相机：
选择品牌：根据实际选型在品牌下拉框中选择对应的品牌和型号：选择 DJI-mid360-TCP。
1703729521486-6b8a8bb1-e8a7-442e-819e-586c7c04f27c.png

## 图 2.2 选择品牌
配置通信端口：根据相机实际 IP 配置，但要保证不与其他设备 IP 冲突
配置最远有效距离：根据需要填写；
勾选启用避障检测：选择用途为 useForObstacleAvoidance；
1703728617389-d8e6984b-1a27-4e79-95cf-4c89b903c4f8.png

## 图 2.3 配置通信接口
1703729933479-329a6ae5-39ff-4fd3-853a-46713f11794e.png

## 图 2.4 配置有效距离及启用避障检测
配置相机视场角；
## image.png

## 图 2.5 配置相机视场角
配置相机id、配置安装位姿、选择是否正装：根据实际安装位置填写安装位姿参数，并选择是否正装。
1703729988042-ef8b1a4a-15ff-478d-aa09-074edc75d587.png

### 图 2.6 配置相机id、配置安装位姿、选择是否正装
## 配置结果验证
配置完成后点击上传；
确定并推送至机器人控制器；
## image.png

## image.png

## 图 3.1 上传修改后的模型文件
返回地图与控制页面；
给下发机器人路径导航指令，并将障碍物放置在机器人运动路径上；
如配置正确可在地图窗口看到深度相机识别到的障碍物点，如图3.1所示；
也可在机器人告警窗口查看到机器人被阻挡的报错信息。
### 屏幕截图 2024-03-21 145853.png

## 图 3.1 深度相机障碍物显示
### 屏幕截图 2024-03-21 145906.png

### 图 3.2 深度相机识别到障碍物告警信息
## 参数说明
## 通信方式
仙工智能主要使用以太网和 USB 两种模式通信的 3D 相机。以以太网为主，可以实现大量数据实时、高速传输，而且网口不易松动。
注意：目前我们不推荐使用 USB 的相机，主要有两方面的原因：
### USB 的相机连接容易松动，会偶发性地出现断连的情况
### 针对大数据的传输，USB 相机的速率不一定能达到要求

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## ip

## 模型文件-camera

## —

### 192.168.192.100

## —

## —

### 3.3.4.20~latest

### 相机的ip（一般设置为192.168.192.网段）

## 参数说明

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## x

## 模型文件-basic

## m

## 0

## -99

## 99

### 3.3.4.20~latest

## 3D 相机在车体坐标系下x轴方向的值

## y

## 模型文件-basic

## m

## 0

## -99

## 99

### 3.3.4.20~latest

## 3D 相机在车体坐标系下y轴方向的值

## z

## 模型文件-basic

## m

## 0

## -99

## 99

### 3.3.4.20~latest

### 3D 相机在车体坐标系下z轴方向的值，该值无关紧要

## roll

## 模型文件-basic

## °

## 0

## -180

## 180

### 3.3.4.20~latest

### 3D 相机在车体坐标系下 x 轴的角度偏移值

## pitch

## 模型文件-basic

## °

## 0

## -180

## 180

### 3.3.4.20~latest

### 3D 相机在车体坐标系下 y 轴的角度偏移值

## yaw

## 模型文件-basic

## °

## 0

## -180

## 180

### 3.3.4.20~latest

### 3D 相机在车体坐标系下 z 轴的角度偏移值

## isUpside

## 模型文件-basic

## —

## true

## —

## —

### 3.3.4.20~latest

若相机正装，则勾选。

## maxLength:

## 模型文件-brand

## —

## true

## —

## —

### 3.3.4.20~latest

## 最大视野范围

### useForObstacleAvoidance

## 模型文件-brand

## —

## false

## —

## —

## ~latest

## 用于避障检测

## brand

## 模型文件-camera

## —

## —

## —

## —

### 3.3.5.20~latest

相机品牌，根据实际情况选择。

避障相机标定请参考 避障激光标定 、排错请参考 避障相机排错流程
## 报警码
仙工智能在使用 3D 相机的时候定义了一些报警码，以便在使用过程中出现问题通过报警码可以快速定位：
当 3D 相机没有连接上时，会触发连接失败的报错，具体如下：
## Error52250
### 提示： 3D camera disconnected
## 触发条件：
相机未上电；
相机故障；
相机 ip 或者 port 不正确；
通讯线故障。
## 解决方式：
检查相机的状态；
通讯线是否畅通；
检查 ip 和 port 是否设置正确。
当 3D 相机出现接收不到数据，会触犯断联的报错，具体如下：
## Error52251
提示： cannot receive 3d camera data
## 触发条件：
相机未上电；
相机故障；
相机 ip 或者 port 不正确；
通讯线故障。
## 解决方式：
检查相机的状态；
通讯线是否畅通；
对于采用 UDP 传输的，需要检查 ip 和 port 是否设置正确。
