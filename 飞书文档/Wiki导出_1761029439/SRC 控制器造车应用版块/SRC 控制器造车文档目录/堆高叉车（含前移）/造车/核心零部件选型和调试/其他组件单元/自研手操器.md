# 自研手操器

## 自研手操器

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 选型前注意事项
应用背景：现场没有笔记本电脑时需要对车体进行简单的操作，可以选择仙工自研手操器。
手柄功能：仙工手柄与车体连接后，开机后按下使能键对车体进行急停、简单的前进、后退、左转、右转、货叉上升下降等动作。
仙工手柄需要在SRC控制器can总线、di信号输入、急停等线路上预留手柄接口，具体请见电气原理图。
## 现有叉车手操器型号：
## 图片.png

## 适配过的驱动器选型请参考：

## 手操器的固件刷写请参考：
## 准备工具：
## 固件文件：

### hand_shank2-1215.hd.bin
## 固件烧写工具：

### handsharkFlasher.exe
固件烧写详细步骤请参照下述文件：将文件拖到烧写工具上两次即可。

### 手操器程序升级指导手册-20240108.docx

bandicam 2024-03-28 11-09-19-569.mp4

## 模型文件配置
在控制器上仅需配置两个trigger。具体如下图所示。
1710479629774-862a6b6b-22b2-436b-90a3-51927b0f14c0.png

## 图 2.1 模型文件配置页面
## 配置步骤：
在DI中启用手操器接入的DI设备，如下图，点击①选择di设备，点击②启用di，在③处填写对应di后，上传模型文件，如果di需要反置，勾选inverse。
1710479471497-00a502c4-ba9c-4fc0-9204-4aab097f8142.png

## 图 2.2 配置 DI
在CAN线启用对应的CAN设备，一般与驱动器can线在同一路，在《驱动模块》已启用
## trigger配置如下：
### di6 上升沿触发外部控制模式并打开do4
### di6 下降沿触发SRC控制模式并关闭do4
1708952998483-aaf2ec17-c29b-41f1-939f-a5aae4c97e60.png 

## 图 2.3a 配置 Trigger
1708953008843-12f8c957-1152-464e-ac3b-08a23d2107c0.png

## 图 2.3b 配置 Trigger
## 配置结果验证
## 准备
Step 1:准备仙工叉车专用手柄（型号SFL-Handle）一个（如下图 1 所示），待控制车体一台；
1709352109620-bf34aef4-9b21-42c6-89e9-91c18184071f.png

## 图 3.1 手操器实际照片
Step 2:检查手柄是否外观完整，按钮回弹有效，线缆无破皮或者断裂，连接器管脚无弯折无氧化。车体功能正常，位于面板上，标识有“HANDLE”的插座孔内无异物。
## 连接
Step 1:将手柄连接器垂直插入车体面板的标识有“HANDLE”的插座（图2中 ①），拧紧手柄连接器的锁紧环；
1710097112618-94ba1cf2-54fd-4103-adf1-fe71926b58f9.png

## 图 3.2 手操器插座
Step 2:将车体运行模式旋钮（图3 中①），旋转至“MANUAL”档位；
1710097454488-70dc0b04-ccb1-4c76-ae20-f875801fdd5c.png

## 图 3.3 手自动切换
Step 3:将手柄的电源开关（图4 ①）摁下，使手柄的电源指示灯亮起（如图5）。
1710097653652-03e4b1e2-9754-48fb-9d97-c2017e591a4e.png 

## 图 3.4a 打开手操器电源开关
1709355077225-2620c214-8639-4a4f-a586-85f764e6968a.png

## 图 3.4b 打开手操器电源开关
## 使用
按下安全使能键，手柄状态灯亮绿色，如图6。车体运动需要同时按下安全使能键与操作键可以运动。
1709355378340-595942e7-6d26-454e-ae02-6d0825ac86c7.png 

## 图 3.5 安全使能

## 按钮

## 动作

## 1

## 前进

## 车体叉齿方向运动

## 2

## 后退

## 车体车头方向运动

## 3

## 左转

## 车体顺时针旋转

## 4

## 右转

## 车体逆时针旋转

## 5

## 叉齿控制-上升

## 货叉上升

## 6

## 叉齿控制-下降

## 货叉下降

## 7

## 速度快

### 最大直线速度 0.25m/s，转弯速度0.2rad/s

## 8

## 速度慢

### 最大直线速度 0.1m/s，转弯速度0.1rad/s

## 手动控制时音频播放功能 （tbd）
a. 在模型文件设置periodrun与对应的脚本名称，在脚本界面上传对应的脚本，在音频管理界面上传对应的音频文件
### b. 参数文件可配置对应的报警距离、报警音频文件名等参数
### c. 效果为切到外部控制模式后，根据障碍物阈值进行报警
## 手操器问题排查
