# 柯蒂斯行走电机配置

## 柯蒂斯行走电机配置
## 更新记录：

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 文档资源文件清单：

## 文件名

## 资源文件

## 文档内编号

## 常见类型叉车模型文件

## 模型文件.zip

## 模型文件-01
## 驱动器配置
行走电机驱动器配置详见：Curtis驱动器F2A参数调整指导文档；
## 模型文件配置
## 配置SOP
由于一般叉车的行走、升降电机为二合一驱动器，配置时必须完成所有电机模型文件配置才可以控制机器人移动。
## CAN 接口配置
此处配置的是机器人控制器的CAN接口使用的波特率及是否有终端电阻，如不正确配置将无法与电机驱动器、编码器、电池等设备通信。配置过程：
进入CAN；
## 修改CAN设备名称
启用设备；
选择端口；
波特率；
勾选是否有终端电阻。
CAN接口生效逻辑：控制器会使用上一次生效（上传模型文件）的CAN接口配置参数，使用过程中（包括关机后重启）禁用此设备不会影响正常使用。
1711015769237-e84c757e-1fab-4504-b58c-b7db1d1924cc.png

## 图 2.1 配置CAN
## 行走电机
进入电机motor配置；
## 修改电机名称
启用设备；
修改电机安装位置、CANID、速度、编码器线数、是否反装，其他修改为不启用（不勾选或-1）；
选择通信端口：一般为port1；
选择类型为walk；
选择品牌：如Curtis-F2A-ReBoTe。
1711015698221-1558fc28-39e3-4d6f-8bec-08a6e1b460f1.png

## 图 2.2a 配置行走电机
1711018360837-b4376740-30fe-4086-ba1f-7aa80573564b.png 

## 图 2.2b 配置行走电机
1711018388411-64145d3b-5b02-419c-ad80-34f1342b0c99.png

## 图 2.2c 配置行走电机
## 行走电机配置说明
## 基础配置（basic）
1703761791285-f149fac6-244b-4d72-abd5-414b2f6308c8.png

## 图 2.6 行走电机 basic 参数

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## x

## 模型文件-motor-basic

## m

## 0

## -1000

## 1000

## ~latest

### 驱动器安装的 X 坐标，根据实际安装位置填写

## y

## 模型文件-motor-basic

## m

## 0

## -1000

## 1000

## ~latest

### 驱动器安装的 Y 坐标，根据实际安装位置填写

## yaw

## 模型文件-motor-walk

## °

## 0

## -180

## 180

## ~latest

## 驱动器安装的朝向，根据实际安装位置填写

## canID

## 模型文件-motor-basic

## \

## 1

## 1

## 255

## ~latest

### 驱动器的的 canID，根据驱动器上位机配置决定

## maxRPM

## 模型文件-motor-basic

## rpm

## 1

## 1

## 1000000

## ~latest

### 驱动器最大转速，根据驱动器上位机配置决定

## inverse

## 模型文件-motor-basic

## \

## false

## \

## \

## ~latest

## 驱动器是否反向，根据实际安装位置填写

## encoderLine

## 模型文件-motor-basic

## \

## 1

## 1

## 10000000

## ~latest

## 编码器线数，根据实际情况填写

## currentFactor

## 模型文件-motor-basic

## \

## 1

### 0.000100

## 1000000

## ~latest

## 电机电流因数，根据实际情况填写

## CAN通信配置（canPort）
1703761670338-07277b92-61e0-4912-bf4f-819ac1963fdf.png

### 图 2.7 行走电机 canPort 参数

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## canPort

## 模型文件-motor-canPort

## \

## port1

## \

## \

## ~latest

## 驱动器使用的端口，根据实际情况填写

## 功能配置（func）
1703761687258-b093d3f7-7f72-4547-936c-0c1b1f1dc641.png

## 图 2.8 行走电机 func 参数
## 选择类型为 walk，需配置参数如下

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## wheelRadius

## 模型文件-motor-walk

## m

### 0.09

### 0.00000001

### 100.0

### 3.3.4.20~latest

## 驱动轮实际轮半径

## reductionRatio

## 模型文件-motor-walk

## 0

## 0

## 10000

### 3.3.4.20~latest

## 驱动轮减速比

## minimumSpeed

## 模型文件-motor-walk

## m/s

### 0.05

### 0.0021

## 1.0

### 3.3.4.20~latest

电机的最小启动速度的上限值，例如电机需要 0.01m/s 才能启动，则下发值始若小于 0.01m/s 时会逐渐增加到电机刚好动的值作为启动速度，但不会超过该参数。

## deadDealerK

## 模型文件-motor-walk

## \

## 100

## 100

## 1000000

### 3.3.4.20~latest

针对 minimumSpeed 的加速系数，系数越大，递增的速度越快，越快达到 minimumSpeed 上限值。一般情况下无需调节该参数。

## deltaCnt

## 模型文件-motor-walk

## count

## -1

## -10

## 100000

### 3.3.4.20~latest

该值用于特殊情况下，若电机编码器抖动较大时，启用该参数可以解决电机数据判断为非静止的状态。

## 品牌配置（brand）
1703762234387-9091f097-f19c-4825-9bd5-df79edc9bbba.png

## 图 2.9 行走电机 brand 参数

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## brand

## 模型文件-motor-brand

## \

## \

## \

## \

## ~latest

## 驱动器品牌，根据实际情况填写

常用驱动器品牌有同毅、步科、柯蒂斯等。
## 配置结果验证
配置完成后点击上传；
确定并推送至机器人控制器；
## image.png

## image.png

## 图 3.1 上传修改后的模型文件
返回地图与控制页面；
行走电机验证：如配置正确可在地图窗口使用左下角手动控制按钮控制叉车前进、后退。
## image.png

## 图 3.2 手动控制按钮
