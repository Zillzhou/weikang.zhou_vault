# 控制器上电及高级功能激活

## 控制器上电及高级功能激活
## 更新记录：

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 准备工作-控制器开机
## 如控制器已在整机上安装并正确接线：
钥匙开关旋至右边至2-3秒，听到触摸屏幕“嘀”一声，代表该控制器已经启动；
等待数秒，灯带亮起，完成开机过程，机器人无报错，指示灯为绿色，此时机器人处于可使用状态；
完成开机后，需要对机器人进行检查，查看是否一切正常。
db9c8417-051f-477b-bfee-8a8c8b1138d5.jpg

如未接线，则按照如下说明给控制器供电（以SRC2000为例），控制器将在通电后自动开机。
SRC-2000(S) 系列控制器供电电压为 24V，采用外部 DCDC 供电，纹波要求≤150mVpp，系统最小工作电流为 2A（不包含 Power DO 的供电需求）；
根据外部 Power DO 输出电流的要求，选择合适带载能力的 DCDC 电源。
不要和任何电机设备或者大功耗设备共用一个 DCDC 电源；
请按照下表的 TE35 线序定义正确连接电源，请注意正负极不要接反。
## image.png

## [12]报警灯 / 电源输出9

## [23]电池开关2N

## [35]电源输出5

## [11]数字输入3

## [22]电池开关2O

## [34]电源输出0

## [10]电源输出6

## [21]开机灯

## [33]CAN通信1H

## [9]急停输出2-

## [20]模式1开机

## [32]CAN通信1L

## [8]急停输出2+

## [19]电池开关1O

## [31]CAN通信2H

## [7]急停灯 / 电源输出8

## [18]电池开关1N

## [30]CAN通信2L

## [6]急停开关

## [17]485通信1B

## [29]485通信1A

## [5]急停输出1+

## [16]485通信5B/232通信RX

## [28]485通信5A/232通信TX

## [4]急停输出1-

## [15]自动充电开关 / 数字输入10

## [27]手动充电开关

## [3]地

## [14]地

## [26]地

## [2]地

## [13]24V输入+

## [25]地

## [1]24V输入+

## [24]24V输入+
## 网络配置
## PC与机器人控制器通过网线连接
网线一头插在机器人控制器的连接网口上，另一头插在笔记本的以太网口上；以SRC-2000为例，连接下图 区域1处的LAN口。
## image.png

连上后将响应以太网 IP 地址更改为 192.168.192.xx 网段：
进入以太网设置页面；
## 更改适配器选项
右键选择使用的网口；
进入IPv4设置；
设置为手动获取IP，并配置IP。
注意：AMR 默认 IP 地址为 192.168.192.5。 
注意：不可将以太网网址设置为192.168.192.100-150，否则会与自身车体其它硬件IP冲突，推荐ip192.168.192.170-250；

1684983702415-aed69d0c-24b4-4793-908c-8e7f009f8143.png

## 图1 PC端网口配置
## 上位机（Roboshop）连接机器人
连接上机器人后，打开 Roboshop 软件，点击右上角添加设备按钮；
输入控制器默认 IP 地址：192.168.192.5 ，点击即可连接成功，如链接不成功可进入辅助程序使用【终端命令】检查网络是否联通；
1711012532958-4f013245-1057-4858-9ec1-f6eb9aacc98f.png

1711014312755-cfead8c7-9357-489c-9161-3fd8619d96eb.png

## 进入【高级配置】连接无线网络：
刷新搜索当前环境下的无线网络；
选中待连接的网络；
输入密码；
连接网络；
注意：如机器人内置了第三方网络客户端，所以若需配置无线 IP， 需要参考相关文档进行配置 。
1711012543212-045e9006-7aae-4c6c-a3e0-1221b1ce3198.png 

1711012705777-3325f87b-1745-4d40-81e2-b29a5942afdd.png

## 点击【无线IP】查看
1711012712448-68c67dc4-5f57-4a32-b9fd-d327134f8e99.png

拔掉网线使用无线网络连接机器人：输入无线IP连接机器人。
1711012959490-f70aec91-b4dc-4e36-a7a2-771ea45f6198.png

## 高级功能激活
## 机器人机器码获取
 在激活机器人高级功能之前，需要拿到机器人 ID 和机器码。打开 Roboshop 首页，点击【高级功能】，点击【版本信息】。
## image.png

将机器人的 ID 和机器码发送给仙工人员进行激活。
## 功能激活
## 清洁车所需激活的常用功能项如下：

## 序号

## 高级功能名称

## 功能说明

## 1

## rbk_diff

包括地图编辑、模型编辑、定位模块、导航模块、差动运动模型、外设扩展功能（辊筒、顶升、潜伏牵引）、API 接口、可视化操作、调度系统接入等

## 2

## rbk_3dcamera

加入 3D 视觉传感器对一些立体的障碍物（如过低或过高的障碍物、地面上的坑洞等）进行识别检测，并根据配置选择停障或者绕行。

## 3

## rbk_roaming

当用户现场有多个 AP 时，通过自研的 Wifi 漫游算法实现移动机器人在多个 AP 间快速稳定的漫游切换，保证调度系统连接的稳定性

## 4

## rbk_script

控制器支持脚本编程功能，可编写 Python 脚本用于控制复杂的上层机构（如机械臂、伸缩取料机构、货叉机构、辊筒机构、顶升机构、上下料机构、电推杆等）

## 5

## rbk_laser_loc

(当移动机器人需要在某些站点进行精准定位时，可以通过激光定位的方式并精确调整)
## 离线激活（不可连外网）
如果机器人无法连接外网，需要联系仙工人员拿到激活文件，点击离线激活选择激活文件，即可激活机器人高级功能。
## image.png

在Roboshop中，点击清洁机器人的高级配置功能；
## image.png

## 点击【版本信息】--【离线激活】
激活文件可询问我司相关工作人员索要；
在高级功能的激活过程中会出现控制器重启的状态，属正常现象；
待控制器重新启动后，再次回到该界面，若所需激活功能显示 “已激活” 字样，代表【离线激活】步骤操作完成；
