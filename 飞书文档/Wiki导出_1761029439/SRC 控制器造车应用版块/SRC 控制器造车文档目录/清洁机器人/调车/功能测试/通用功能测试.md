# 通用功能测试

## 通用功能测试

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 平动测试
a）首先完成激光slam建图，把车体位置摆正在地图合适区域； 
b）在车体当前合适位置的地面做好标记点一，然后在标记点一的正前方3m处的地面标记好标记点二； 
c）在roboshop上通过平动功能下发3m的移动距离，速度为额定速度，实际到点后再在车体同一位置的地面做好标记点三； 
d）测量标记点三距离标记点二的距离x，x≤1cm，测试至少3次数据（里程模式测量三次）。
## image.png

## 原地转动测试
## 差速模型：
a）在驱动轮中心位置的地面做好两个标记点； 
b）通过roboshop转动功能下发转动360°，角速度为额定角速度，旋转完成后再在驱动轮中心位置的地面做好两个标记点； 
c）分别将转动前的两个标记点和转动后的两个标记点连成线，得到两条直线，取两条直线的中点，以第一个点作为参考点测量转动后的点在机器人坐标系下x、y方向的偏差，x、y方向的偏差≤5mm，测试至少3次数据。
## 额定速度测试
GB_T 20721《自动导引车-通用技术条件》-条款5.2.2
a）额定速度测试是指重复数次测试通过直线上（根据默认最大速度及最大加、减速度确定加速区间）速度稳定那一点起5m以上区间的时间，以测定的时间、距离为基础计算额定速度，测试重复进行3次取平均值；
b）在非工作、工作、前进、后退的请况下进行测试；
c）速度V（m/s）=L/T，其中，L表示区间距离米（m），T表示区间通过时间秒（s）；
d）实测速度V与roboshop运行状态界面显示的速度进行对比；
1709807298196-5e3771de-30d5-43da-9e8c-cd4cdb76af06.png 

## 音频测试

## 测试标题

## 操作步骤

## 预期结果

## 修改备注

## 测试结果

## 基本功能

## 1.Roboshop上传WAV 标准音频文件，点击播放音频，音响音质是否存在问题

## 1.语音播报器播放指定音频

## image.png

## 音频音量

## 1.调节音量大小

### 自由控制音量大小（音量低于50时可能无法听到声音）

## image.png

## 状态功能

## 1.控制AGV进行如下条件下的测试，观察机器人播放音频
左转，右转，导航前进，倒走，被阻挡，低电压，错误，碰撞条，使用指定错误码音频

## 1 .播放对应音频

## 机器人模型

## 车体 DI 、 DO 功能检查
根据车体实际I/O接线表验证各个DI、DO对应功能。
## 灯带测试
根据灯带逻辑确认不同状态下机器人灯带显示的颜色，是否与下图规定一致：
## 效果展示：
## 默认的氛围灯及显示效果为：
机器人出错报警：红色呼吸，
机器人急停：暗红色闪烁，
机器人被阻挡：粉紫色跑马灯，
机器人转向中：橙黄色闪烁（根据实际数量及方向），
机器人直行中：蓝色呼吸，
机器人充电中：橙黄色呼吸，
机器人低电量模式：暗红色跑马灯，
机器人静止状态：显示电量，从绿色（剩余电量 100% ）至暗红色（剩余电量 10% ）渐变，
电池类型未配置（或电池通讯出错）且机器人静止：彩虹灯带。
1710148159674-5c7c998f-ed8e-4e70-88d1-bf2282b4908b.png

## 地面适应性测试
### 移动机器人应能满足以下要求的地面上运行：
a）平面度：移动机器人运行应能通过平面度在1m²范围内不小于3mm的路面，应能实现可控的额定速度行驶；
b）坡度：移动机器人运行应能通过坡度不小于0.05的路面，应能实现可控的额定速度行驶。应能在路面坡度不小于0.01的停车点可靠停止；
c）台阶高度：移动机器人应能通过台阶高度不小于5mm的路面，应能实现可控的额定速度行驶；
d）沟槽宽度：移动机器人应能通过沟槽宽度不小于8mm的路面，应能实现可控的额定速度行驶。
## 操作步骤：
在机器人设计要求的地面场地上（比如：环氧地面，水泥地面），控制移动机器人前进、后退、转弯、侧移、自旋,观查机器人能否能正常移动，无明显打滑现象。
机械机构，硬件有无明显噪音。
## 刹车距离测试
### 清洁机器人无需考虑负载测试，空载即为清洁机器人非工作状态
## 避障刹车距离测试
a）保证参数ObsDecDist、ObsStopDist的值为默认值（测试结果需要标注具体数值），在空载的工况下以最大速度进行测试；
b）在跑道一端摆放标准的检测障碍物，车辆在跑道上加速至最高车速并保持直至到达指示线（指示线与障碍物之间的距离为 ObsDecDist-空载的参数值）检测到障碍物后开始制动，待完全停止后测量制动距离（指示线距离小车的距离）；
c）测试三次，取试验结果三次中的最大值。若前进和后退速度不一致或者质量分布不均匀则前进和后退方向需分别测试。

## 空载

## ObsDecDist

## ObsStopDist

## 速度

## 刹车距离

## 前进

## 后退

## 紧急刹车距离测试
a）保证参数ObsDecDist值为0，参数ObsStopDist为默认值（测试结果需要标注具体数值），参数EmergencyStopDist需保持与ObsStopDist一致。在空载和满载的工况下以最大速度进行测试；
b）在跑道一端摆放标准的检测障碍物，车辆在跑道上加速至最高车速并保持直至到达指示线（指示线与障碍物之间的距离为 ObsStopDist-空载参数值）检测到障碍物后开始制动，待完全停止后测量制动距离（指示线距离小车的距离）；
c）测试三次，取试验结果三次中的最大值。若前进和后退速度不一致或者质量分布不均匀则前进和后退方向需分别测试。

## 空载

## ObsStopDist

## EmergencyStopDist

## 速度

## 刹车距离

## 前进

## 后退

## 前后避障测试
a）保证参数ObsDecDist、ObsStopDist的值为默认值（测试结果需要标注具体数值），在空载和满载的工况下以最大速度进行测试；
b）在跑道一端摆放标准的检测障碍物，车辆在跑道上加速至最高车速并保持直至到达指示线（指示线与障碍物之间的距离为 ObsDecDist-空载的参数值）检测到障碍物后开始制动，待完全停止后测量避障距离（小车距离障碍物距离）；
c）测试三次，取试验结果三次中的最大值。若前进和后退速度不一致或者质量分布不均匀则前进和后退方向需分别测试。

## 空载

## ObsDecDist

## ObsStopDist

## 速度

## 避障距离

## 前进

## 后退

## 侧边避障测试
### d）车体膨胀宽度以默认参数为准，测量以下数据：

## 空载

## 最大速度

## ObsExpansion

## DecObsExpansion

## 1.当车体运行在路径中左右间隔＜ mm时，车体被阻挡不能通行；
### 2.当车体运行在路径中左右间隔≥ mm且＜ mm时，车体可以减速通过设置的场景，而不会阻挡；
### 3.当车体运行在路径中左右间隔≥ mm时，车体能够以最大速度行驶，过程中不出现减速以及停止等现象。

## 底盘车体重复到位精度测试方法
## 环境要求
四周有明确的墙体或者障碍物，不会导致激光看到很远的地方。
需要准备出来的测试场地面积建议至少10m*10m。
室内测试车辆窗户遮阳处理。
机器人工作环境（温度、湿度等）：符合产品要求。
## 测试所需工具
## 多色打点笔
## 卷尺、直尺
## 二维码标签
## 红外打点器
## 测试前的准备工作
机器人标定项已完成。
检查激光视角无机器人机构干涉，测试环境无打地情况。
## 建图和测试要求
移动机器人现有运动车型激光导航测试直行，倒走，左转，右转重复到点精度建图应用。
至少需要6m*6m的测试空间。
完成测试区域的扫图工作。
连接线型：高阶3阶贝塞尔曲线。
连接线LM1->LM4, LM1->LM5, LM1->LM8 方向都是正走。
连接线LM4->LM1, LM5->LM1, LM8->LM1 方向都是倒走。
连接线LM2->LM1长度1m。
LM1原地旋转90°向下倒走，新增1个站点，连接线长度1m。
### 连接线LM2->LM4,LM2->LM5最小曲率半径1m
## 开环运动检查
手动控制（Roboshop手动控制、其他外部手动控制装置）机器人进行前后左右移动，查看机器人运动是否平稳、有无卡顿、大幅度跑偏等情况。
