# 正向实施SOP

## 正向实施SOP

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V2.0

### 2025.3.14

## 使用更新

## 使用中

## 一、SOP 场景及实施说明
仙工拥有成熟的SLAM导航技术，清洁机器人配置有激光雷达、3D相机、碰撞触边...同时具备远程控制功能。具备洗地、尘推、吸尘等多种功能，适用工业环境常见的环氧地坪、金刚砂、水磨石、防静电材质地面等多种地面材质。随着自动化的普及，自动清洁需要越来越多，清洁机器人的应用也越来越广泛，清洁机器人的应用助力提高工厂智能化水平，减少人工。相比于人工清洁，清洁机器人的应用还可以避免粉尘、噪音等特殊对人体的伤害。
针对工业场景中清洁车与其他车辆交互问题，在我司的调度系统内，可实现多车交互，自动充电、换水、绕开故障车辆、自主乘梯等多项功能供用户选择。
## 1.1应用场景说明

## 场景要素序号

## 场景要素

## 场景说明

## 备注说明（可以含图示）

## 1

## 场景车辆说明

## 2

## 场地布局说明

## image.png

## 3

## 业务场景功能实现说明

## 业务场景描述：
清洁机器人在主干路线上，每 10 分钟，往复执行一次清洁任务。回到充电站后，执行一次自清洁任务。 

### 二、开机
### 2.1开机
旋转钥匙开关3S左右，机器人内会有轻微的“滴”声，随后机器人屏幕亮起，等待1分钟左右。
### 注：开关旋钮旋转时间过长时机器人会强制关机，导致开机失败
## image.png

### 三、连接机器人
### 3.1局域网连接（以tplink端口转发的ip为例）
打开roboshop pro，
## ①在首页中“添加设备”
②输入tplink中分配的robot ip，
## ③点击“确定”
## image.png

点击确定后，在roboshop首页出现相同ip的机器人，点击开始连接双击进去控制界面
## image.png

注：静态ip、机器人在关机后会出现ip冲突或被占用的情况，需登录tplink进行查看或修改：
静态ip冲突时，tplink不会分配新的ip，需在tplink端修改新的ip
动态ip冲突时，tplink会自动分配新的ip，需在tplink端查看，再使用新的ip连接
## image.png

### 四、清洁机器人扫图建点建议
Roboshop Pro的使用在本文不再进行赘述；采用闭环式扫图、确保场景全覆盖，扫图后可利用绘图工具（启用编辑中的工具）进行优化，调整。
### 4.1线路设计（必读）
### 4.1.1手动设计线路1
将需清扫的区域用站位覆盖（地图编辑中的站点工具），站点间收尾相连，手动设计线路时建议设计为交叉型路线如下图，即清洁机器人清扫的路径。
合理利用连接线可以实现不同的效果，例如下图中在站点直连时使用直线，在转弯时使用高级3阶贝塞尔曲线（或圆弧），调整线路幅度。

由于清洁机器人水扒为0.5 m，故清扫相邻点位间距应设计为 0.5 m 左右，保证清洗区域全覆盖。
避免在清洁结束点直接关闭喷水电机、吸风电机导致地面积水，按照现场实际优化情况，需出口前5-10m处添加前置点（脚本在处理时会提前在清洁结束的站点关闭喷水电机来优化此问题）
## image.png

结束点与前置点距离计算公式：距离(m) = 清洁行驶速度（m/s) * 延时停止工作时间(s)
## 其中延时停止工作时间为下图标记参数
## image.png

## 清洁机器人建图方案2.mp4
注意：由于弯道较急，角速度很大，需要将弯道速度限制在合适的速度内（推荐maxspeed：0.2 m/s）以确保 AGV 行走不会有明显偏离线路的情况，同时也可避免转弯过快导致水甩出，也因此设计线路时需注意直线线路应尽可能长、保证运行效率。

### 4.1.2充电点设计
## 参考“功能测试''——充电点位设计章节
验证对桩情况：机器人路径导航至CP点能够自动识别充电桩的位置，对桩后开始充电，反复测试对桩及返回前置点情况准确无误。
### 注：充电点应与各清洁区域间保证有路径连接

## 充电点设计.mp4
在连接各区域时出口处（终点）向外的第一段线路应设为单向线，即区域外不可由出口进入该区域。
①启用编辑②选择该线路③右侧工具栏方向下拉复选框，仅可由出口站点导航至区域外（区域外不可直接导航至出口站点）。
## image.png

### 4.1.3高级区域
高级区域应用说明：添加高级区域，在配置区域属性后，那么在此区域内的所有线路属性会同步更改，既实现批量、一键式赋值的需求；被高级区域赋予的“属性”在区域被移除后也会消失。
## 添加高级区域方法如下：
## ①启用编辑
## ②点击左侧工具栏区域
## ③选择高级区域
## ④鼠标绘制高级区域大小
## image.png

## ⑤选中高级区域
⑥在右侧属性栏中配置参数,例：勾选maxspeed，修改值为0.2，即该区域内的所有线路maxspeed为0.2m/s（也可配置其他参数以满足实际需求）
## ⑦完成后保存推送
### 注：属性的优先级——高级区域＞线路属性＞参数配置
## image.png

### 4.1.4手动设计线路2（不推荐）
此方案已弃用，弊端由于相邻两站点较近受机器人旋转宽度限制其线路设计会出现转弯急，漏水等问题（文档中仍使用此方案进行编写，将于后续更新）
1708506426474-4139f6d3-4292-436e-8aed-891cbb1c41d9.png

### 4.2清洁区域
清扫区域使用：抢占控制权后——①启用编辑——②点击区域——③点击清扫区域——④鼠标绘制区域，形成闭环，将需要清扫的线路使用清扫覆盖
## image.png

注意线路需完全在清洁区域内，站点线路与清洁区域边缘留有一定距离（机器人模型在运动过程中不过触碰区域边缘，调度可能会识别清扫区域边缘为障碍物）

## image.png

## image.png

### 4.2.1自动生成路径
①-②使用线段框选实际需要的清扫区域，最后需首尾相连形成多边形。在这个区域内建立一个（起始）站点，选中清洁区域
## ③点击右侧“自动生成路径”
### ④根据实际需求填写自动生成路径的参数，点击确定
## image.png

生成的线路图如下:（由于目前路径生成功能仍不完善，会出现：（1）设置的起始点位与其他站点无法对齐红色箭头处。（2）转弯处无法生成弧形弯以至于需要原地旋转如黄色箭头处。（3）部分位置点位长度较短或超出清洗区域蓝色箭头部分。 可见自动生成的线路仍需手动调整方可应用 。）
## image.png

### 4.3库位设计
自动加水排污、充电的点位及线路设计可参考我司 AMB 充电桩自动充电的线路设计。不同的是在 CP 点上需要绑定一个库位并填上对应键值（保证各区域与充电点之间至少有一条可以导航的线路）。
## ①启用编辑
## ②在左侧工具栏点击库位工具
## ③使用鼠标点击创建库位
## image.png

创建的库位图标为白色时（透明色）表示此库位未绑定任何站点，并且当此问题存在时无法保存地图
库位绑定：①点击创建的库位②在右侧工具栏输入要绑定的站点名称，注意格式需与值站点名称完全一致（绑定完成后点击地图空白处，此时库位由白色变为淡蓝色）③也可在修改库位名称及添加库位的bintask
## image.png

### 4.3.1充电桩库位设计
## 键：CHANGE_WATER
## 值：
## {
    "operation": "Script",
## "script_args": {
### "operation": "AddWater"
    },
    "script_name": "clean_robot_2000.py"
## }

其中绿色底填入清洁脚本的名称,根据实际应用的机构脚步名称填写
## ①启用编辑，按照上述步骤创建库位
## ②点击创建的库位
## ③绑定站点（即在此站点执行该库位命令)
## ④点击编辑
## ⑤点击添加
⑥输入对应的“键”和“值”，键和值的格式需与仙工提供的一致，脚本名称需跟实际填写
## image.png

### 4.3.2清洁库位设计
另外，清洁区域涉及 START、STOP点的设计分别如下（库位中的脚本需与实际使用的脚本名称一致）
在清扫区域的 ①起始点绑定键为“START_CLEAN”的库位（红色箭头） ，在机器人任务的 ②终点绑定键为“STOP_CLEAN”的库位 （黄色箭头），并在出口前的2m处添加一个前置点(蓝色箭头)
注：STOP指令会在终点前的一个站点开始运行，前置点提前关闭喷水电机，并逐步关闭其他机构
## image.png

### START_CLEAN（开始洗地，不指定功率）：
## Json：
## {
  "operation": "Script",
## "script_args":{
### "operation": "WashStart"
  },
  "script_name": "clean_robot_2000.py"
## }
## image.png

## STOP_CLEAN（结束洗地）:
## Json：
## {
    "operation": "Script",
## "script_args": {
### "operation": "WashEnd"
    },
    "script_name": "clean_robot_2000.py",
## "script_stage": 1
## }
## image.png

## 检查：
## 1.清扫区域使用站点（线路）全覆盖
### 2.清扫区域的出口处向外的线路应为单行线
### 3.各区域与充电点至少拥有一条可通行的线路
### 4.连接、增加区域与区域之间、区域与充电点之间的（站点）线路可避免机器人重复绕行的情况（路径导航时机器人规划可行的最近路径前往目标点）
### 5.清洁区域内起点和终点仅可有一条线路
### 6.在实施前应模拟验证确认线路的可行性、实用性
## 清洁机器人工作流程一览图：
## image.png

### 五、Roboshop Pro任务链发布清扫任务
### 5.1任务链功能使用
在Roboshop Pro中执行清扫任务需借助任务链功能，流程如下
## image.png

## 1.点击“任务链”进入任务链编辑界面
### 2.点击“新建”建立任务链
### 3.新建任务
### 4.添加组，重复添加
### 5.鼠标左击右侧“自定义动作”标签拖拽至第一个组内，重复添加（一个组仅对应一个标签）
### 6.点击创建的标签
### 7-8.输入调用bintask库位的命令，点击确定
## image.png

### 调用 "START_CLEAN"的库位命令（即开始清扫）：
## {
    "binTask": "START_CLEAN",
## "id": "Loc-1"
## }
### 调用 "STOP_CLEAN"的库位命令（即结束清扫）：
## {
    "binTask":"STOP_CLEAN",
## "id": "Loc-2"
## }

### 上述binTask指定的是库位的键，id指定的是库位名称
注意标绿色的位置中的库位名称应与实际地图中的库位名称一致，注意格式应保持一致，调用bintask时会自动导航至库位绑定的站点并开始运行脚本动作
## image.png

### 9.勾选需要发布的任务列表
## 发布组任务时必须勾选对应的任务目录
### 10.点击右下角发布任务。（选择“发布勾选的任务”或“发布全部任务”任务开始执行，另外勾选“循环”可重复执行此任务）
注：多区域清扫时，可创建多个任务并发布；任务链发布的任务无法实现自动换水、充电需求
## image.png

## 同样的也可以使用任务链发布换水任务
## {
    "binTask":"CHANGE_WATER",
## "id": "Loc-3"
## }
### 六、CORE调度配置及发布指令
### 如何开通调度服务器、方案咨询、激活等请联系仙工咨询
在RDSCORE中可以实现机器人自动加水、排污、自动电池、交通管制等功能
### 6.1RDScore版本更新
### 6.1.1core版本查询以及激活
调度服务器开启后，在添加设备中输入调度ip，连接后可在“版本信息”中查看
## ①点击“高级配置”按钮
## ②打开“版本信息”
### ③蓝色框为core版本号、黄色为core和rds激活的功能
## image.png

rds_custom 代表低代码，即激活后可以自行编辑天风任务
## rds_operator 为手持端激活
## core 为 RDSCore 激活
......
激活项与授权的core版本功能相关，关于调度项目咨询、权限授权等业务请与我司人员联系
若已有授权可通过“离线激活”导入解压后的授权激活文件进行逐一激活（激活过程中重启属于正常现象）
## image.png

### 6.1.2版本升级
## Core版本升级步骤：
## ①进入点击“高级配置”
## ②升级/备份目录
## ③"点击加载文件"选择升级文件
## ④点击开始升级
### RDS和core的升级方式相同，升级过程重启属于正常现象
## image.png

## core版本
## RDS版本
## 优先新版本使用
### 6.2core参数配置
### 6.2.1在core中添加机器人
## 简述core中添加机器人过程：
## ①启用编辑
## ②在左侧机器人列表下点击“+”
## ③勾选要添加的机器人
## ④点击“添加机器人”
## 最后保存推送
## image.png

添加完成后，①在core首页中点击机器人后的状态图标（截图中的橙色感叹号位置）②在core中抢占控制权③-④在core中添加地图，同步数据(“下载地图同步”的地图来自于roboshop中正在使用的地图)
## image.png

### 6.2.2模型文件配置
进入core操作界面，打开core选择“模型文件”目录栏，拉取文件
## image.png

## ①打开CleanRobot文件
②修改scriptName：填写机器人在RoboshopPro中实际使用的机构脚本名称
③勾选closeMotorAtPrePoint：开启后可在清洁运单中使用CLOSE指令
④勾选autoChangeWater：勾选后开启自动换水功能
⑤勾选redoChangeWaterFailed：支持充电、换水订单重做
## ⑥如有需要保存、推送模型文件
## image.png

### 6.2.3core中绑定CP点
绑定充电点（未绑定时无法实现自动加水，无正确的加水库位时无法自动加水）
## ①启用编辑
## ②点击地图中机器人的CP点
## ③在右侧属性中点击绑定“charge”
### ④在弹出窗口勾选与之对应的机器人，值为ture
## ⑤点击确定
## ⑥保存推送
## image.png

同样方式可以选择绑定合适的PP点（停靠点），机器人在无任务时自动回到pp点等待
## image.png

### 6.2.4自动加水充电参数配置
自动充电有 4 个阈值。当机器人不在充电时，有两个电量阈值，用于表示机器人两个状态，分别是 chargeNeed 和 chargeOnly；当机器人在充电时，有两个电量阈值，用于表示机器人另外两个状态，分别是chargedOK 和 chargedFull。原则上参数应按照chargedFull > chargedOK > chargeNeed > chargeOnly 配置

①进入core的编辑界面“启用编辑”②点击对应清洁机器人，③在右侧栏中可以看到红色框中的选项为自动充电的配置参数，蓝色箭头标注的是清洁机器人专用的“最大污水量阀值”和“最低清水量阀值”换水阈值参数
注：只有在core中下发的订单上述参数才生效；自动加水、充电需保证各区域与充电点之间至少有一条可行的线路；自动加水排污功能需在CP（充电）点绑定自动加水排污库位（bintask），并且清扫区域配置正确参数方可生效。
## image.png

## chargeNeed
机器人在电量下降到此值时，需要前往充电桩进行充电，但是在充电过程中可以接单。
在上图中，chargeNeed值为60，表示机器人在无任务当电量对于60时，core自动生成充电任务
## chargeOnly
机器人在电量下降到此值时，需要前往充电桩进行充电，并且在充电过程不可以接单。
在上图中，chargeOnly值为30，当机器人电量低于30时，不会继续执行新的任务，需要前往充电桩进行充电
当chargeOnly设为-1时表示机器人在电量耗尽后才会前往充电，并且过程中不可以接单。
## chargedFull
机器人在充电时，电量达到此值后可以离开充电点。
在上图中，chargedFull值为90，表示机器人在充电时，只有电量达到90后才可以离开。
## chargedOk
机器人在充电时接到订单，只有电量充到此值时，才可以离开充电桩去接单。
在上图中，chargedOk值为70，表示机器人在充电时接到订单，电量只有达到70后才可以去接单。
## maxDirtyWater
机器人污水箱水量超过此值时，需前往充电点换水（此处触发了排水阈值，但在到达充电点后会会同步执行加水命令）
在上图中，maxDirtyWater值为80，表示当污水箱水量超过80时，机器人会立即停止工作，前往充电点换水，换水完成后机器人会返回上次结束的位置继续完成清扫任务
## minCleanWater
机器人清水箱内水量低于此值时，需前往充电点换水（此处触发了加水阈值，但在到达充电点后会会同步执行排水命令）
在上图中，minCleanWater值为20，表示当清水箱水量低于20时，机器人会立即停止工作，前往充电点换水，换水完成后机器人会返回上次结束的位置继续完成清扫任务
### 6.3RDS发布指令（区域清扫）
### 6.3.1登录RDS
在浏览器的网址栏中输入core的ip＋“：8080”进入登录RDS界面（：8080为RDS的端口号）

1708507427221-2ab01253-bbb1-4ad2-8fb6-228c8119fcdc.png 

1708507185390-e583abd1-38f3-4a50-8393-3ca21772a7bf.png

### RDS默认用户名为：admin，密码为：123456
1708507498915-b3b18b60-19c3-4e6b-b3fc-9b54daf0c229.png

### 6.3.2天风任务
在RDS首页可查看机器人状态等信息，RDS基本功能本章不再赘述，可参考仙工RDSCORE使用文档，下面介绍如何建立并发布清洁运单 
1708507937406-26a91475-017e-4706-a55d-4b81d2bb73a2.png

## ①点击“天风任务”
## ②点击“定义新任务”
③在弹出窗口，可以输入任务名称，可以根据实际要求选择建立“普通任务”或“定时任务”，默认创建普通任务，点击“确定”
④新建的任务会在“天风任务”任务列表里出现，找到新创建的任务，点击“编辑”
## image.png

⑤在任务编辑界面左侧工具栏，打开“机器人调度”工具，点击“清洁机器人”功能块拖拽至右侧框内，（鼠标左击功能块不松将其拖拽至右侧虚线框内，可重复添加）
注：无“清洁机器人”功能块和“清洁运单管理”时，请先更新core和rds的版本
1708565084964-ab0d7691-b833-4baa-990f-1626904a2aa0.png

若创建的为定时任务，还需在“任务基础设置”中设置循环时长，默认循环间隔为3000ms
## 定时任务：定时自动（循环）发布任务
## image.png

⑤在创建的清洁机器人功能块中输入“指定清洁机器人”和”清扫区域”，可在下图位置查找复制粘贴即可
注：RDS下发任务给Core，会自动调用指定清扫区域内的bintask（库位值）
## 指定机器人名称：
## image.png

### 清洁区域名称：在地图中点击该区域，右侧显示区域名
## image.png

### ⑥任务编辑完成后检查，确认无误后，点击“保存”完成任务创建
1708566165880-af4ac21f-b18d-473a-8dfe-f91317a07fc3.png

⑦点击任务编辑界面的“运行”或天风任务首页的“运行”按钮，即可发布任务，发布完成后可在“清洁运单管理”中查看运行状态等信息
1708566749356-9f5f3725-c439-4eab-8d90-04a8eb9669dd.png

注：发布任务前需保证Core占用机器人控制权，机器人与服务器地图一致，机器人配置及库位调用脚本名称与使用脚本名称一致，机器人无异常状况（只有在“可接单”状态下才能执行运单任务）。
## image.png

### 七、脚本控制
### 7.1导入/更新脚本
导入脚本的流程如下（无需更换/导入脚本时可忽略此步骤），注意导入时需检测文件格式是否正确，导入后需推送生效
## ①点击机构脚本
### ②在左侧空白处鼠标“右击”，点击“导入文件”，选择脚本文件
③右击导入的脚本点击“推送”（脚本前由白色变绿色状态时方可使用此脚本）
## image.png

使用新脚本或更换脚本时，对应的bintask、模型文件等对应配置中的脚本名称也需同步进行修改
### 7.2导入modbus_tk文件
机器人内部报错出现以下字样时，说明脚本中没有找到modbus_tk文件需要用户手动导入，也可在机构脚本中查看
## image.png

## 导入modbus_tk文件方法如下
抢占控制权后，进入“机构脚本”界面，鼠标右击脚本目录下空白位置，点击“打开文件夹”（或直接点击导入文件）
## image.png

在弹出的窗口中粘贴“modbus_tk”文件夹和脚本文件（资源联系仙工获取）两者应都在一级目录下（与syspy文件、脚本文件同级）
注：modbus_tk文件未解压时应先解压后再导入，资源及脚本名称不可以随意修改

## modbus_tk.zip
## image.png

关闭导入界面文件夹，点击“刷新按钮”，此时脚本目录下更新了刚导入的文件，需要将刚刚导入的文件逐一推送（或拉取）使其变为绿色状态即可（鼠标右击此文件即可推送）
## image.png

### 7.3手动加水排污
## 可参考基础功能测试——脚本功能测试章节
脚本调用加水排污指令如下，本文使用clean_robot_2000.py脚本为例
使用加、排水命令前先将机器人对桩，并打开DO1（DO1为机器人的充电DO），机器人开始充电
### 将机器人对桩后①抢占控制权②电机I/O配置③点击打开DO1
注：默认状态下DO1、DO4应为常闭；
## image.png

## 调用脚本命令：
## ①双击打开脚本
## ②点击上方开始按钮
### ③在弹出窗口中勾选“operation”
④下拉复选框选择“AddWater”换水命令，
注：使用addingwater命令时加水和排污水动作会同步执行
## ⑤点击确定
通过脚本调用addingWater指令时，DO4会自动打开（DO4为加水DO），当清水箱水量到达100%时，加水指令会自动停止（即DO4会自动关闭）；当污水箱水量到达0%时会自动停止、关闭污水阀（brain_ball_valve）
注意：可单独手动打开DO4进行加水，但手动打开的加水DO当加水完成时不会自动关闭，需人工关闭
## image.png

运行AddWater时，点击左上角的“停止”按钮，加水和排水动作会即刻停止
## image.png

### 7.4json文件生成
clean_robot_2000.py支持生成json文件，生成json文件的方法如下：
## ①点击打开脚本
## ②点击开始
## ③运行任一脚本
④运行脚本后，刷新，脚本自动生成了“clean_robot_2000.json”的json文件及所在文件，鼠标点击这个文件，弹出的窗口点击拉取，状态变为绿色生成完成（json文件会自动生成在params文件夹下，首次生成json文件时params文件夹也会自动生成）
### 注：未生成json文件时，尝试刷新、重复此步骤
## image.png

json文件提供了可供用户修改的参数配置，例如是否自动调节功率、更改清洁功率、修改低清水量告警阈值...修改json文件需要推送
### json文件不能单独运行，它只是依靠相关的脚本生成、使用
## image.png

清水水位最小值：当实际的清水水位低于此值时机器人无法再执行任何动作；注意若配置了调度的minCleanwater参数，minCleanwater应远大于此值（建议至少>10%）否则无法执行换水任务
清水最大值：当自动加水达到此值时加水停止，DO4关闭，由于液位显示存在延迟故满水量一般设置在95%左右即可，防止加水过满
污水最小值：当自动排污污水液位低于此值时排污停止，排污阀关闭，由于污水箱底部存在杂质可能无法准确读取0位，因此此值设置在2%即可
污水最大值：当实际的污水水位高于此值时机器人无法再执行任何动作；注意若配置了调度的maxDirtywater参数，maxDirtywater应远小于此值(建议至少<10%)否则无法执行换水任务
### 注：在json文件中无需填写单位，只填写对应的数值即可

注意：RBK高于3.4.6.1800的版本json文件位置在保存在脚本参数栏下，用法与其他版本一致
## image.png

### 八、清洁机器人绕障
### 8.1RoboshopPro中的绕障功能配置

### RBK3.4.7.1017+,开启如下参数
FG_DWA=false、FG_RealTimeAvoid =true、FG_LocalPlanAheadDist =1.0、PathWidth >0
完成绕障的同时更符合清洁机器人的服务属性，保证清洁效率。

## RBK3.4.7.1017-：
 PathWidth ：线路宽度，控制绕障功能是否开启。
在进行路径重规划时的一个重要参数，路径重规划时的规划空间便是基于固定路径往两端横向扩展出 PathWidth 宽度的空间作为路径规划时的空间。因此，当 PathWidth > 0 时，绕障功能才算被开启。若 PathWidth = 0，则表示不开启绕障功能，此时机器人遇到障碍物时会报被阻挡。但是有一个例外情况，当设置“线路属性->导航方式”被设置为自由导航时，则表示将此路径的 PathWidth 设置为“无限大”,这时候机器人也可以进行绕障功能，并且其路径重规划的范围为机器人所处的整个空间。
FG_RealTimeAvoid ：控制实时绕障功能是否开启。
若 FG_RealTimeAvoid = false （PathWidth > 0）时，则机器人遇到障碍物时会进行”根据固定线路进行路径重规划“，即机器人会先在障碍物前停止，然后在原线路横向的 PathWidth 的空间内规划出一条可以绕开视野内障碍物的路径。当我们希望绕障的实时性高，不希望让机器人先停止再绕障时，可以设置 FG_RealTimeAvoid = true（PathWidth > 0）， 即“根据路径上的障碍物信息进行实时重规划”。若实时重规划在预设时间内没规划出路径，则会进行”根据固定线路进行路径重规划“。
①若 FG_RealTimeAvoid = false （PathWidth > 0）时，机器人会先停止再绕障
②若 FG_RealTimeAvoid = true（PathWidth > 0）时，机器人会根据路径上的障碍物信息进行实时重规划

注意：绕障功能并不能在终点绕障，因为最后需要达到终点，所以会停在原地被阻挡
### 8.2Core中的绕障功能配置
core中要想使用绕障功能时将线路绑定绕障组即可实现绕障功能，详细使用说明可参考rdscore使用文档
### 8.2.1绕障组
下面展示的是绕行空间示意图。机器人申请的绕行空间，如果已经开始绕行，其他机器人不能进入。如果其他机器人已经在绕行空间内，且没有移动，没有报错，调度有控制权，那么可以申请绕行空间；且在绕行结束之前，空间内除了绕行机器人之外的机器人不能移动。

1710308825584-bdc022a9-43f3-4e12-9812-6ce4d5123790.png

使用前需要保证机器人的参数配置中的 ObsStopDist 和 Load_ObsStopDist 小于 AvoidPlanDist 。 ObsStopDist 和 Load_ObsStopDist 的参考值为 AvoidPlanDist 一半。
将需要绕行的线路添加到高级组（AvoidObsRegion）中，绑定机器人所在组，即在此组内的线路会触发调度绕行逻辑
## image.png

## image.png

### 九、关机
### 9.1关机
（推荐）使用roboshop中高级配置界面的“关闭计算机”可实现机器人关机
## image.png

### 9.2强制关机
### 旋转钥匙开关5-8S释放旋钮，机器人（强制）关机
## image.png
