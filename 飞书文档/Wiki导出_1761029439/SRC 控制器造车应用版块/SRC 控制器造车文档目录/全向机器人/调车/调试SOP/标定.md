# 标定

## 标定

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 1. 标定项和说明
由于车体加工、传感器或部件在安装过程中会存在误差，标定是移动机器人投入使用前必须要完成的步骤。是通过向机器人下发特定动作指令，采集过程中的某些传感器数据，然后通过计算，获取对特定模型文件参数的修正量，以使得这些参数更符合真实情况的过程。标定对象主要包括：激光里程计、舵轮舵角等。
### 2. 标定前的准备工作
### 2.1场地准备
根据调试车辆前准备工作事项准备标定场地和标定工具。
### 2.2建图
在标定区重新建图，需要建图质量良好，具体标准可参考《 单线激光建图 》。
### 3. 标定步骤
## 1.打开Roboshop，并连接上需要标定的移动机器人；
1708579968049-7548b72e-0808-45b9-9c1a-cc1d193f310a.png

### 2.在“地图与控制”任务栏下依次点击“其他”“标定机器人”；
1708580108085-e468dba9-9707-418c-b859-436f638e5018.png

### 3.由于标定项存在优先级关系，不同标定项需要按顺序进行自动标定。一台从未标定过的双舵轮移动机器人，首先需要对前、后舵轮角度范围进行标定。如下图标注顺序进行标定。
1708581875374-6cbbf304-2f05-480a-8195-94948c82c857.png

### 4.完成前、后舵轮角度范围标定后，需进行双舵轮车舵角偏置差标定。如下图标注顺序进行标定。
1708585352011-72a099c2-6ab8-4d7d-99c9-e651903115dc.png

### 5.完成双舵轮车舵角偏置差标定后，需进行双舵轮车平均舵角偏置标定，标定原理如图。
1652612684733-72279012-9249-4448-a86a-1c289aa64d1e.png

如下图标注顺序进行标定。该标定项进行过程中需要人工测量并手动输入物理空间中的偏置长度量，需要使用 Roboshop 2.3.1.9-2 以上版本进行操作，否则将因为无法弹出输入框，最终导致标定失败。在标定前，使用激光水平仪在地面上沿车体前进方向打一条线，保证线与车体保持平行；在车体上随机选择一个标记点，记录下该点与激光线的垂直距离；开始标定后，车体会前进一段距离，待车停下后测量标记点与激光线的垂直距离，计算两次垂直距离的差值，并将差值填入， 偏左为正偏右为负。
1708587506805-bd8d9bec-bef7-4321-bf5c-fc7a1b27150a.png

1708589328141-5b26d34d-2f62-47f2-ae4f-a13d6d0ddd5b.png

详细操作视频如下。

## 标定视频.mp4
### 6.完成双舵轮车平均舵角偏置标定后，需要进行激光里程计标定，如下图标注顺序进行标定。
1708590099009-ced5ea03-a0d7-4097-95f8-fc01d59a17a2.png

### 7.标定结果判定
在完成整个标定步骤后，Roboshop会跳出“fitting error”提示框，需要关注红色框中的数值。当数值超过0.018m时，需要进行重新标定。
1708590789962-1d3daaa3-413f-4e34-bccf-a3c9f5c9ca1f.png
