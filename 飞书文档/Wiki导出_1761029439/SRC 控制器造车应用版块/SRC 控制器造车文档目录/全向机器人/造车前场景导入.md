# 造车前场景导入

## 造车前场景导入

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.4.29

## 更新发布

## 使用中

## 概述
全向移动机器人是一种高度灵活的物流运输机器人，可以在多个方向上移动。"全向"是指机器人移动的能力，它不仅可以沿直线前进后退和转向，还能在原地实现左右移动和斜行，提供 360° 的运动自由度。这种灵活性是通过特殊的车轮组合实现的，如麦克纳姆轮、舵轮模组、双轮差速模组。在底盘上搭载不同形式上装，可以实现不同场景下的应用需求，如加上顶升模组，即可实现对平面料架的搬运。
## 全向移动机器人一般具有以下特征：
## 1. 多方向移动能力：机器人可以向前、向后、向侧面或沿任何水平方向移动，而不需要转动机身。这是通过对每个轮子的独立控制和驱动实现的。
### 2. 灵活性和机动性：全向移动机器人的移动灵活性使得它们非常适合在空间受限或需要频繁变换移动方向的环境中工作。
## 常见应用场景介绍
全向机器人常见的应用中潜伏式举升占比较多，以下两个应用场景视频较为典型。

宁波金峰-行业-场景-顶升机器人-600D-20220422-高清.mp4
## 场景1 顶升搬运料架

天津中汽-行业-SRC造车-顶升机器人-AMB双舵轮车-20220421.mp4
## 场景2 汽车白车身举升搬运
## 底盘功能介绍说明
## 运动学模型：双舵轮+顶升
主要以双舵轮顶升车来介绍底盘主要组成部分和功能作用。
## image.png

## image.png

## image.png

## 序号

## 名称

## 功能

## 是否可缺省

## 功能授权

## 1

## DCDC 电源模块

是一种电力转换器，能够将动力电池的 48V 转换为 24V，为控制器、传感器等部件提供能源。

## 否

## 2

## 网络设备

设备相当于无线网卡，用来接收前端无线接入点的无线信号，这样有线设备通过连接到网络设备即可访问前端 AP 或基站提供的网络。

## 否

## 3

## SRC 系列核心控制器

移动机器人的“大脑”，负责感知、决策、运动规划的处理。

## 否

## 4

## 顶升模组

将货架顶起的传动机构。

## 否

## 5

## 动力电池

为整机提供动力来源。

## 否

## 6

## 驱动模组

负责整车的运动执行。可通过如下三种方式实现全向运动。
## 1.多舵轮方式，其中双舵轮结构应用最为普遍，也是该图示的运行模型，是通过在地盘中添加双舵轮的结构实现全向运动；
### 2.麦克纳姆轮方式[1]，本质是通过轮组的转速和转动方向的不同实现全向运动；
### 3.双轮差速模组方式[2]，每个差速模组包含2个共轴的驱动轮，每个差速模组可作为一个转向、行走的舵轮模组。

## 否

rbk_diff/rbk_multisteer（多舵轮方式）/rbk_omni（麦克纳姆轮方式）/rbk_dualdiff（双轮差速模组方式）

## 7

## 万向轮

为整车提供辅助支撑，和全向行驶。

## 否

## 8

## PGV

选配功能，为整车提供二维码导航或二次定位使用。

## 是

### rbk_pgv_loc/rbk_pgv_nav

## 9

## 激光雷达

用于整车的导航和避障。

## 否

## 10

## 急停开关

## 用于紧急状态下，整车断电停止

## 否

## 11

## 按钮

## 用于车体的开关、复位等功能

## 否

## 12

## 防撞触边

一种接触式的开关传感器，它可以通过接触障碍物或其它设备从而释放信号。

## 是

## 终端现场实际应用场景分析

## 序号

## 场景

## 场景图示

## 场景说明

## 场景对零部件选型注意事项

## 1

## 密集料架库应用场景

## 密集料架库应用场景1：
## image.png

## 1.该场景为全向机器人移栽过程中 左右/前后 侧存在大量需要进行取放的料架；
### 2.由于车辆周围布满了动态移动的料架，所以地图变化率很高，此时可采用反光柱导航/二维码导航方式；
### 3.此类应用不建议使用料架腿形状识别功能，因为可能会把相邻的料架腿识别成当前预置的料架模型；

## 导航单元的选择影响

## 1.如果该场景使用反光柱导航的方式，不能使用 sick 激光作为反光柱识别的激光（因为sick 对高反光物体的识别特别铭感，会导致误识别）；
### 2.如果使用反光条识别的自动充电方式，也不能使用 sick 激光作为反光柱识别的激光；
### 3.对于使用激光来进行反光条料架的载具识别中，同样也不能使用 sick 激光作为反光柱识别的激光；
### 4.如果避障激光也用于上述所述的识别/导航的场景不建议使用 sick 品牌；
### 5.如果采用下视读码相机的二维码导航方案，在过道左右侧可以保证不丢失定位，可以替代反光柱导航方式；
### 6.如果需要移动机器人在潜入料架底保证料架和机器人之间比较精确的相对位置关系（± 5mm 内）需要加装上视读码相机，并在料架上粘贴定位用二维码；

## 对载具设计和调整的影响

1.如果采用了上视二维码读码相机的定位方式，如果也需要多料架达到车和料架相对位置精度在在 ±5 mm 的要求，则对于料架的加工和二维码的粘贴误差可能丝级别的，一般是做不到，所以多料架的重复定位精度[3]取决于硬件本身；
### 2.如果采用下视二维码导航方式，则取放工位处载具有如下情况需要进行相应调整：
### 2.1 此时需要采用上视读码相机应用，考虑到节拍，不应该在料架处工位地面粘贴二维码做二次定位，所以可以采用激光识别料架的方式进入料架底；
2.2 如果终点处地面粘贴二维码，保证车体和地面二位码的相对位置，此时不采用上视读码相机又需要进行精确定位的，需要使用地面固定式装置来保证料架和地面二维码的相对位置关系，从而保证车和料架之间的相对位置关系；
2.3 如果终点处地面粘贴二维码，因为 前置点［4］ 到取放料架位置，两个二维码之间是 开环运动［5］ ，所以车有概率会偏执两个二维码中心连线的这条直线，所以需要保证车体和料架之间的
单边间距 ［6］ ；
3.如果采用激光识别料架腿（形状识别/放光条识别），需要保证料架腿材质不反光，且非黑色材质（因为激光雷达 的 TOF 物理原理），且保证车体和料架腿单边间距在 70mm 左右，料架间距保持在 30 mm 以上；

## 2

## 地面固定式料架+载具应用场景

## 地面固定式料架+载具应用场景1
1708233728032-202cceac-b317-4eae-a1d3-47fca832a2da.png

### 固定式支架形状包含两种，一种是有斜支撑架如下图所示：
## 图片.png

## 另一种是无斜支撑架如左图所示

## 导航单元的选择影响

## 1.斜支撑架场景下，斜支撑架最顶端距离应大于车体宽度，同时固定式支架本身安装宽度如果小于车体长度，则不支持随动功能。
### 2.此场景一般采用激光形状识别和上视二维码二次调整，如果采用反光条料架的识别中，不能使用 sick 激光作为反光柱识别的激光
### 3.如果避障激光也用于上述所述的识别/导航的场景不建议使用 sick 品牌；
4.如果需要移动机器人在潜入料架底保证料架和机器人之间比较精确的相对位置关系（± 5mm 内）机上视二维码二次调整，需要加装上视读码相机，并在料架上粘贴定位用二维码；

## 对载具设计和调整的影响

## 1.固定支架的外间距应大于料架宽度，内间距小于料架宽度，同时内间距大于车体顶升盘宽度。
2.如果采用激光识别料架腿（形状识别/放光条识别），需要保证料架腿材质不反光，且非黑色材质（因为激光雷达 的 TOF 物理原理），且保证车体和料架腿单边间距在 70mm 左右，料架间距保持在 30 mm 以上。
### 3.货架、料架设计说明请参照顶升车货架识别-反光贴识别中货架设计说明
## 图片.png

## 3

## 地面固定式料架+车体狭长使用场景

## image.png

### 当运输的料架比较长，车体的长宽比超过2时

## 行走驱动方式的影响

## 1.当车体的长宽比超过2时，不建议使用差速方式的行走驱动，建议使用多舵轮或者麦轮行走驱动方式。

## 附录
## 1.名词解释
麦克纳姆轮：简称麦轮，在车体坐标系的至少3个象限内都有分布。由于轮辊角（轮轴与辊轴的夹角，取0~90°范围）为底盘参数，故限定麦轮安装方式为O型。
## image.png

双轮差速模组：每个差速模组包含2个共轴的驱动轮，且差速模组的转轴位于两驱动轮轮心连线的中点。
## image.png

定位精度：需要区分重复定位精度，绝对精度，对接精度的区别，以上“精度”讨论范围都是对于一台单车来说，例如重复定位精度一般指的是车辆的里程中心（即车辆的旋转半径）重复到达世界坐标系地图下同一个点的重复误差；绝对精度一般指的是硬件参数计算出来的误差（例如一个轮子半径为 100 ｍｍ　的轮子，编电机编码器抖动精度是 10 cnt 脉冲，编码器精度是 50000 P/R　那一般说这个轮子的行走误差是 2 X 3.14 X 100 ｍｍ X 10 / 50000＝0.0426 ｍｍ，这里还有没有计入考虑的其他变量）
前置点：前置点一般处于 AP 点前，在此处完成识别相机、识别激光的识别动作，用于后续的路径导航和作业，一般距离 AP 点 1.5 m左右间距处。
开环运行：不将运动后的结果反馈回来影响当前运动过程 。
单边间距： 单边间距指的是潜伏式顶升 AMR 在移动过程中,车辆一侧距离一侧料架腿内侧间距。
