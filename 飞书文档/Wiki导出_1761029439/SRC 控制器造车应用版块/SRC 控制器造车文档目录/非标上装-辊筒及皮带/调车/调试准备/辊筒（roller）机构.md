# 辊筒（roller）机构

## 辊筒（roller）机构

## 版本

## 更新日期

## 更新说明

## 文档状态

## 维护责任人

## V1.0

### 2024.6.11

## 初版

## 使用中

## @倪敬雪
## 什么是辊筒
辊筒（rollor）是指机械中圆筒状可以转动的物体，机械中常用动力源，例如电机驱动辊筒，带动其他材料前进，一般结构示意如下：
1652511975709-d968f3f1-cec6-451f-85bd-ab6f4fc5752c.jpeg

## 如何控制辊筒机构
辊筒机构的组成部件如光电传感器、电机、辊筒等都是以标准外设模块的形式存在。将组成部件组装完成后，可以在机器人模型进行配置。
## 目前有两种方式控制辊筒机构:
通过 DO 控制辊筒，通过 Python 机构脚本执行辊筒动作。
通过标准 Modbus TCP 协议通讯外设模块 PLC 控制辊筒机构
通过配置模型文件中 roller->type 来选择对应的方案

## 参数名称

## 参数位置

## 单位

## 列表

## 支持版本

## roller type

## 模型文件-roller

## ——

## byPLC
## byScript

### 3.3.4.20~latest
其中 byScript 通过 DoMotor + Python 的方式来控制， byPLC 通过标准 Modbus TCP 控制。
## 通过 DO 控制辊筒
作为辊筒电机速度控制 DO，电机减速控制 DO，电机方向控制 DO，挡板控制 DO 具体接线以电气图为准。
物料检测传感器，挡板电机上升/下降到位传感器具体接线以电气图为准。
## 具体的Do参数配置可参考
这个方案适用于定制化需求高的场景，比如双滚动、上下辊筒等等。
## DO传动
直流电机通常使用DO作为直接输入或通过继电器间接控制，通常有两种传动组合方式：

## 参数名称

## 参数位置

## 单位

## 列表

## 支持版本

## type

## 模型文件-DOMotor

## \

## none
## interLock
## reverseAndEnable

### 3.3.4.20~latest

选择不同的传动方式。

内部互锁型：一个输入控制正向，一个输入控制反向，此时需要考虑同时正反向的防呆逻辑，故称为互锁型。

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## positiveDO

### 模型文件-DOMotor-interLock

## \

## - 1

## - 1

## 79

### 3.3.4.20~latest

正向控制的 DO 序号。

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## negativeDO

### 模型文件-DOMotor-interLock

## \

## - 1

## - 1

## 79

### 3.3.4.20~latest

反向控制的 DO 序号。

换向+使能型：一个输入控制启停，一个输入控制更改方向，较为简单。

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## reverseDO

### 模型文件-DOMotor-reverseAndEnable

## \

## -1

## - 1

## 79

### 3.3.4.20~latest

换向控制的 DO 序号，用于控制换向。

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## enableDO

### 模型文件-DOMotor-reverseAndEnable

## \

## -1

## - 1

## 79

### 3.3.4.20~latest

使能控制的 DO 序号，用于控制启停。

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## enableDelayTime

### 模型文件-DOMotor-reverseAndEnable

## ms

## 100

## 100

## 1000

### 3.3.4.20~latest

换向后延时该时间后进行使能，用于防止冲击，瞬时短路的现象。

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## reverseDelayTime

### 模型文件-DOMotor-reverseAndEnable

## ms

## 100

## 100

## 1000

### 3.3.4.20~latest

延时该时间后换向，用于防止冲击，瞬时短路的现象。

### 如上的参数组合有一定限制，例如动力DO必须要求有一种：
## Fatal 50305
提示：DOMotor positiveDO or negativeDO or enableDO must be configured.
## 触发条件：
若方式选择为 reverseAndEnable 时，必须配置 enableDO 。
若方式选择为 interLock 时，必须配置 positiveDO 或者 negativeDO 。
## 解决方式：
修改该参数为实际值，推送模型文件即可消除该错误。
## 传动原理
若场景应用中要求其在固定点停止，如顶升上到位、下到位，则该场景中需要考虑上电时进行回零操作，同时也需要考虑上下到位时传感器的触发及响应。如下作为其决定效果的主要参数：

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## zeroDI

## 模型文件-DOMotor

## \

## -1

## -1

## 100

### 3.3.4.20~latest

用于确定零位的传感器所对应的 DI 序号，初次上电后会运动至该传感器触发急停，并作为零位位置。

## 若未配置该参数，则会触发如下报错：
## Fatal 50305
提示：DOMotor zeroDI must be configured.
## 触发条件：
若 zeroDI （配置 -1 ）。
## 解决方式：
修改该参数为实际值，推送模型文件即可消除该错误。
## 如下参数可以决定标零的方向：

## 参数名称

## 参数位置

## 单位

## 列表

## 支持版本

## calibDirection

## 模型文件-DOMotor

## \

## negative
## positive

### 3.3.4.20~latest

标零的方向，以正向或反向，若zeroDI安装在正向较大位置，则为正向，若安装在反向较大位置，则为反向，需要根据实际安装位置进行选择。

在运动过程中由于其本身无位置类型的传感器，故需要限位传感器来限制其运动范围，防止脱轨或堵转损坏的现象发生。

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## upLimitDI

## 模型文件-DOMotor

## \

## -1

## -1

## 100

### 3.3.4.20~latest

安装正向运动限制位置的传感器所对应的 DI 序号。

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## downLimitDI

## 模型文件-DOMotor

## \

## -1

## -1

## 100

### 3.3.4.20~latest

安装反向运动限制位置的传感器所对应的 DI 序号。

于此同时要求必须安装上限位或者下限位确保该类型传动机构的安全，若两者均不存在（配置 -1 ），则会触发如下报错：
## Fatal 50305
提示：DOMotor upLimitDI or downLimitDI must be configured.
## 触发条件：
若 downLimitDI 和 upLimitDI 两者均不存在（配置 -1 ）。
## 解决方式：
修改该参数为实际值，推送模型文件即可消除该错误。
若无限位DI且不需要考虑安全因素，则可将其配置为虚拟 DI 。
### 当在实际使用过程中，若上限位触发，则会触发如下报错：
## Error52958
提示：DOMotor positive limit triggered.
## 触发条件：
若 upLimitDI 触发。
## 解决方式：
检查该传感器是否误触发或该安装位置提前于到位传感器触发。
### 当在实际使用过程中，若下限位触发，则会触发如下报错：
## Error52958
提示：DOMotor negative limit triggered.
## 触发条件：
若 downLimitDI 触发。
## 解决方式：
检查该传感器是否误触发或该安装位置提前于到位传感器触发。
通过 Modbus TCP 协议通讯外设模块 PLC 控制辊筒
## Roller 机构的电气连接
外设模块的电源接电池 (48V) 或者 DCDC(24V) , 通过网线连接通讯外设模块 PLC 。
## 外设模块参考协议
## 外设模块 PLC 需参考 仙工标准外设
## image.png

模块 ModbusTCP 协议 。
## 机器人模型配置
将 roller type 配置为 byPLC 。
### 2.2.4 常见故障及诊断
## Error52030
## 提示： roller error
## 触发条件：
## 滚筒错误，一般可能是由于急停拍下导致的
## 解决办法：
急停触发后，清除之前的逻辑错误 收到新的控制指令后，清除之前的逻辑错误
## 1. 辊筒已有物料（上料）
### 2. 辊筒无物料（下料）
### 3. 上料超时（30s)
### 4. 下料超时（30s)
### 5. 物料超长
### 6. 左侧挡板动作超时
### 7. 右侧挡板动作超时
### 8. 预上料超时

## Error52031
提示: roller or jack or hook disconnected
## 触发条件：
## 1. 模型文件外设模块配置错误
### 2. 模块供电或接线异常
## 解决办法：
## 1. 检查 Roboshop 机器人模型中的外设模块配置是否正确
### 2. 检查外设模块供电是否正确
### 3. 检查外设模块的接线是否正确
### 4. 如果仍然无法恢复，请联系售后
