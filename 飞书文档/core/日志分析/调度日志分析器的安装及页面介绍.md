# 调度日志分析器的安装及页面介绍

## 调度日志分析器的安装及页面介绍
## @丁禹伯
前置要求： python IDE，python v3.9.12，pip， git
## 导入仓库
git clone https://github.com/huangqiangsheng/rdsLogReader.git
## 设置 python 解释器
建议使用 python v3.9.12（使用过多款电脑，这个版本在所有电脑上都可以运行，当然最新版本 python 大部分电脑也可以），VSCode 和 PyCharm 均可在右下角切换 python 版本
### python v3.9.12 官网下载地址如下：
https://www.python.org/downloads/release/python-3912/
## 安装依赖环境
需要安装 requirements.txt 中的环境，指令如下：
pip install -r requirements.txt
## 运行 loggui
## 终端运行 loggui.py
## python loggui.py
## 效果图
## 运行上述命令后，效果图如下：
1692261954537-90143179-3f0a-4b93-8c39-f2f2229bdf71.png

完整的所有功能的效果图如下，从左至右依次为：主页面、数据页面、状态页面、地图页面、日志页面
1692266286418-180f2a64-1aac-412d-9bcf-5b1ed75eec17.png

## 页面各组件介绍
## 主页面
### 主页面用于显示时间轴内的机器人数据变化信息
File： open 从文件夹打开日志；quit 退出日志分析器
### Num： Fig 主页面下方工具栏的数量
Tools： Open Map 打开地图页面；Open Log 打开日志页面； Open Status 打开状态页面
### home 图标： 将主页面还原到初始缩放大小
move 图标： 点击后，鼠标左键拖动可以移动时间线位置，鼠标右键拖动可以缩放时间线大小
search 图标： 点击后，鼠标左键框选时间线可以将时间线局部放大
ruler 图标： 点击后，鼠标左键点击并拖拽可以测量坐标图上两点之间的数据信息
图片： 图片 0 1 2 分别于下方的三个坐标图相对应，其中 data 用于选择要查看的机器人信息属性，AGV 用于选择查看的机器人，Service 用于选择要查看的服务信息
坐标图： 横轴为时间，纵轴为对应上方图片 data 选择的信息属性，鼠标左键可拖动时间线位置，鼠标右键 点选 Move here 可以将时间线移动至当前鼠标位置，时间线的变化会同步到数据页面与日志页面，即主页面、数据页面、日志页面的时间线是一致的
## ALL： 是否在坐标图展示下述五条信息
### FATAL： 在坐标图上显示 fatal 级别的报错时间线
### ERROR： 在坐标图上显示 error 级别的报错时间线
WARNING： 在坐标图上显示 warning 级别的报错时间线
NOTICE： 在坐标图上显示 notice 级别的报错时间线
### SERVICE： 在坐标图上显示 service 调用信息
下图展示了用主页面查看 1 号机器人的控制权、运单状态、电量信息：
1692328073682-08caf46a-56f2-4661-baf6-e37f4f07edc4.png

## 数据页面
### 数据页面用于显示一台机器人的详细属性信息
## new： 添加一个新的数据页面
## Data： 选择要查看的机器人信息属性
## AGV： 选择要查看的机器人
## key： 详细信息的键位
## value： 详细信息的数值
### 下图展示了用数据页面查看 1 号机器人的运单状态信息：
1692327812877-8ef809e3-5e9d-4a31-84ca-5d7a4b038327.png

## 状态页面
### 状态页面用于显示调度系统的整体基本信息，如下表所示

## key

## value

### PRODUCT_FULL_VERSION

## RDSCore 版本号

## echoid

## 机器码用于激活

## echoid_type

## 机器码类型

## features

## 激活信息

## VERSION

## 完整版本信息

## fatalNums

## fatal 级别报警数量

## fatals

## fatal 级别报警信息

## errorNums

## error 级别报警数量

## errors

## error 级别报警信息

## warningNums

## warning 级别报警数量

## warnings

## warning 级别报警信息

## noticeNums

## notice 级别报警数量

## notices

## notice 级别报警信息
## 日志页面
### 日志界面用于展示按时间线排列的全部日志信息
### 左下角搜索栏： 在日志中搜索关键字，默认字母大小写不敏感
## Up： 从当前位置向上搜索关键字
## Down： 从当前位置向下搜素关键字
Less： 将日志中所有包含关键字的内容按时间线显示在一个新的日志页面中
IgmoreCase： 搜索时忽略字母大小写，单击切换为 MatchCase 字母大小写敏感
## DisableReg：使用正则搜索
### 下图展示了在日志界面搜索机器人的路线信息的日志：
1692329955077-19efaa4e-84e3-48de-a002-dd489b689b6a.png

## 关键字含义
### 主页面 Data 中可选择的字段含义见下表：

## 字段名称

## 字段含义

## 子属性含义

## AutoRes

## 电量监测信息

## alpha: 系数
## batpc: 真实电量
## type：订单类型
batteryPercentageRuntime：滤波后电量

## Block

## 机器人订单的动作块信息

cur_block_ind：正在执行的动作块在动作块集合中的序号
## block_size：动作块集合大小
## block_state：动作块状态
## task_state：所属运单状态
### executor_state：下发路线状态
### org_task_state：更新动作块前的任务状态
org_excutor_state：更新动作块前的下发路线状态
task_blockId：机器人执行的下发路线对应的动作块id
### cur_blockId：当前正在执行的动作块id
## mapfActive：此字段已废弃

### current_excutor_list

## 当前下发给机器人的路线任务信息
### excutor_list：搜路搜出来的任务
### task_list: 机器人执行任务的列表
## out_list：当前周期下发的任务

### size0: 更新前的 excutor_list 大小
### size1: 更新后的 excutor_list 大小
### excutor_state：excutor 状态
### total_size：task_list 大小
### outListSize：outlist 大小
lastOutListSize：上周期 outlist 大小

## DoorStatus

## 门控信息

## doorstatus：开关状态
## doorinplace：到位状态
### connection_status：连接状态
## ss：机器人指令打印

## GET

## 从 rbk 获取的信息
## connect：从 rbk 读的
### is_connect：存在调度的机器人成员变量里

## connect：机器人连接状态
## cur_map：机器人使用地图名称
## reloc：重定位状态
## locked：机器人抢占控制权
## nick_name：控制权所有者
## order_state：订单状态
## control：调度抢占控制权
## dispatchable：接单状态
## is_connect：连接状态
unlockedByRDS: 0控制权在调度；1控制权在其他终端；2无控制权
### uncofirm_reloc：未确认的重定位
## is_charging：正在充电
### battery_percentage：电量
### clearMoveTask：清空机器人任务
## low_battery：低电量
## cu_area_name：所处区域名称
same_map_with_scene：与场景中地图保持一致
### finishedCurrentOrders：完成当前订单
## is_suspend：暂停状态
## hot_lock：抢占控制权的信息

## InternalMsg

## 网络信息

## data_nsec：数据帧时间戳
## timestamp：数据帧可读时间戳
## time_dist：本地与远端时间差
## lock_info：控制权信息
## x：机器人位置 x
## y：机器人位置 y
## angle：机器人位置朝向
### current_station：机器人所处站点
### last_station：上周期机器人所处站点
## confidence：置信度

## InTheMid

## 重规划时路线信息

### in_the_mid：机器人是否位于线路中间
### next_path[0]：下一段路线起点
### next_path[1]：下一段路线第二个点位

## LiftNewStatus

## 电梯信息

## connection：连接状态
## available：可用状态
## running_status：运行状态
### current_lift_area：电梯所处楼层
## lift_area：区域名称
## err：报错信息
## has_door：有电梯门
## doorStatus：电梯门状态
## command_period：指令周期
## accessflag：连接标志位
## cmd：收到的指令
## totalCmd：指令数量
## forbidden：人工禁用

## OccupyRes

## 占用资源信息

## area：当前区域
## area_size：占用区域数量
## block：占用高级组
## avoid：占用绕行区域
## path：占用路径

## RDSSchedule

## 订单分配信息

last_unfinished_simple：上周期没有分配的拼合单
### unfinished_sinple：目前没有分配的拼合单
### waited_order：当前待分配的普通订单
### last_waited_order：上周期待分配普通订单
### pre_send_orders：需要按照优先级分配的订单
### sended_orders：分配好的订单
## simple_order：拼合单数量
## msg：报错信息

## robotOrderStatus

## 机器人订单信息

## cur_order：当前订单
## type：订单类型
## complete：是否封口
## order_state：订单状态
## joinable：允许拼单
## order：运单报文

## rTopoPos

## 机器人拓扑信息
## rToPoPoss：机器人所有可能位置
### occupyScore：机器人减速、停止、排队时的安全距离

## x：位置 x
## y：位置 y
## theta：位置 角度
## size：rToPoPoss 大小
## sid：所处路线起点
## eid：所处路线终点
## percentage：所处路线百分比
## obsStop：被障碍物阻挡了
## obsSlowDown：减速了
## hasError：有 rbk 报错
## vel_x：x 方向速度
## vel_y：y 方向速度
## vel_rot：旋转速度
## stopped：机器人停下来了
## containSize：机器人背篓数量
## empty_c：空闲背篓数量
## load_c：占用背篓数量
### excutorStop：excutor出现了阻挡
### doingBinTask：在做最后的库位动作
### runningTask：是否存在要执行的库位动作
running_or_last_task_id：正在执行的或上一个任务号
## task_status：任务状态
## away_path：偏离路线
## occupyScore：安全距离
## topoPoss：所处点位信息
### mapf_area：所处 mapf 区域名称
## cur_odo：行驶里程
## near_id：附近的点位
## cur_area：所处区域
## hasGoods：身上有货物
## error：rbk 报错

## runBlockIn

## 更新动作块开始时的信息

## init：初始化标志位
### m_current_order：当前订单
## order_size：订单大小

## runCollision

## 碰撞检测信息

## outListsize：下发任务大小
### exListSize：执行任务子列表大小
## collisionFlag：碰撞标志位

## runExcutor

## 执行路线信息

## state：执行状态
### excutor_list_size：规划路线大小
### out_list_size：下发路线大小

## SEND

## 下发路线信息

## cmd_uuid：机器人名称
## code：
## port：端口
## task_list_size：路线数量
## cmd：报文
