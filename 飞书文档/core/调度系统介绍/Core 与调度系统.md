# Core 与调度系统

## Core 与调度系统
## 调度系统的组成
调度系统是由后端 Core、前端软件包含实施工具 RoboShop Pro 和 RDS 等组成的。下图是三个软件的界面。除此之外，调度系统还包含仿真机器人、仿真设备，便于项目的模拟，降低项目的实施成本，提高项目的实施效率。
1654479667192-723f918a-11c2-473e-967e-d9f0f271193b.png

调度系统的多个组成部分可以通过多种协议如HTTP、TCP和ModbusTCP等进行通信。其中Core和Roboshop Pro、RDS、机器人等其他设备是通过HTTP和TCP协议进行连接。调度系统通过网络连接多个设备，可以获取设备的状态，实现对多个设备的调度控制。

## 调度系统实现运单的流程
调度系统先通过前端 RDS，承接客户的业务需求，将客户的订单或者任务转换成运单下发给调度系统的后端Core。运单是由块构成的，Core 会依次将运单中的块执行，将块拆解成机器人的任务列表，下发给机器人。RDSCore 实时监控机器人的执行状态，依据机器人的位置和目标点或者运单或者块的状态，控制对应的设备比如电梯或者门，实现任务。
1654494697276-386101e5-92c3-41b4-a8e4-7db0c06c1300.png

Core 依据用户或者 WMS 下发的多个订单，分配多个机器人在有限空间内将货物从取货点搬运到放货点。这里面包含两个难点。第一个难点在于网络差的情况下，无法确认机器人的准确位置。 因此，机器人在调度系统中占用的不是一个空间位置，而是一段线路，一组互斥组，一个绕行区域。基于此，调度系统 需要让多机器人高效利用空间资源，尽可能提高货物的搬运效率，避免多个机器人占用空间资源时的死锁现象。另外一个难点在于运单无法预测，需要将运单合理安排给机器人，提高效率。下图是一个多车调度的场景。
1654483295296-53a49240-ae02-4a27-b79d-c537909985e7.png

## Core 是什么
Core 是调度系统的后端程序，负责和多个设备进行通信，将下发的运单需求转换成机器人可执行的任务序列，执行运单中的任务，维护运单状态。下图展示了 Core 在调度系统中的功能，其是调度系统的核心。
1654494685601-80073bc2-a0fc-4d43-beef-9ce3fbafa54d.png
