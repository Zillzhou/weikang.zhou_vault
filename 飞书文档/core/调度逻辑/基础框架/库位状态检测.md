# 库位状态检测

## 库位状态检测
## @杨达
在执行和库位相关的任务时，检测库位状态是否满足要求的功能，需要配合库位监测使用。
## 检测逻辑
在开始执行有库位的动作块时，即动作块的状态从 CREATED 变为 RUNNING 时进行检测，比对当时的库位状态和目标库位状态，如果不一致，将动作块标记为失败，不会自动恢复，需要手动重做订单来恢复执行。
## 使用方法
1681356706807-3840d09a-9a46-4ca4-9ec2-526045e93adb.png

### 在模型文件中配置 BinStatusCheckConfig
name 表示需要检测库位状态的动作，对应动作块中 binTask 或者 operation 的值
expectedBinStatus 表示做动作时期望的库位状态，0表示库位没有货物，1表示库位有货物
## 图中配置表示
执行binTask或者operation为ForkUnload的动作块之前，检测动作块location字段的库位状态，如果为0，动作块可以执行，如果为1，或者库位传感器断连，或者没有配置该库位的库位监测，动作块失败；
执行binTask或者operation为Unload的动作块之前，检测动作块location字段的库位状态，如果为0，动作块可以执行，如果为1，或者库位传感器断连，或者没有配置该库位的库位监测，动作块失败；
执行binTask或者operation为ForkLoad的动作块之前，监测动作块location字段的库位状态，如果为1，动作块可以执行，如果为0，或者库位传感器断连，或者没有配置该库位的库位监测，动作块失败。
