# 原地旋转截断逻辑

## 原地旋转截断逻辑
## @杨达
## 原地旋转判断
路线终点的朝向和下一条路线起点的朝向差值大于参数中的 TurnAngle 时，认为机器人在路线终点，即下一条路线的起点会原地旋转。
如下图中，LM406-LM405和LM405-AP378，LM405为第一条路线的终点，第二条路线的起点，两条路线的夹角为90°
1703732840295-a08f4660-611b-4d5e-83d2-936b7c38af74.png

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## TurnAngle

## 导航

## °

## 10

### 0.001

## 1e10

## ~latest

## 判断机器人是否需要原地旋转

## 截断路线，旧版本
## <0.1.9.231106
路径上有需要原地旋转的点时，会截断路线，即，路线只发送到旋转处，后续路线等待旋转完成后发送。此外，如果旋转处之后有门、电梯，也不会在旋转之前提前呼叫。
1703733163464-d16bce47-ad98-490d-af14-956c3818cda9.png 

如上图所示，SM3000处有电梯，机器人路径为LM150-LM120-SM3000。机器人到LM120后需要原地旋转。如果 TurnAngle 参数配置小于90，会截断路线。截断路线后，
到达LM120前，不会向机器人发送LM120-SM3000的指令
到达LM120前，不会占用LM120-SM3000路线上的空间资源
即使 OpenLiftDist 大于LM120到SM3000的长度，也不会在到达LM120之前呼叫电梯。
## 截断路线，新版本
## >=0.1.9.231106
### 通过 StopAtTheTurn 参数控制是否截断路径：

## 参数名称

## 参数位置

## 单位

## 默认值

## 最小值

## 最大值

## 支持版本

## StopAtTheTurn

## 导航

## -

## false

## -

## -

## ~latest

## 原地旋转时是否截断路径

StopAtTheTurn为true时，逻辑和旧版本一致。
## 为false时，不再截断：
## 到达旋转点前，就会发送后续路径
## 到达旋转点前，就会占用后续路线资源
### 到达旋转点前，就会呼叫后续路线上的电梯和门
发送路线和占用资源长度还受其他参数影响，包括 G-MAPF , PlanDist
