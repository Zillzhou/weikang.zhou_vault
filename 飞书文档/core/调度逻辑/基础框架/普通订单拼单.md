# 普通订单拼单

## 普通订单拼单
## @杨达
此文档描述普通运单，即，非拼合单，非分拨单，非清扫运单，非库区到库区的订单，非自动任务的业务运单拼单。
## 解决的问题
拼合单满足不了需求的场景下，仍需要拼单逻辑。
在实际项目中，Core和RDS配合使用，RDS中需要对接各种需求，拼合单使用起来不够灵活，常常需要使用普通运单才能满足业务逻辑，比如，取货完成后，需要在天风任务执行一个特殊块，来更新数据库或者和客户系统通信，这样的场景就没有办法使用拼合单。
## 订单封口对拼单的影响
订单封口后，Core才能确认订单结束后，机器人的位置，并据此进行拼单。
但是，在RDS中，经常需要先选车，再发动作块，即，Core需要在不知道订单终点的时候进行拼单。
### RDS下发给Core的取放货任务通常具有下列特征：
明确的取放划分，即，一个任务中通常只有取货任务，或者只有放货任务
## 一个订单，通常只有一个动作块
### 具有keyTask和keyRoute辅助选车
针对上面的特征，Core支持在开启参数的情况下，即使订单没有封口，也能拼单

## 参数

## 描述

## 支持版本

### AppendAfterIncompleteOrder

为true时，当前订单没有封口，也能预接订单，假设订单的keyRoute或者第一个动作块终点就是订单结束后机器人的位置，默认为false

## >0.1.9.240412

### IncompleteLoadInsertMiddle

为true时，能够预接没有封口的取货订单，假设订单的keyRoute或者第一个动作块终点就是订单结束后机器人的位置，默认为false

## >0.1.9.240109

### IncompleteUnloadInsertMiddle

为true时，能够预接没有封口的放货订单，假设订单的keyRoute或者第一个动作块的终点就是订单结束后机器人的位置，默认为false

## >0.1.9.240517

这些参数，只建议在和RDS配合使用时，且一个订单内，只有一个取/放货动作时使用
## 多个取货动作的拼单
需要在一个普通订单中进行多次取货时，需要在下单时告知Core这个信息，用于辅助选车。
注意，下面的字段不是Core的参数，而是下单时的辅助选车字段，类似 keyTask:

## 字段名

## 描述

## 支持版本

## loadBlockCount

存在且大于0时，表示该订单需要至少X个空背篓才能执行，即，该订单有X个取货动作块

## >0.1.9.240716
