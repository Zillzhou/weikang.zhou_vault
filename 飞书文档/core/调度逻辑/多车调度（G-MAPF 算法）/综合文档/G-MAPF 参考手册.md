# G-MAPF 参考手册

## G-MAPF 参考手册
## @黄强盛@丁禹伯
全局多车联合调度即 G-MAPF（Global Multi-agent Path Finding），指的是 AGV 在执行任务的过程中，不会完全按照最短路线的原则行进，而是会依据当前周围 AGV 的状态进行规划，以原地等待、绕路等动作避免死锁，优化整体运行效率的一种调度方法。启动开关在 Roboshop 的导航参数之中：

## 参数名称

## 参数位置

## 默认值

## 支持版本

## G-MAPF

## 导航参数

## false

## ~lastest

### 是否使用全局多车联合调度作为规划方法的开关选项

相对于全局方法，存在另一局部的联合调度方法（L-MAPF）：局部解死锁（OnlyLocalArea）
## 无法适应或无解的情况（非标准场景）
由于多车调度属于 NP-hard 问题，使用了依概率收敛的求解算法，所以不是所有场景下都能够达到比较好的效果，在本节中会列举一些非标准场景的范例说明。
## 线路干扰-A
1656315564339-2df04f1d-ca7b-467e-b3da-1c0aafcd8d77.jpeg

如上图，线路存在交汇点，但是在交汇处不存在点位，即为线路交叉的情况。由于 G-MAPF 的数学模型基于拓扑点位，故无法识别线路之间的关系，如果出现这一类非标准情况，需要使用特殊的地图属性辅助，避免死锁。
## 线路干扰-B
1656316149846-05c0282e-8007-4954-84ca-21f0dec2cad8.jpeg

如上图，虽然线路之间不存在交汇点，但是将线路膨胀为机器人大小的尺寸时，线路存在重叠的区域。这同样属于非标准情况，需要使用其他的特殊属性进行辅助，避免死锁。
## 地图点位要求
算法使用数字 ID 对点位进行识别，故在同一个场景里，不允许出现 ID 相同，但是代表不同的实际点位的情况。
## 1、若存在点位 AP1，则不可以出现 LM1、CP1，虽然他们名字不同，但是 ID 相同，都是数字 1。
### 2、若机器人组 A 中的地图存在 AP1，其他机器人组中如果出现 AP1，则认为是空间中的同一个点位。
## 机器人数量上限
在当前的求解算法中，随着机器人数量的上升，算法的性能会以平方的速度下降；随着地图点位数量的上升，算法的性能会以线型的速度下降。我们当前认为 G-MAPF 的性能上限是，地图点位数量为 10000，机器人数量为 30。对于特别大的应用场景，算法会不断地进行迭代和优化，上述阈值会根据开发和测试情况进行更新。
## 对外开放的算法参数
G-MAPF 所有的对外开放的参数都是默认隐藏的，需要打开显示更多这一选项，才能进行设置。
## 求解置信度（Confidence）
## 求解置信度（Confidence）
### 定制化搜路（CustomizedAstar）
### 定制化搜路（CustomizedAstar）
### 下发的路径长度（DispatchingLength）
### 下发的路径长度（DispatchingLength）
## 动态停靠（MovablePark）
## 动态停靠（MovablePark）
## 实际距离检测（Physical）
## 实际距离检测（Physical）
## 等待距离（PreDistance）
等待距离（PreDistance、PreDestination）
## 视野大小（Vision）
## 视野大小（Vision）
## 特殊属性的相关设置
### 点位属性设置（MAPFProperties）
### 点位属性配置（MAPFProperties）
