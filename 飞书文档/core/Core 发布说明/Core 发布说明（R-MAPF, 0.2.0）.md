# Core 发布说明（R-MAPF, 0.2.0）

### Core 发布说明（R-MAPF, 0.2.0）
## 请务必确认：
### 0.2.0.240828 及之后的版本，不支持开启 G-MAPF！！！使用 G-MAPF 需回退到 0.1.9 开头的版本
## RHCR，即新算法的开关默认开启
## 更新后，生产前，必须进行真车测试！！！
### robod 必须先更新到 4.4.12 及以上！
Detour功能为绕开无任务车辆，尽量不要开启，如果确实需要请联系开发人员

请务必确认 ROBOD >= 4.4.12 版本，否则后续问题无法排查！！！

### 0.2.0.250729
## 改动
## 增加停靠任务在关闭自动充电后的判断
在场景中有随动点且未开启RHCRSeparatedCollisionCheck时给出报警
车辆掉线时不再设置为不接单不占资源，OfflineRobotUndispatchableUnIgnore参数不再使用
## 轮换充电不能选择无法控制的机器人
## 修复充电桩资源计算错误
## 增加参数不为报错车辆规划路线
## 修复金博梯控状态设置
## 修复触发器无法改变接单状态的问题
### 增加机器人IP相同的检测，存在相同IP的机器人时给出警报
### 改进叉车原地任务前置点选择策略，改为选择角度差最小的前置点
## 修复原地任务导致崩溃的问题
### 修复不同组的同名点位置偏差位导致碰撞检测计算错误的问题
## 修复原地任务指令被删除的问题
### 支持smap中配置路线方向为不指定方向，即保持车辆朝向
## 修复曲线碰撞检测错误导致死锁的问题
### 0.2.0.250708
## 下载链接
## SBS 360
## 改动
修复存在门控、梯控的现场可能出现的调度运行慢、无法推送场景、无法连接等问题
### 修复机器人动作完成后调度还在补偿追加点位的问题
## 修复梯控异常使机器人暂停的问题
## 修复碰撞检测计算不同楼层机器人的问题
## 优化代码计时模块
## 修复判断原地任务错误的问题
### 修复发送空订单时，调度没有为机器人占用资源的问题
## 支持配置日志开始压缩的时间和文件数量
### 修复PP点和CP点没有预留路线导致的死锁
## 新增绕过无动作机器人的功能（绕路模块）
动作块增加 doNotDetour 字段，用于描述此任务机器人不可绕行
### 0.2.0.250620

### 从此版本开始，通过SBS360的软件库下载
## SBS 360中Core的位置：
20250702154425_rec_-convert.gif

## 下载链接
## SBS 360
## 改动
修复原地任务执行失败后，挪车之后重新执行时没有去目标点的问题
## 修复订单终止后的车辆资源占用错误问题
## 同步0.1.9版本的低电量任务分配逻辑
## 修复门控、梯控状态更新不及时的问题
## 修复崩溃问题
## 改善绕路逻辑
## 修复原地任务判断为无法到达的问题
## 修复任务终止后车辆不动的问题
### 修复loadObsExpansion参数计算逻辑
修复下单接口setOrder在下发拼合单时20秒后才返回的问题
## 支持禁止空载通行
## 优化规划失败和阻挡的信息提示
## 修复激活失效的问题
### 0.2.0.250530
## 下载链接
## Linux
## 改动
## 修复原地任务判断错误导致的一系列问题
## 改进任务失败处理，修复无法重做的问题
## 修复切换地图任务导致崩溃的问题
## 修复车辆报错时的路线处理
### clearRobotAllError接口不再检查车辆控制权
添加参数RHCRMaxOrderCount，控制最大规划顺序数，避免极端情况下规划时间过长导致操作无响应
### 改善自动门超时报警逻辑，从旧版本更新后不再需要重新上传场景
## 修复异常查询参数导致崩溃的问题
## 改善电量滤波逻辑
改善RHCREnableDetour开启后的算法性能并修复无法绕路的问题
## 修复路径长度为0导致的规划失败
## 修复终止终态的自动任务导致的资源冲突
增加参数CheckStartTooFar，默认关闭调度仿真机器人的52201报错
## 改善轮换充电逻辑，低电量机器人优先充电
### 修复充电桩全部被禁用时，低电量机器人无法停靠的问题
### 修复unfinished_path计算错误的问题
## 修复若干导致车辆报错52201的问题
## 支持动态修改、查看机器人的标签
### 支持在RHCR规划时使用smap中路线的length属性
增加参数DisableSimLogging，控制调度仿真日志输出，默认关闭所有调度仿真机器人的日志输出
改进日志保存逻辑，按照天数而不是占用硬盘空间删除旧日志，默认保存30天
### 支持自定义不显示报错码机器人模型文件参数
### 0.2.0.250425
## 下载连接
## Linux
### 响应部署方式变更，不再主动提供Windows版本
### 事关合同签署！Windows 相关项目要求有变更
## 改动
## 修复Linux环境中的时间戳错误
## rbk报错的时间错误
## 日志的时间戳错误
## 增加自动门长时间不开门报警功能
## 修复仿真控制权问题
### 修复unfinished_path重复问题
## 修复崩溃问题：
## 执行自动任务时上传场景导致的崩溃
## 数据库访问异常未处理导致的崩溃
## 通信异常捕获不完善导致的崩溃
增加RHCREnablePriority开关，用以修复优先级错误导致的路径规划问题
### 0.2.0.250417
## 下载链接
## Linux Windows
## 改动
## 碰撞检测优化：
## 开启RHCR时，关闭外层旋转碰撞检测
## 分离底盘和货物的碰撞检测
### 解决测试中出现的碰撞检测错误导致车辆死锁的问题
支持通过参数RHCRDetourLength配置绕路距离限制
## 改进后处理中初始路线的补偿逻辑
## 改进FixedPriority逻辑
添加RHCRReservePrior参数，修改预留路线优先级
## 新增
### Trigger 新增机器人状态改变后的回调触发器
### 0.2.0.250401
## 下载链接
## 改动
## 修复若干碰撞检测问题
### 0.2.0.250312

## 存在问题：碰撞检测有些场景会失效
## 下载链接
## 改动
## 修复到点后的旋转碰撞检测
### 修复HTTPS trigger有概率导致崩溃的问题
### 点位上的delayFinishTime上限增加到10000
### 修复访问下班API时有概率导致崩溃的问题
## 清理数据时整理数据库文件
## 仿真机器人改进：
## 支持ForkHeight指令
## 修改叉齿/托盘的默认调整高度/速度
### 支持急停触发任务失败/任务取消/抢控制权
## 仿真机器人阻挡时报错52200
### 优化仿真调试页面布局，修复默认不显示的问题
### 修复回收释放控制权后机器人路线异常的问题
### 0.2.0.250304
## 下载链接
## Linux Windows
## 改动
## 修复BMS可能导致崩溃的问题
## 修复到点后的旋转碰撞检测
### 修复机器人行驶中报错、断连导致后续死锁的问题
## 修复指定标签时订单可能被错误终止的问题
### 修复恢复订单数据时丢失external_id的问题
### 0.2.0.250226
## 改动
## 同步取消动作块功能
增大创建订单的最大延迟，继续修复setOrder返回后查不到运单的问题
## 任务失败自动重做支持次数上限及时间间隔
## 修复匹配充电桩时未考虑路径不可达的问题
## 修复BMS间隔失效的问题
## 修改电梯任务处理
## 修复MAPF中时间估计错误的问题
### 修复keyGoodsId为空时错误分配卸货任务的问题

### 0.2.0.250219
## 下载链接
## Linux Windows
## 改动
## 修复预留路线长度过长的问题
## 修改detour相关的缓存问题
### 修复setOrder之后查不到订单的问题
## 修复数据量增长之后调度周期变慢的问题
## 支持电梯
## 优化调度料箱车仿真
## 修复重分配功能
## 支持等待原地任务
## 修复1226版本存在的内存泄露
## 修复订单数据错误导致的恢复订单异常
## 改进任务失败时的处理
## 改进避让逻辑，不同楼层不可避让
## 修复linux环境下文件描述符超限问题
### 修复DispatchWithOB开启时不分配的问题
## 修复不同楼层的车误报错旋转碰撞的问题
## 修复仿真测试崩溃的问题
## 改进外部抢占控制权后恢复控制的逻辑
## 修复抓斗相关的拼单问题
### 支持不接单不占资源的车没有位置不挡其他车
## 优化轮换充电
## 优化日志，不再使用独立的日志进程
### 0.2.0.241226
## 下载链接
## windows linux
## 改动
## 修改报警不显示的问题
## 修改initwait不生效导致死锁问题
## 修复Detour功能
### 0.2.0.241217
## 下载链接
## windows linux
## 改动
## 修复Linux上崩溃的问题
### 修复机器人不上报位置且不接单时所有车都不规划的问题
## 改进前置点规划逻辑
### 修复预测目标点在开启预留路线时不生效的问题
## 修复绕路问题
删除不再使用的参数：RHCRFullyOrdering, RHCRInitialWaitTime
### 0.2.0.241210
## 下载链接
## windows linux
## 改动
## 修复低电量时仍然拼单的问题
## 优化日志输出及压缩
## 添加载货禁止通行功能
## 添加相同任务直接返回结果逻辑
## 修复更新场景后没有立刻清理报错的问题
### 0.2.0.241115
## 下载链接
## windows linux
## 改动
## 优化规划效率
## 改进ReserveToCP功能
## 优化解死锁能力
## 优化规划失败后处理
### 0.2.0.241111

此版本及后续版本修改了数据序列化方式。之前设置的下列配置会变为默认值，请在更新前保存，更新后重新设置
## 禁用点位和路线
## 上下班状态
## 火警状态
## 机器人充电参数
## 机器人停靠点
## 仿真机器人里程信息
## 机器人被门电梯暂停情况
## 下载链接
## 测试中
## 改动
### 改进极端拥挤条件时的路径搜索，减少搜不到路的情况
## 修复禁用路线导致的问题
## 减少Windows平台句柄占用
### 优化RHCRFixedPriority逻辑
### 0.2.0.241105
## 下载链接
## windows linux
## 改动
改进预留路线计算，增加参数 RHCReserveToCP RHCRRWindow
## 改进算法性能
## 修复可能导致崩溃的若干问题
## 去掉MailSender插件
### 修复仿真机器人走曲线时到点方向错误的问题
## 完善队列停靠功能
### 0.2.0.241024

存在问题：开启RHCRReserveToCP后运行慢；禁用路线会导致崩溃、死循环
## 下载链接
## 存在问题已禁用
## 改动
## 改进重分配运单逻辑
## 修复机器人任务被终止时可能死锁的问题
## 修复1022中的崩溃问题
### 0.2.0.241022
## 下载链接（此版本存在BUG暂不提供）
## 改动
改进了近车等远车的问题，需要FixedPriority参数为True
## 增加了版本信息记录
### 0.2.0.241021

## 存在问题：崩溃
## 下载链接
## 改动
### 修复了多车同时去相邻库位识别时，避让顺序错误的问题
## 修复了开启赶车时，反复停靠的问题
### 0.2.0.241017
## 下载链接
## windows linux
## 改动
## 修复碰撞检测错误导致碰撞报错的问题
### 0.2.0.241016
## 下载链接
## windows linux
## 改动
## 改进碰撞检测计算
## 修复可能导致崩溃的问题
## 修复上下班、火警功能失效的问题
## 修复CountGroup失效的问题

### 0.2.0.240911
## 下载链接
## windows linux
## 改动
## 修复可能导致死锁的问题
## 修复识别任务可能导致死锁的问题
### 修复识别任务可能导致Windows上崩溃的问题
## 修复暂停导致死锁的问题
修复机器人和识别机器人的沿路线距离远，但是直线距离近时不停车的问题
改进队列停靠功能，队列中的机器人接单时，前面的车会重新向队尾停靠
### 0.2.0.240909

## 请更新到最新版本！
## 存在下列问题：
## 识别任务可能导致Core崩溃
## 暂停任务后继续可能导致死锁
## 下载链接
## windows linux
## 改动
### 修复SELF_POSITION任务无法完成的问题
## 修复原地任务可能导致死锁的问题
## 修复到了取/放货点无法执行任务的问题
## 修复暂停任务导致的死锁问题
## 修复两台车同时识别时都不动的问题
## 改进队列停靠逻辑
### 修复机器人方向和路线朝向不一致时有任务也不动的问题
### 移植0.1.9版本的功能（除G-MAPF）
## 修复服务调用可能导致core崩溃的问题
### 改进R-MAPF算法后处理中的补偿线路逻辑
## 紧急修复禁用路线 bug
新版本可正常支持禁用路线，旧版本需使用禁用路线的场景尽快更新！
## 优化 defect 实现方法
修复了之前版本 defect 不支持环形路线的问题，新版本可正常支持除最优路线之外的所有不可避让点
## 修复预留路线不生效 bug
## 优化报错
### 0.2.0.240904

## 请更新到最新版本！
## 存在下列问题：
### 禁用路线有概率会导致调度卡住，只能重启Core恢复
### Defect有时失效，会导致机器人到货架避让
## 预留路线有时失效，会导致死锁
## 下载链接
## windows linux
## 改动
## 支持禁用路线 禁用线路和点位
## 改进识别任务判断逻辑
## 修复预留路线有时失效的问题
### 新增机器人组属性：obsExpansion
### 0.2.0.240830
## 下载链接
## windows  linux
## 新增功能
R-MAPF路径规划的初版，具体参考调度采用新算法的说明文档
