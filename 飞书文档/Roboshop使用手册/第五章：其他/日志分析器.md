# 日志分析器

## 日志分析器

## 排查网络故障
## 网络问题
1653494367486-85988329-89ae-4b97-87a4-d8f83ebd1a87.png

控制器主板->控制器内部馈线->控制器接头->外部馈线->天线

点击2~3次刷新图标，观察【高级配置->无线网卡配置->Wifi列表中->信号强度是否大于 -65 dBm】；

如果搜索出来的信号强度普遍在 -80dBm ~ -90dBm 之间，则做如下排查：
## 检查 天线 是否拧紧
## 天线 与 控制器接头 公母是否正确

如果检查后问题依然存在，则直接把 天线 拧到控制器上，再点击刷新，观察信号是否有明显改善：
### 如果没有改善，直接更换控制器， 控制器内部馈线 可能脱落
## 如果有改善，更换 外部馈线-
## 出现过控 外部馈线- 被压扁的情况

有 ssid 和 密码 无法连接 (检查连接的 SSID 的信号强度是否在 -65 dBm 以上)
如果信号强度理想无法入网，咨询对方 IT 是否设置了固定 IP 才能入网，使用 高级网络配置入网

## 使用证书入网

## 外部问题
## 连接盒子与外部天线的馈线长度过长
## 天线未漏出车体外

刷新的信号基本在 -65 dBm 左右，拧掉天线后信号有明显变化(-80 dBm左右)，则考虑使用第三方无线客户端。

## 分析机器人网络

### 打开 Roboshop->其他->日志分析器
日志文件(.log)，或者下载的调试文件(DebugInfoFiles.zip)直接拖入界面即可

## 在【数据:】输入ApList.1
注: Robokit 3.3.5.58+ 的日志文件不再记录 Aplist 字段， 由 Robod 的日志记录。

检查【高级配置->网卡漫游->断网自动重连设置】是否配置了断网重连辅助手段，这里没有必要不要配置，不要配置；
下载调试文件，使用【其他->日志分析器】搜索 [ CurrentAP .1]查看是否在-62 以内波动。

1653032522523-fec6464d-6f83-4bfd-b234-5c341ae25c8c.png 

1653032479049-b0ad2bdc-7b80-4229-9828-3e8017644e6d.png

## 分析调度服务器网络
### 打开  Roboshop->其他->日志分析器
将 日志文件(.log) 或者 下载的调度日志文件(DebugInfoFiles.zip) 直接拖入界面即可
1657866690836-bd7feac3-ab04-4cf6-bed0-49390ba2d9c4.png

### 输入TCPConnection.机器人名称.status

## 说明

## 0

## 未连接

## 1

## 已连接，未获取数据

## 2

## 已获取数据

## 特殊网络问题
## 以太网没有192.168.192.5
## 问题描述
使用 ifconfig 发现 eth0 或 eth1 其中没有显示 IPv4: 192.168.192.5
## 解决方法
把/etc/network/interfaces文件中的内容注释掉，重启控制器看是否解决
打开cd 到 /etc/netplan 目录 打开 *-static.yaml 文件，查看是否为如下内容
## SRC-800
## network:
## version: 2
### renderer: NetworkManager
## ethernets:
## eth1:
### addresses: [192.168.192.5/24]

## SRC-2000
# This file is generated from information provided by
# the datasource.  Changes to it will not persist across an instance.
# To disable cloud-init's network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
### # network: {config: disabled}
## network:
## version: 2
### renderer: NetworkManager
## ethernets:
## eth0:
## dhcp4: no
## optional: no
### addresses: [192.168.192.5/24]
## nameservers:
### addresses: [8.8.8.8,8.8.4.4]
