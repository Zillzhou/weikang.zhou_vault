# 识别编辑

## 识别编辑
在使用Roboshop进行机器人连接时，可以在标题栏中看到识别文件选项，连接成功后可以进行拉取，可以查看到当前所有支持的识别文件，每个不同的识别文件对应着不同的识别方式和服务。
下面介绍不同的识别文件类型，默认拉取可以看到当前版本程序支持的类型。

1653466854158-0fc0f962-1143-498d-b410-9a87b5d1bdd5.png

## 工具栏

【Load】 ： 加载识别文件。
【Save all】：保存所有识别文件。
【Save As】：另存识别文件。
【Upload】：上传识别文件到机器人。
【Download】：从机器人中下载识别文件到本地。
【Undo】：撤销编辑。
【Redo】：恢复编辑。
【Help Document】：帮助文档。
【Refresh】：刷新。

## charger （充电桩）

### 充电桩识别模型，用于自动充电，具体属性参数如下：

【Device name】：设备名称，可自定义。
### 【minwidth】：充电桩上反光条的最小宽度
### 【maxwidth】：充电桩上反光条的最大宽度

## [!NOTE]
机器人会同激光雷达检测宽度大于 minwidth 且小于 maxwidth 的反光条，从而确定充电桩位置

【dx】：充电极片，相对于充电桩坐标系原点，在 x 轴上的偏移量，需要手动测量；
【dy】：充电极片，相对于充电桩坐标系原点，在 y 轴上的偏移量，默认量为0。

## battery（电池）

【Device name】：设备名称。
## 【backLength】：
## 【aheadLength】：
## 【upHeight】：
## 【recHeightTor】：
## 【goLateralDist】：
## 【maxAdjustTime】：

## chargespot（叉车充电桩）

【Device name】：设备名称。
【ip】：充电桩的ip地址。
【port】：充电桩的端口。

## leg（人腿识别）

人腿识别主要是配合跟随功能使用，只有在启用跟随功能之后，才会调用识别人腿功能。

## 具体参数如下：
【minwidth】：识别人腿的最小长度。
【maxwidth】：识别人腿的最大长度。
【maxdistance】：两腿之间的最大距离。
【method_type】：by_reflector 反光板识别   /  by_legshape 形状识别。

## tag（二维码）

实际使用二维码时，通常将两个二维码对称贴在目标物体上，识别的位置为两个二维码的中点，因此需要指定二维码与目标物体之间的空间关系。将坐标关系描述记录在描述文件，后缀名为.tag，存放于 Robokit /resource/objects/tag/目录下，或在 Roboshop 识别文件中“tag”标签下编辑。

## 属性窗口的各个参数释义如下
【X_Dis】：二维码中心在货架坐标系中x方向的坐标；
【Y_Dis】：二维码中心在货架坐标系中y方向的坐标；
【Z_Dis】：二维码中心在货架坐标系中z方向的坐标；
【goodsWidth】：货架宽度；
【goodsLength】：货架长度；
【tagDistance】：两二维码中心的水平距离（默认在同一高度）；
【tagSize】：二维码大小；
【Tagtype】：二维码种类。

## [!NOTE]
当默认二维码对称贴于货架前端两侧时，X_Dis的值为货架长度的相反数（负值），Y_Dis的值为0， Z_Dis的值为二维码中心的离地高度。

## shelf(顶升车用货架)

因为工厂中可能存在各种各样的满足机器人钻入要求的货架，机器人在不同的任务中，也可能被指定钻入不同的货架，因此我们需要对机器人要钻入的各种货架进行描述，货架描述文件的后缀名为.shelf,存放于 Robokit/resources/objects/shelf/ 目录下。在Roboshop识别文件中货架标签下编辑。

【width】：改造后，钻入方向上，两个货架腿的外侧宽度。这里的宽度，是指改造后，两块反光条的最外侧宽度。
【length】： 垂直于钻入方向的两个货架腿的最外侧宽度。
【leg_width】：反光条宽度，若选用标准 3M 汽车反光贴，即为 0.05（米）。

【align_depth】：x或者-x识别下，前置线路为“倒走”，也就是机器人钻入货架底部后，机器人坐标系 x 轴正方向与货架 x 轴正方向重合时（参考图 1货架坐标系示意图及机器人坐标系示意图），机器人停下的位置和货架前腿之间的距离，开放出来配置，主要是便于实施时候调整。

【anti_align_depth】： x或者-x识别下，前置线路为“正走”，也就是机器人钻入货架底部后，机器人坐标系 x 轴正方形和货架 x 轴正方向差 180 度（参考图 1货架坐标系示意图及机器人坐标系示意图），机器人停下的位置和货架前腿之间的距离，开放出来配置，主要是便于实施时候调整。

【y_align_depth】：y或者-y识别下，前置线路为“倒走”，也就是机器人钻入货架底部后，机器人坐标系 x 轴正方向与货架 x 轴正方向重合时（参考图 1货架坐标系示意图及机器人坐标系示意图），机器人停下的位置和货架前腿之间的距离，开放出来配置，主要是便于实施时候调整。

【y_anti_align_depth】： y或者-y识别下，前置线路为“正走”，也就是机器人钻入货架底部后，机器人坐标系 x 轴正方形和货架 x 轴正方向差 180 度（参考图 1货架坐标系示意图及机器人坐标系示意图），机器人停下的位置和货架前腿之间的距离，开放出来配置，主要是便于实施时候调整。

【rec_off_x】：表示在识别坐标 x 方向的偏移量(m)。
【rec_off_y】：表示在识别坐标 y 方向的偏移量(m) 。

【rec_off_angle】：表示在识别坐标角度偏移量(度) 识别坐标系为右手坐标系，x 轴指向识别物体外侧，即为识别表面的外法向向量。

【outer_width】：因为存在货架顶部比货架腿形成的矩形要大的情况，因此有这个参数；这个宽度的方向和参数width是同向的。

【outer_length】：因为存在货架顶部比货架腿形成的矩形要大的情况，因此有这个参数；这个长度的方向和参数 length是同向的。注意为了防止反光条的噪声，outer_length 至少需要比 length 大 5cm.

【extra_dist】：激光抠除区域的宽度。
【continue_detect】：如果不要实时识别，即普通识别钻入货架，应将continue_detect不勾选。
【side_block】：是否货架侧方有挡板。
【detect_direction】：用来指明识别朝向，detect_direction有x,y,-x,-y四个选项。
【leg_type】：货架腿类型，方形（cube）和圆柱形（cylinder）可选，暂时不起作用。
【method_type】：by_reflector 反光板识别   /  by_legshape 形状识别。

## pallet(货叉栈板模型)

默认当前只能识别左右对称的栈板，即中间孔的尺寸是一致的。在使用栈板识别功能前，需要在识别文件选项配置pallet相关参数：

【pallet_width】：栈板宽度。
【pallet_height】：栈板高度。
【pallet_length】：栈板长度。
【block_laser】：勾选时，表示货物加载后会遮挡激光，此时叉车会加载货物的形状，以及加载货物形状的激光扣除区域。如block_laser 不勾选，则货物形状不参与碰撞检测，只为了显示。
【pocket_width】：中间孔宽度。
【pocket_height】：中间空高度。
【pocket_spacing】：中间腿宽度。
### 【in_global_framework】：

栈板高度指栈板支撑柱的高度，不包括支撑柱之间连接物体的高度，栈板的厚度(栈板高度减去中间孔高度)要大于3cm以上，小于3cm可能会识别不到。
## plt
## image.png

### polygon_template 编辑多边形模板

## Roboshop 2.4.1.166+
## Robokit 3.4.6.12+
## image.png

### 保存：把当前的多边形坐标点保存到模型文件中
### 加载图片：可以离线加载一张图片用于绘制多边形制作模板
### 拍照：调用摄像头拍照 (相机必须是可用)
## 指针：鼠标可以选中图元
## 多边形：绘制多边形
## 撤销：对上一次操作进行撤销
## 恢复：恢复上一次操作
## 删除：删除图元
